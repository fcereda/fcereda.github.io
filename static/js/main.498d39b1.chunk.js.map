{"version":3,"sources":["ui/AppFrame.js","ui/CollapsibleBar.js","ui/toaster.js","EditorTexto.js","floating/FloatingField.js","floating/FloatingInput.js","floating/FloatingNativeSelect.js","floating/FloatingSelect.js","floating/FloatingTextarea.js","ui/FlexDiv.js","ui/Spacer.js","lib/globalData.js","lib/expedicaoMinuta.js","Minuta.js","TabsMascara.js","Mascara.js","ui/Slider.js","ui/SliderContainer.js","sidebar/SidebarMenu.js","sidebar/SubmenuPanel.js","ui/DivWithSpinner.js","ui/FormField.js","ui/SelectUsuario.js","lib/minutaData.js","sidebar/Despachos.js","sidebar/Expedir.js","sidebar/Historico.js","ui/SelectUnidades.js","sidebar/Rubricas.js","sidebar/DialogInputNome.js","sidebar/ListaMinutas.js","htmltel.js","sidebar/Painel-Minuta.js","sidebar/DialogMinutas.js","sidebar/DialogSalvarModelo.js","Sidebar.js","Topbar.js","App.js","serviceWorker.js","index.js","lib/utils.js"],"names":["AppFrame","props","className","topbar","style","flex","display","overflow","backgroundColor","dark","sidebar","content","CollapsibleBar","width","defaultWidth","open","children","AppToaster","Toaster","create","position","Position","TOP_RIGHT","EditorTexto","handleEditorChange","e","setState","texto","changeEventDispatcher","setTimeout","onChange","state","handleBlur","target","getContent","editorRef","React","createRef","prevProps","prevState","this","current","editor","setContent","flexDirection","height","ref","initialValue","init","placeholder","plugins","content_css","content_style","block_formats","font_formats","fontsize_formats","formats","pc","block","remove","exact","pn","classes","tp","split","infotp","h1","h2","h3","assinat","alignleft","selector","aligncenter","alignright","strikethrough","inline","style_formats","title","format","preview_styles","valid_elements","indentation","toolbar","menubar","statusbar","nonbreaking_force_tab","advlist_number_styles","language_url","language","spellchecker_language","entities","paste_merge_formats","paste_retain_style_properties","paste_word_valid_elements","invalid_elements","valid_classes","valid_styles","table_default_styles","table_responsive_width","table_advtab","table_cell_advtab","table_row_advtab","table_toolbar","textpattern_patterns","start","replacement","cmd","value","contextmenu","autosave_restore_when_empty","autosave_retention","init_instance_callback","on","blockFormats","command","appliedFormat","indexOf","formatter","matchAll","forEach","thisFormat","toggle","apply","setup","btnZoomIn","btnZoomOut","ZOOMS","minZoom","maxZoom","length","increaseZoomAndCheckButtons","increment","zoom","setDisabled","checkDisabledZooms","bodyElement","dom","getRoot","Number","getStyle","zoomPosition","newZoom","setStyle","increaseZoom","addEventListener","ctrlKey","key","preventDefault","stopPropagation","ui","registry","addButton","icon","tooltip","disabled","onSetup","btn","onAction","onEditorChange","onBlur","Component","FloatingField","button","buttonIcon","buttonClick","onClick","classList","push","error","visible","join","label","message","FloatingInput","type","required","pattern","onFocus","FloatingNativeSelect","options","items","map","option","index","id","checked","text","addBlankOption","removerAcentos","str","normalize","replace","FloatingSelect","render","noResults","isEmpty","multiple","component","selectRef","fill","createNewItemFromQuery","createNewItemRenderer","initialContent","getItemsNotSelected","itemListPredicate","filterItems","itemRenderer","renderItem","openOnKeyDown","query","onItemSelect","handleSelect","onItemsPaste","handleItemsPaste","onQueryChange","handleQueryChange","bind","popoverProps","minimal","resetOnSelect","tagRenderer","renderTag","tagInputProps","onRemove","handleTagRemove","tagProps","getTagProps","inputProps","onKeyUp","handleTagInputKeyUp","selectedItems","defaultSelectedItem","selectedItem","handleSelectSimple","inputValueRenderer","renderInputValue","opacity","handleClearOption","handleFieldClick","separator","notEmpty","inputElement","inputEl","interactive","intent","highlightFirstTag","Intent","PRIMARY","NONE","queryTerms","toUpperCase","matchingItems","i","thisTerm","trim","matchingItem","find","item","Error","isKeyup","newItems","getItemsFromQuery","err","filter","errors","distribuicao","active","handleClick","possibleItems","input","focus","addItemsFromQuery","modifiers","matchesPredicate","shouldDismissPopover","selectedIndex","itemToRemove","deselectItem","thisItem","filteredItems","rankedItem","sort","a","b","isItemSelected","selectItem","PureComponent","FloatingTextarea","cols","rows","defaultValue","FlexDiv","includes","direction","vertical","Spacer","marginLeft","parseInt","undefined","marginTop","unidades","indexadores","postos","grausSigilo","grau","charAt","toLowerCase","prioridades","propositos","tel","det","cit","prazos","anos","toString","basesLegais","base","grupos","grupo","usuarios","nome","unidade","login","usuarioAtual","modelos","privados","publicosUnidade","publicos","originalData","carregarDataset","dataset","callback","axios","get","then","response","data","dataToUnidade","codigoUnidade","descricao","match","dataToPosto","posto","noPostoAbreviado","dataToProposito","proposito","idProposito","limparArray","arr","pop","importarDadosParaArray","mapFunc","x","filterFunc","grupo_unidade","classificacao","sigla","nameClassificacao","tipoClassificacao","BaseLegal","baselegal","cmpCoBaseLegal","cmpDcBaseLegal","Consts","Utils","getDateFormatted","date","dayjs","getCurrentDateFormatted","Date","lookupItem","campoId","lookupItemText","campoText","obterNomePosto","siglaPosto","labelsCampos","Minuta","titulo","tipo","destinatarioDet","destinatariosCit","rtm","rtmClic","indice","carater","prioridade","referencias","redator","resumo","prazoSigilo","baseLegalSigilo","autoridade","cargo","razoes","_changed","Object","seal","variable","Array","isArray","objToStr","isObject","console","obj","setProp","prop","propName","maxDistribuicoesPorSigilo","o","r","s","u","maxRtmPorSigilo","validations","maxDistribuicoes","numRtm","validaTamanhoCampoTexto","validationFunction","erros","camposObrigatorios","campo","valor","erro","validate","outraMinuta","mergeArrays","mergeStrings","maxLength","nomeCampo","str1","str2","mergeMinutas","essaMinuta","novaMinuta","setProps","prepararArquivoExpedicao","minuta","func","abertura","idCarater","now","prazo","getFullYear","getMonth","getDate","log","idPrioridade","arrItem","thisYear","MATCHES","val","splice","nomesPostos","textRetransmissao","char","lines","thisLine","substr","splitByWidth","iniciais","linha","conteudo","prepararObjetoExpedicao","destinatarios","dest","indexador","coBaseLegal","coPrioridade","destinatario","siglaUnidade","dsBaseLegal","dtOutras","noBaseLegal","sgCategoria","tpDocumento","dsResumo","dsIndice","dsSiglaNome","sgFormatoTexto","dsTexto","noCarater","noPrioridade","dsRetransmissao","referencia","idCategoria","noLogin","dsNome","dsDestinatario","coPrazoBaseLegal","coProposito","noProposito","stringArrayToItemArray","strArr","Boolean","converterMinuta","Cabecalho","minutaConvertida","createNewReferenciaFromQuery","minutaEClassificada","handleClickTipo","handleButtonClick","handleIndiceChange","handleResumoChange","handleRazoesChange","handleChange","handleBlurRedator","matches","anoCorrente","ano","numero","varName","stateChange","validateValue","propositoSelecionado","errorMsg","varLabel","handleTextFieldChange","newError","selectedTab","outlined","alignText","Alignment","CENTER","renderItemPosto","MetadataPanel","handleTabChange","newTab","animate","horizontal","Slider","show","SliderContainer","SidebarMenu","chevronRight","labelElement","SubmenuPanel","DivWithSpinner","top","left","right","spinnerTop","textAlign","spinner","size","Spinner","SIZE_STANDARD","FormField","SelectUsuario","usuario","selected","handleItemSelect","searchStr","renderSelectedItem","minutaCarregada","logins","despachos","origem","destino","rubricas","status","autor","versoes","reverse","mockSave","Promise","resolve","reject","salvarModelo","arrTipo","salvarVersao","unshift","salvarCopia","Despacho","Despachos","usuarioDestino","textoDespacho","showDialog","showSpinner","handleUsuarioChange","handleDialogButtonClick","handleTextareaChange","catch","DANGER","clickedOk","novoDespacho","adicionarDespacho","SUCCESS","onBack","despHtml","despacho","growVertically","rightIcon","isOpen","onClose","handleDialogClose","Classes","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","Expedir","timeoutVerificar","verificarMinuta","validarParaExpedir","errorsArray","arquivoExpedicao","objetoExpedicao","alert","corpoTexto","hasErrors","Historico","listaAcoes","acao","listaAcoesElement","SelectUnidades","Rubrica","decisao","rubrica","labelStatus","whiteSpace","Rubricas","unidadesSelecionadas","slice","rubricasHtml","handleUnidadesChange","DialogInputNome","handleInputChange","handleClickOk","handleClose","ButtonStyle","minWidth","asyncControl","okButtonLabel","ListaMinutas","handleMenuItemClick","listaHtml","modelosHtml","minutas","multiline","parse","require","inserirProposito","html","fullMatch","segmentMatch","validar","root","checkNode","node","rawTagName","rawAttrs","childNodes","child","nomePosto","componentesNomePosto","montaListaNomesPostos","arraySiglas","primeiroElemento","htmlListaPostos","encontrarLabelCampo","idProcurado","arrayValores","campoObj","PainelMinuta","textoComProposito","origemTel","htmlTel","dangerouslySetInnerHTML","__html","montarCabecalho","fontSize","DialogMinutas","filtro","itemSelecionado","showListaSpinner","modelo","handleOk","handleFilterChange","handleSelectMinuta","handler","filterFunction","spinnerStyle","zIndex","actionButtons","actions","action","canOutsideClickClose","leftIcon","overflowY","border","filtrarMinutas","padding","paddingTop","overflowX","DialogSalvarModelo","tipoModelo","handleTipoModeloChange","selectedValue","Sidebar","openPane","openDialog","handleMenuClick","handleSalvarCopia","handleSalvarModelo","handleSalvarVersao","backToMenu","closeDialog","paneToOpen","dialogToOpen","forceUpdate","minutaObj","versao","onSalvarCopia","onSalvarModelo","onSalvarVersao","showRubricas","showDespachos","showExpedir","showHistorico","modelosActions","onUsarModelo","versoesActions","onUsarVersao","loadModelos","loadMinuta","loadVersoes","Topbar","sidebarIcon","sidebarIsOpen","rightbarIcon","rightbarIsOpen","MINIMAL","toggleSidebar","maxWidth","onChangeName","align","RIGHT","marginRight","toggleRightbar","App","autosave","handleTextoChange","handleToggleSidebar","handleToggleRightbar","handleChangeName","handleMergeMinuta","handleChangeMinuta","minutaId","getMinutaId","newMinuta","setupAutosave","window","close","setInterval","foiAlterada","marcarComoNaoAlterada","document","funcaoSalvar","mensagemSucesso","mensagemErro","salvarDocumento","alignItems","location","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","arr1","arr2","newArr","global","locationSearch","search"],"mappings":"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","file":"static/js/main.498d39b1.chunk.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './AppFrame.css'\r\n\r\nfunction AppFrame (props) {\r\n\r\n\treturn (\r\n\t\t<div className=\"app-frame\">\r\n\t\t\t\r\n\t\t\t<div className=\"topbar\">\r\n\t\t\t\t{ props.topbar }\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div style={{ flex: 1, display: 'flex', overflow: 'hidden', backgroundColor: '#eee' }}>\r\n\t\t\t\t<div className={ 'sidebar' + (props.dark ? ' bp3-dark' : '') }>{ props.sidebar }</div>\r\n\t\t\t\t<div className=\"content\">{ props.content }</div>\r\n\t\t\t</div>\t\r\n\t\t</div>\r\n\t)  \r\n}\r\n\r\nAppFrame.propTypes = {\r\n\tcontent: PropTypes.element.isRequired,\r\n\tsidebar: PropTypes.element.isRequired,\r\n\ttopbar: PropTypes.element.isRequired,\r\n}\r\n\r\nexport default AppFrame\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './CollapsibleBar.css'\r\n\r\nfunction CollapsibleBar (props) {\r\n\tlet style = {\r\n\t\twidth: props.width || props.defaultWidth \r\n\t}\r\n\tif (!props.open) {\r\n\t\tstyle.width = 0\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"collapsible-bar\" style={style}>\r\n\t\t  { props.children }\r\n\t\t</div>\t\r\n\t)\r\n}\r\n\r\nCollapsibleBar.propTypes = {\r\n\tdefaultWidth: PropTypes.oneOfType([\r\n\t  PropTypes.number,\r\n\t  PropTypes.string\r\n\t]),\r\n\topen: PropTypes.bool.isRequired,\r\n\twidth: PropTypes.oneOfType([\r\n\t  PropTypes.number,\r\n\t  PropTypes.string\r\n\t]),\t\r\n}\r\n\r\nexport default CollapsibleBar","import { Position, Toaster } from \"@blueprintjs/core\";\r\n \r\n/** Singleton toaster instance. Create separate instances for different options. */\r\nexport const AppToaster = Toaster.create({\r\n    className: \"recipe-toaster\",\r\n    position: Position.TOP_RIGHT,\r\n});","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\n\r\n// React wrapper\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport './tinymce-overrides.css';\r\n\r\nclass EditorTexto extends React.Component {\r\n\r\n  constructor (props) {\r\n    super ()\r\n    this.state = {\r\n      texto: props.texto\r\n    }\r\n    this.editorRef = React.createRef()\r\n    this.changeEventDispatcher = null\r\n  }\r\n\r\n  componentDidUpdate (prevProps, prevState) {\r\n    if (prevProps.texto === this.props.texto)\r\n      return\r\n    if (this.editorRef.current.editor.setContent)\r\n      this.editorRef.current.editor.setContent(this.props.texto)\r\n    this.setState({\r\n      texto: this.props.texto\r\n    })\r\n  }\r\n\r\n  handleEditorChange = (e) => {\r\n    this.setState({\r\n      texto: e\r\n    })\r\n    if (this.changeEventDispatcher)\r\n      return\r\n    this.changeEventDispatcher = setTimeout(() => {\r\n      if (this.props.onChange) {\r\n        this.props.onChange(this.state.texto)\r\n      }      \r\n      this.changeEventDispatcher = null\r\n    }, 5000)\r\n  }\r\n\r\n  handleBlur = (e) => {\r\n    if (this.props.onChange) {\r\n      this.props.onChange(e.target.getContent())\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const formats = {\r\n      pc: { block: 'p', remove: 'all', exact: true},  \r\n      pn: { block: 'p', classes: 'num', remove: 'all', exact: true },\r\n      tp: { block: 'p', classes: 'tp', remove: 'all', exact: true, split: false}, \r\n      infotp: { block: 'p', classes: 'infotp', remove: 'all', exact: true},\r\n      h1: { block: 'h1', exact: true },\r\n      h2: { block: 'h2', exact: true },\r\n      h3: { block: 'h3', exact: true }, \r\n      assinat: { block: 'h6', remove: 'all', exact: true },\r\n      alignleft: { selector: 'td', classes: 'left' },\r\n      aligncenter: { selector: 'td', classes: 'center' },\r\n      alignright: { selector: 'td', classes: 'right' },\r\n      strikethrough: { inline: 'del', remove: 'all'}\r\n    }\r\n    const style_formats = [\r\n      { title: 'Talking points', format: 'tp'},\r\n      { title: 'Numerado', format: 'pn' },\r\n      { title: 'Info em itálico', format: 'infotp'},\r\n      { title: 'Normal', format: 'pc' },      \r\n      { title: 'Título 1', format: 'h1' },\r\n      { title: 'Título 2', format: 'h2' },\r\n      { title: 'Título 3', format: 'h3' },\r\n      { title: 'Assinatura', format: 'assinat'}\r\n    ]\r\n\r\n    return (\r\n      <div style={ { flex: 1, display: 'flex', flexDirection: 'column', height:'100%' } }>\r\n      <Editor\r\n        ref={this.editorRef}\r\n        initialValue={this.state.texto || '<p class=\"num\"> </p>'}\r\n        init={{\r\n          placeholder: \"Clique aqui para digitar o texto\",\r\n          plugins: 'link code lists advlist textpattern table nonbreaking paste searchreplace spellchecker charmap fullscreen',\r\n          content_css: [\r\n            '/fonts/source-serif-pro/source-serif-pro.css',\r\n            '/fonts/roboto/roboto.css',\r\n            '/editor-content.css'\r\n          ],\r\n          content_style: \"body {font-family: 'Source Serif Pro', serif; font-size:18px; padding-left: calc(50% - 35ch); padding-right: calc(50% - 35ch);}\",\r\n          block_formats: 'Numerado=pn; Talking point=tp; Info em itálico=infotp; Normal=pc; Título 1=h1; Título 2=h2; Título 3=h3; Assinatura=assinat',\r\n          font_formats: 'Arial=arial,helvetica,sans-serif; Courier New=courier new,monospace; Source Serif=Source Serif Pro',\r\n          fontsize_formats: '11px 12px 14px 15px 16px 17px 18px 24px 36px 48px',\r\n          formats: formats,\r\n          style_formats: style_formats,\r\n          preview_styles: 'font-family font-size font-weight',\r\n          \r\n          valid_elements: 'a[href|target=_blank],br,strong/b,u,em/i,del/strike,sub,sup,' + \r\n            'blockquote,p[class|style],h1,h2,h3,h4,h5,h6,h7' + \r\n            'p[class]/div[class],' +   // Converte elementos <div> para <p>  \r\n            'ol[style],ul[style],li[style],' + \r\n            'table[style|border|width|height|align|cellspacing|cellpadding],thead,tbody,tfoot,tr[style],td[style|class|width|height],th[style|class|width|height]',\r\n\r\n          indentation : '2em',\r\n          \r\n          toolbar: 'formatselect | paste cut copy | undo redo | searchreplace | bold italic | numlist bullist | blockquote outdent indent | charmap table | zoomout zoomin code',\r\n          menubar: false,\r\n          statusbar: false,\r\n\r\n          nonbreaking_force_tab: true,\r\n          advlist_number_styles: 'lower-alpha,decimal,upper-alpha',\r\n          language_url : '/tinymce/langs/pt_BR.js',\r\n          language: 'pt_BR',\r\n          spellchecker_language: 'pt_BR',\r\n          entities: 'euro',\r\n\r\n          paste_merge_formats: true,\r\n          paste_retain_style_properties: '',\r\n          paste_word_valid_elements: 'b,strong,i,em,u,sub,sup,strike,h1,h2,h3,p,table,tbody,thead,tfoot,tr,td,th,div,ol,ul,li,br,del',\r\n          invalid_elements: 'pre',\r\n          valid_classes: 'num tp infotp assinat left center right',\r\n          valid_styles: {\r\n            'table':   'width, min-width',\r\n            'td': 'width',\r\n            'div': 'width,height',\r\n            'ul': 'list-style-type',\r\n            'ol': 'list-style-type',\r\n          },\r\n\r\n          table_default_styles: {\r\n          },\r\n          table_responsive_width: true,\r\n          table_advtab: false,\r\n          table_cell_advtab: false,\r\n          table_row_advtab: false,\r\n          table_toolbar: \"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol | alignleft aligncenter alignright\",\r\n\r\n          textpattern_patterns: [\r\n            {start: '--', replacement: '—'},\r\n            {start: '#', format: 'h1'},\r\n            {start: '##', format: 'h2'},\r\n            {start: '###', format: 'h3'},\r\n            {start: '>>', cmd: 'mceToggleFormat', value: 'tp'},\r\n            {start: '* ', cmd: 'InsertUnorderedList'},\r\n            {start: '- ', cmd: 'InsertUnorderedList'},\r\n            {start: '1. ', format: 'pn'},\r\n            {start: '2. ', format: 'pn'},\r\n            {start: '3. ', format: 'pn'},\r\n            {start: '1) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'decimal' }},\r\n            {start: 'a. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' }},\r\n            {start: 'a) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' }},\r\n            {start: 'A. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'upper-alpha' }},\r\n            {start: 'A) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'upper-alpha' }},    \r\n          ],\r\n\r\n          contextmenu: \"copy cut paste | bold italic underline strikethrough | link table spellchecker\",\r\n\r\n          autosave_restore_when_empty: true,\r\n          autosave_retention: \"180m\",\r\n         \r\n          height: '100%',\r\n\r\n          init_instance_callback: function (editor) {\r\n            editor.on('ExecCommand', function (e) {\r\n              const blockFormats = ['pn', 'tp', 'infotp']\r\n              if (e.command === 'mceToggleFormat') {\r\n                let appliedFormat = e.value\r\n                if (blockFormats.indexOf(appliedFormat) < 0) {\r\n                  // Retorna se o formato aplicado não for um dos que usam a tag <p> \r\n                  return\r\n                }\r\n                let currentFormats = editor.formatter.matchAll(blockFormats)\r\n                currentFormats.forEach(thisFormat => {\r\n                  if (thisFormat !== appliedFormat) {\r\n                    editor.formatter.toggle(thisFormat)\r\n                  }\r\n                })\r\n                editor.formatter.apply(appliedFormat)\r\n              }\r\n            });\r\n          },\r\n          \r\n\r\n          setup: function (editor) {\r\n            const ZOOMS = [0, 0.5, 0.65, 0.8, 0.9, 1, 1.05, 1.15, 1.25, 1.5, 2],\r\n                minZoom = ZOOMS[1],\r\n                maxZoom = ZOOMS[ZOOMS.length-1]\r\n            let btnZoomIn,\r\n                btnZoomOut\r\n\r\n            const checkDisabledZooms = function (zoom) {\r\n              btnZoomIn.setDisabled(zoom >= maxZoom)  \r\n              btnZoomOut.setDisabled(zoom <= minZoom)\r\n            }\r\n\r\n            const increaseZoom = function (increment = 1) {\r\n              const bodyElement = editor.dom.getRoot()\r\n              const zoom = Number(editor.dom.getStyle(bodyElement, 'zoom', true))\r\n              const zoomPosition = ZOOMS.indexOf(zoom)\r\n              const newZoom = ZOOMS[zoomPosition + increment]\r\n              if (!newZoom) {\r\n                return zoom\r\n              }\r\n              editor.dom.setStyle(bodyElement, 'zoom', newZoom)\r\n              return newZoom\r\n            }\r\n\r\n            const increaseZoomAndCheckButtons = (increment) => checkDisabledZooms(increaseZoom(increment))\r\n\r\n            editor.on('init', function(e) {\r\n              // UNCOMMENT THIS TO SET THE EDITOR IN FULLSCREEN MODE!!\r\n              //  editor.execCommand('mceFullScreen')\r\n              const bodyElement = editor.dom.getRoot()\r\n              bodyElement.addEventListener('keydown', function (e) {\r\n                // Captura o Ctrl-+ e Ctrl-- (Zoom In e Zoom Out)\r\n                if (!e.ctrlKey)\r\n                  return\r\n                if (e.key === '+' || e.key === '-') {\r\n                  let increment = e.key === '+' ? 1 : -1\r\n                  increaseZoomAndCheckButtons(increment)    \r\n                  e.preventDefault()\r\n                  e.stopPropagation()\r\n                }  \r\n              })\r\n            })\r\n\r\n            editor.ui.registry.addButton('zoomin', {\r\n              icon: 'zoom-in',\r\n              tooltip: 'Aumentar zoom',\r\n              disabled: false,\r\n              onSetup: btn => btnZoomIn = btn,\r\n              onAction: btn => {\r\n                increaseZoomAndCheckButtons(1)\r\n              },\r\n            })\r\n\r\n            editor.ui.registry.addButton('zoomout', {\r\n              icon: 'zoom-out',\r\n              tooltip: 'Reduzir zoom',\r\n              disabled: false,\r\n              onSetup: btn => btnZoomOut = btn,\r\n              onAction: btn => {\r\n                increaseZoomAndCheckButtons(-1)\r\n              },\r\n            })\r\n\r\n          }    \r\n\r\n        }}\r\n\r\n        onEditorChange={this.handleEditorChange}\r\n        onBlur={this.handleBlur}\r\n      />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nEditorTexto.propTypes = {\r\n  texto: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired\r\n}\r\n\r\nexport default EditorTexto","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './FloatingField.css'\r\n\r\nfunction FloatingField (props) {\r\n\tlet button\r\n\tif (props.buttonIcon && props.buttonClick) {\r\n    button = <button onClick={ props.buttonClick }>{ props.buttonIcon }</button>\r\n\t}\t\r\n\tlet classList = ['formfield', props.className]\r\n\tif (props.disabled) {\r\n\t\tclassList.push('disabled')\r\n\t}\r\n\tif (props.error) {\r\n\t\tclassList.push('has-error')\r\n\t}\r\n\tif (props.placeholder) {\r\n\t\tclassList.push('not-empty')\r\n\t}\r\n\tconst style = {\r\n\t\tflex: 1,\r\n\t  width: props.width,\r\n\t  ...props.style\r\n\t}\r\n\tif (props.visible === false) \r\n\t\tstyle.display = 'none'\r\n\treturn (\r\n\t  <div className=\"formfield-container\" style={ style }>\r\n\t\t\t<div \r\n\t\t\t  className={ classList.join(' ') }\r\n\t\t\t  onClick={ props.disabled ? () => {} : props.onClick } \r\n\t\t\t  onBlur={ props.onBlur }\r\n\t\t\t>\r\n\t      { props.children }\r\n\t\t\t\t<label >{ props.label }</label>\r\n\t\t\t\t{ button }\r\n\t\t\t</div>\r\n\t\t\t<div className={ props.error ? 'error message' : 'message' }>{ props.error || props.message }</div>\r\n\t\t</div>\r\n  )\r\n}\r\n\r\nFloatingField.propTypes = {\r\n\tbuttonIcon: PropTypes.element,\r\n\tclassName: PropTypes.string,\r\n\terror: PropTypes.string,\r\n\tlabel: PropTypes.string,\r\n\tmessage: PropTypes.string,\r\n\tplaceholder: PropTypes.string,\r\n\twidth: PropTypes.oneOfType([\r\n\t  PropTypes.number,\r\n\t  PropTypes.string\r\n\t]),\r\n\tvisible: PropTypes.bool,\r\n\tbuttonClick: PropTypes.func,\r\n\tonBlur: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n}\r\n\r\nexport default FloatingField","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport FloatingField from './FloatingField.js'\r\n\r\nfunction FloatingInput (props) {\r\n\tconst style = {\r\n\t\twidth: '100%',  // Temos que fazer isso para evitar que o componente fique com tamanho fixo \r\n\t\t...props.style\r\n\t}\r\n\treturn (\r\n\t  <FloatingField {...props}>\r\n\t\t\t<input \r\n\t\t\t  type={ props.type || 'text' }\r\n\t\t\t  style={ style }\r\n\t\t\t  placeholder={ props.placeholder } \r\n\t\t\t  disabled={ props.disabled }\r\n\t\t\t  required pattern=\".*\\S+\" \r\n\t\t\t  value={ props.value }\r\n\t  \t  onChange={ props.onChange }\r\n\t  \t  onClick={ props.onClick }\r\n\t  \t  onFocus={ props.onFocus }\r\n\t  \t  onBlur={ props.onBlur }\t\t\t  \r\n\t\t  />\t  \r\n    </FloatingField>\r\n  )\r\n}\r\n\r\nFloatingInput.propTypes = {\r\n  placeholder: PropTypes.string,\r\n  style: PropTypes.object,\r\n\ttype: PropTypes.string,\r\n\tonBlur: PropTypes.func,\r\n\tonChange: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\tonFocus: PropTypes.func,\r\n}\r\n\r\nexport default FloatingInput","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport FloatingField from './FloatingField.js'\r\n\r\nfunction FloatingNativeSelect (props) {\r\n\r\n  const options = (props.items || props.options).map((option, index) => {\r\n  \tconst key = option.id || option.value || index\r\n  \tlet value = option.id || option.value\r\n  \treturn (\r\n  \t  <option key={key} value={value} checked={ value === props.value }>{ option.text || option.label }</option>\r\n  \t)   \r\n  })\r\n\r\n  return (\r\n\t  <FloatingField\r\n\t    {...props}\r\n\t  >  \r\n\t  \t<select type=\"select\" placeholder=\"  \" required \r\n\t  \t  disabled={props.disabled}\r\n\t  \t  value={props.value}\r\n\t  \t  onChange={props.onChange}\r\n\t  \t>\r\n\t  \t  { props.addBlankOption ? <option value=\"\"></option> : '' }\r\n\t  \t  { options}\r\n\t  \t  }\r\n\t\t\t</select>\r\n\t\t</FloatingField>\r\n\t)\r\n}\r\n\r\nFloatingNativeSelect.propTypes = {\r\n\taddBlankOption: PropTypes.bool,\r\n\titems: PropTypes.array,\r\n\tlabel: PropTypes.string,\r\n\toptions: PropTypes.array,\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string,\r\n\t]),\r\n\tonChange: PropTypes.func,\r\n}\r\n\r\nexport default FloatingNativeSelect","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { MenuItem, Intent, Icon } from '@blueprintjs/core'\r\nimport { MultiSelect, Suggest } from '@blueprintjs/select'\r\n\r\nimport FloatingField from './FloatingField.js'\r\n\r\nfunction removerAcentos (str) {\r\n  return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\")\r\n}\r\n\r\nclass FloatingSelect extends React.PureComponent {\r\n  constructor (props) {\r\n  \tsuper()\r\n  \tthis.state = {\r\n      separator: props.separator || '/',\r\n  \t\tvalue: props.value || (props.multiple ? [] : null),\r\n      query: '',\r\n  \t\tnotEmpty: false,\r\n      error: ''\r\n  \t}\r\n  \tthis.selectRef = React.createRef()\r\n    this.createNewItemRenderer = this.createNewItemRenderer.bind(this)        \r\n  \tthis.filterItems = this.filterItems.bind(this)\r\n    this.getItemsNotSelected = this.getItemsNotSelected.bind(this)\r\n  \tthis.getTagProps = this.getTagProps.bind(this)\r\n    this.handleBlur = this.handleBlur.bind(this)\r\n    this.handleClearOption = this.handleClearOption.bind(this)\r\n  \tthis.handleFieldClick = this.handleFieldClick.bind(this)\r\n  \tthis.handleSelect = this.handleSelect.bind(this)\r\n  \tthis.handleSelectSimple = this.handleSelectSimple.bind(this)\r\n  \tthis.handleTagRemove = this.handleTagRemove.bind(this)\r\n    this.handleTagInputKeyUp = this.handleTagInputKeyUp.bind(this)\r\n    this.renderItem = this.renderItem.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n  \tconst inputElement = this.selectRef.current.inputEl\r\n  \tif (!inputElement) return\r\n    inputElement.placeholder = this.props.placeholder || ''\r\n  }\r\n\r\n  componentDidUpdate (prevProps) {\r\n    if (this.props.value === prevProps.value) \r\n      return\r\n    this.setState({\r\n      value: this.props.value || (this.props.multiple ? [] : null),\r\n    })\r\n  }\r\n\r\n  getTagProps (value, index) {\r\n  \treturn {\r\n  \t\tinteractive: true,\r\n  \t\tintent: this.props.highlightFirstTag && index === 0 ? Intent.PRIMARY : Intent.NONE,\r\n  \t}\r\n  }\r\n\r\n  getItemsFromQuery (query, items) {\r\n    const queryTerms = query.toUpperCase().split(/[/\\-,;]/)\r\n    if (queryTerms.length < 1) return []\r\n    let matchingItems = []\r\n    for (let i = 0; i < queryTerms.length; i++) {\r\n      let thisTerm = queryTerms[i].trim()\r\n      if (!thisTerm) continue\r\n      let matchingItem = items.find(item => item.label === thisTerm)\r\n      if (matchingItem)\r\n        matchingItems.push(matchingItem)\r\n      else\r\n        throw Error('Item não encontrado: ' + thisTerm)\r\n    }\r\n    return matchingItems\r\n  }\r\n\r\n  addItemsFromQuery (query, isKeyup) {\r\n    let newItems\r\n    try {\r\n      newItems = this.getItemsFromQuery(query, this.props.items)\r\n      if (isKeyup && newItems.length === 1) return false\r\n    }\r\n    catch (err) {\r\n      return false\r\n    }\r\n    // Não podemos repetir itens!\r\n    newItems = newItems.filter(item => this.state.value.indexOf(item) < 0)\r\n    newItems.forEach(item => this.state.value.push(item))\r\n    this.setState({\r\n      value: this.state.value,\r\n      errors: {\r\n        distribuicao: ''\r\n      }\r\n    })\r\n    if (this.props.onChange) {\r\n      this.props.onChange(this.state.value)\r\n    }    \r\n    return true\r\n  }\r\n\r\n  createNewItemRenderer (query, active, handleClick) {\r\n    try {\r\n      let possibleItems = this.getItemsFromQuery(query, this.props.items)\r\n      if (possibleItems.length === 1) return null\r\n      let str = 'Adicionar ' + possibleItems.map(item => item.label).join(this.state.separator)\r\n      return <MenuItem text={ str } />\r\n    } catch {\r\n      return null\r\n    }  \r\n  }\r\n\r\n\r\n  handleFieldClick () {\r\n  \tif (!this.selectRef || !this.selectRef.current || !this.selectRef.current.input) return\r\n   \tthis.selectRef.current.input.focus()\r\n  }\r\n\r\n  handleBlur (e) {\r\n    let target = e.target\r\n    setTimeout(() => {\r\n      let query = target.value\r\n      if (!query) return\r\n      this.addItemsFromQuery(query, false)\r\n      this.setState({\r\n        query: ' '  \r\n      })\r\n    }, 100)\r\n\r\n  }\r\n\r\n  renderItem (item, { modifiers, handleClick }) {\r\n    if (!modifiers.matchesPredicate) {\r\n      return null;\r\n    }\r\n  \tlet key, label, text\t\r\n  \tif (typeof(item) == 'string') {\r\n  \t\tkey = item\r\n  \t\ttext = item\r\n  \t\tlabel = ''\t\r\n  \t}\r\n  \telse {\r\n  \t\tkey = item.id\r\n  \t\ttext = item.text\r\n  \t\tlabel = item.label\r\n  \t}    \r\n    return (\r\n      <MenuItem\r\n        active={modifiers.active}\r\n        key={ key }\r\n        label={ label }\r\n        text={ text }\r\n        onClick={ handleClick }\r\n        shouldDismissPopover={false}\r\n      />\r\n    )\r\n  }\r\n\r\n  renderTag (item) {\r\n    if (typeof(item) == 'string')\r\n      return <div>{ item }</div>\r\n    return <div title={item ? item.text : ''}>{ item ? item.label || item.text : ''}</div>\r\n  }    \r\n\r\n  renderInputValue (item) {\r\n  \tif (typeof (item) == 'string')\r\n  \t\treturn item\r\n  \treturn item.label || item.text || item.id\r\n  }\r\n\r\n  handleTagRemove (selectedItems, selectedIndex) {\r\n  \tlet itemToRemove = this.state.value[selectedIndex]\r\n  \tlet value = this.deselectItem(itemToRemove)\r\n    if (this.props.onChange) {\r\n      this.props.onChange(value)\r\n    }  \t\r\n  }\r\n\r\n\tisItemSelected (item) {\r\n  \treturn this.state.value.indexOf(item) >= 0\r\n  }\r\n\r\n  selectItem (item) {\r\n  \tconst value = [...this.state.value, item]\r\n  \tthis.setState({\r\n  \t\tvalue\r\n  \t})\r\n  \treturn value\r\n  }\r\n\r\n  deselectItem (item) {\r\n  \tconst value = this.state.value.filter(thisItem => thisItem !== item)\r\n  \tthis.setState({\r\n  \t\tvalue \r\n  \t})\r\n  \treturn value\r\n  }\r\n\r\n  /****\r\n\r\n  filterItems() recebe uma string contendo a query digitada pelo usuário,\r\n  e retorna um array de items que atendem à query. \r\n  O array retornado é ordenado pelo seguinte critério:\r\n  - se a query corresponde ao começo do label (sigla) de um item, ele \r\n    aparece no topo da lista; \r\n  - os itens que contenham a query no label (sigla) ou no text (descrição)\r\n    aparecem a seguir.\r\n  Os itens de cada grupo acima serão ordenados alfabeticamente pelo text.\r\n\r\n  ***/\r\n\r\n  filterItems (str) {\r\n  \tstr = removerAcentos(str).toUpperCase().trim()\r\n    if (!str)\r\n      return this.props.items\r\n    const itemsRank = this.props.items.map(item => {\r\n      let label, text = ''\r\n      if (typeof item == 'string')\r\n        label = item\r\n      else {\r\n        label = item.label || ''\r\n        text = item.text || '' \r\n      }      \r\n      let index = label.toUpperCase().indexOf(str)\r\n      if (index >= 0) {\r\n        if (index > 0) \r\n          index = 1\r\n        return {\r\n          item,\r\n          text,\r\n          index\r\n        }\r\n      }\r\n      index = removerAcentos(text).toUpperCase().indexOf(str)\r\n      if (index >= 0)\r\n        index = 1\r\n      else\r\n        index = -1\r\n      return {\r\n        item,\r\n        text,\r\n        index\r\n      }\r\n    })\r\n    let filteredItems = itemsRank.filter(rankedItem => rankedItem.index >= 0)\r\n    let selectedItems = this.props.multiple ? (this.state.value || []) : [this.state.value]\r\n    filteredItems = filteredItems.filter(rankedItem => {\r\n      return selectedItems.indexOf(rankedItem.item) < 0\r\n    })\r\n    const sortedItems = filteredItems.sort((a, b) => {\r\n      if (a.index != b.index)\r\n        return a.index - b.index\r\n      if (a.text < b.text)\r\n        return -1\r\n      return 1\r\n    })\r\n    return sortedItems.map(rankedItem => rankedItem.item)\r\n  }\r\n\r\n  filterItem (str, item) {\r\n  \tstr = str.toUpperCase()\r\n  \treturn (item.id + item.label + item.text).toUpperCase().indexOf(str) >= 0\r\n  }\r\n\r\n  getItemsNotSelected (items) {\r\n    return items.filter(item => this.state.value.indexOf(item) < 0)\r\n  }\r\n\r\n  handleQueryChange (e) {\r\n    this.setState({\r\n      query: e\r\n    })\r\n  }\r\n  \r\n  handleSelect (item) {\r\n  \tlet value\r\n    if (!this.isItemSelected(item)) {\r\n      value = this.selectItem(item)\r\n    } \r\n    else {\r\n      value = this.deselectItem(item)\r\n    }\r\n    if (this.props.onChange) {\r\n      this.props.onChange(value)\r\n    }\r\n  }\r\n\r\n  handleSelectSimple (item) {\r\n  \tthis.setState({\r\n  \t\tvalue: item\r\n  \t})\r\n    if (this.props.onChange) {\r\n      this.props.onChange(item)\r\n    }  \t\r\n  }\r\n\r\n  handleClearOption () {\r\n    this.handleSelectSimple(null)\r\n  }\r\n \r\n  handleTagInputKeyUp (e) {\r\n    if (this.state.error) {\r\n      this.setState({\r\n        error: ''\r\n      })\r\n    }    \r\n    let query = e.target.value\r\n    if (e.key === 'Enter') {\r\n      if (this.addItemsFromQuery(query, true)) {\r\n        this.setState({\r\n          query: ''  \r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render = () => {\r\n    /* \r\n    const hasItems = this.props.items && this.props.items.length\r\n    const noResults = hasItems ? this.props.noResults || <MenuItem disabled={true} text=\"No results.\" /> : null\r\n    */\r\n    const noResults = this.props.noResults || null\r\n\r\n    let isEmpty = true\r\n    if (this.props.multiple)\r\n      isEmpty = this.state.value.length === 0\r\n    else\r\n      isEmpty = !this.state.value\r\n    const component = this.props.multiple ? (\r\n\t\t\t<MultiSelect\r\n\t\t\t  className=\"embedded\"\r\n\t\t\t  placeholder={this.props.placeholder || ''}\r\n        disabled={this.props.disabled}\r\n\t\t\t  ref={this.selectRef}\r\n\t\t\t  fill={true}\r\n\t\t\t  createNewItemFromQuery={this.props.createNewItemFromQuery}\r\n        createNewItemRenderer={this.createNewItemRenderer}\r\n\t\t\t  initialContent={null}\r\n\t\t\t  items={this.getItemsNotSelected(this.props.items)}\t\r\n\t\t\t  itemListPredicate={this.props.filterItems || this.filterItems}\r\n\t\t\t  itemRenderer={this.renderItem}\r\n\t\t\t  openOnKeyDown={true}\r\n        query={this.state.query}\r\n\t\t\t  noResults={ noResults }\r\n\t\t\t  onItemSelect={this.handleSelect}\r\n\t\t\t  onItemsPaste={this.handleItemsPaste}\r\n\r\n        onQueryChange={this.handleQueryChange.bind(this)}\r\n\r\n\t\t\t  popoverProps={{ minimal: true }}\r\n\t\t\t  resetOnSelect={true}\r\n\t\t\t  tagRenderer={ this.props.renderTag || this.renderTag }\r\n\t\t\t  tagInputProps={{\r\n\t\t\t  \tonRemove: this.handleTagRemove,\r\n\t\t\t  \ttagProps: this.getTagProps,\r\n          inputProps: {\r\n            onKeyUp: this.handleTagInputKeyUp\r\n          },\r\n  \t\t  }}\r\n\t\t\t  selectedItems={this.state.value}\r\n\t\t\t></MultiSelect>  \r\n\t\t) : (\r\n      <>\r\n      <Suggest\r\n\t      className=\"embedded suggest\"\r\n\t      defaultSelectedItem={this.props.defaultSelectedItem}\r\n        placeholder={this.state.selectedItem ? this.props.placeholder : ''}\r\n        disabled={this.props.disabled}\r\n\t      ref={this.selectRef}\r\n\t      fill={true}\r\n\t      items={this.props.items}\t\t\t\r\n\t      itemListPredicate={this.filterItems}\r\n\t      itemRenderer={ this.renderItem }\r\n\t      openOnKeyDown={true}\r\n\t      noResults={ noResults }\r\n\t      onItemSelect={this.handleSelectSimple}\r\n\t      onItemsPaste={this.handleItemsPaste}\r\n\t      popoverProps={{ minimal: true }}\r\n\t      resetOnSelect={true}\r\n\t      inputValueRenderer={ this.props.renderInputValue || this.renderInputValue }\r\n        selectedItem={this.props.value}\r\n\t    ></Suggest>  \r\n      <Icon icon=\"cross\" style={{ opacity: this.state.value ? 0.75 : 0 }} onClick={this.handleClearOption} />\r\n      </>\r\n\t\t)\r\n \r\n \t\treturn (\r\n\t\t\t<FloatingField\r\n\t\t\t  className={ isEmpty && !this.props.placeholder ? 'empty' : 'not-empty' }\r\n\t\t\t  onClick={this.handleFieldClick}\r\n        onBlur={this.handleBlur}\r\n\t\t\t  { ...this.props }\r\n        error={ this.props.error || this.state.error }\r\n      >\t\r\n\t\t\t  { component }\t\r\n\t\t\t</FloatingField>\t  \t\r\n\t  )\r\n  }\r\n}\r\n\r\nFloatingSelect.propTypes = {\r\n  createNewItemFromQuery: PropTypes.func,\r\n  defaultSelectedItem: PropTypes.object,  \r\n  error: PropTypes.string,\r\n  highlightFirstTag: PropTypes.bool,  \r\n  items: PropTypes.array,\r\n  multiple: PropTypes.bool,\r\n  noResults: PropTypes.node,  \r\n  placeholder: PropTypes.string,\r\n  separator: PropTypes.string,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.array,\r\n    PropTypes.object\r\n  ]),\r\n  \r\n  filterItems: PropTypes.func,  \r\n  onChange: PropTypes.func,  \r\n  renderTag: PropTypes.func,\r\n  renderInputValue: PropTypes.func\r\n}\r\n\r\nexport default FloatingSelect","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport FloatingField from './FloatingField.js'\r\n\r\nfunction FloatingTextarea (props) {\r\n\r\n  return (\r\n\t  <FloatingField \r\n\t    {...props}\r\n\t    \r\n\t  >\r\n\t  \t<textarea \r\n        cols={ props.cols }\r\n\t  \t  rows={ props.rows } \r\n\t  \t  placeholder={ props.placeholder }\r\n\t  \t  disabled={ props.disabled }\r\n\t  \t  onChange={ props.onChange }\r\n\t  \t  onClick={ props.onClick }\r\n\t  \t  onFocus={ props.onFocus }\r\n\t  \t  onBlur={ props.onBlur }\r\n\t  \t  required pattern=\".*\\S+\"\r\n\t  \t  defaultValue={props.value}\r\n\t  \t></textarea>\t\r\n\t  </FloatingField>\r\n\t)\r\n}\t  \r\n\r\nFloatingTextarea.propTypes = {\r\n\tcols: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string\r\n\t]),\t\r\n\tplaceholder: PropTypes.string,\r\n\trows: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string\r\n\t]),\r\n\tvalue: PropTypes.string,\r\n\tonBlur: PropTypes.func,\r\n\tonChange: PropTypes.func,\r\n\tonFocus: PropTypes.func,\r\n}\r\n\r\nexport default FloatingTextarea","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction FlexDiv (props) {\r\n\tconst style = {\r\n\t\t...props.style,\r\n\t  display: 'flex',\r\n\t  flexDirection: ['column', 'vertical'].includes(props.direction) || props.vertical ? 'column' : 'row'\r\n\t}\r\n\r\n\treturn (\r\n    <div style={style}>\r\n      { props.children}\r\n    </div>  \r\n\t)\r\n}\r\n\r\nFlexDiv.propTypes = {\r\n\tdirection: PropTypes.string,\r\n\tstyle: PropTypes.object,\r\n\tvertical: PropTypes.bool\r\n}\r\n\r\nexport default FlexDiv\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction Spacer (props) {\r\n\tlet style = {\r\n\t  width: props.width,\r\n\t  height: props.height,\r\n\t  marginLeft: parseInt(props.width) < 0 ? props.width : undefined,\r\n\t  marginTop: parseInt(props.height) < 0 ? props.height : undefined\r\n\t}\r\n\treturn (\r\n\t  <div className=\"spacer\" style={style}></div>\r\n\t)\r\n}\r\n\r\nSpacer.propTypes = {\r\n\twidth: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string\r\n\t]),\r\n\theight: PropTypes.oneOfType([\r\n\t  PropTypes.number,\r\n\t  PropTypes.string\r\n\t])\r\n}\r\n\r\nexport default Spacer","import axios from \"axios\"\r\n\r\nlet unidades = [{\r\n  label: 'DEUC',\r\n  text: 'Divisão dos Estados Unidos'\r\n}, {\r\n\tlabel: 'DCAN',\r\n\ttext: 'Divisão do Canadá'\r\n}, {\r\n\tlabel: 'SGAP',\r\n\ttext: 'Secretaria Geral Política'\r\n}, {\r\n\tlabel: 'DECIN',\r\n\ttext: 'Departamento de Assuntos Interamericanos'\r\n}, {\r\n\tlabel: 'DMAC',\r\n\ttext: 'Divisão do México e América Central'\r\n}]\r\n\r\nconst indexadores = [{\r\n\tlabel: 'ABRE',\r\n\ttext: 'Associação Brasileira de Expatriados'\r\n}, {\t\r\n\tlabel: 'AINF',\r\n\ttext: 'Tecnologia da Informação'\r\n}, {\r\n\tlabel: 'APES',\r\n\ttext: 'Pessoal'\r\n}, {\r\n\tlabel: 'PEXT',\r\n\ttext: 'Política externa'\r\n}, {\r\n\tlabel: 'POIN',\r\n\ttext: 'Política interna'\r\n}, {\r\n\tlabel: 'BRAS',\r\n\ttext: 'Brasil'\r\n}, {\r\n\tlabel: 'EUA',\r\n\ttext: 'Estados Unidos da América'\r\n}, {\r\n\tlabel: 'CANA',\r\n\ttext: 'Canadá'\r\n}]\r\n\r\nconst postos = [{\r\n\tid: 'USABREM',\r\n\ttext: 'Brasemb Washington',\r\n}, {\r\n\tid: 'CANBREM',\r\n\ttext: 'Brasemb Ottawa',\r\n}, {\r\n\tid: 'FRABREM',\r\n\ttext: 'Brasemb Paris',\r\n}, {\r\n\tid: 'ARGBREM',\r\n\ttext: 'Brasemb Buenos Aires',\r\n}, {\r\n\tid: 'NYCBRCG',\r\n\ttext: 'Consbras Nova York',\r\n}, {\r\n\tid: 'MIACGBR',\r\n\ttext: 'Consbras Miami',\r\n}, {\r\n\tid: 'LISCGBR',\r\n\ttext: 'Consbras Lisboa',\r\n}, {\r\n\tid: 'PORBREM',\r\n\ttext: 'Brasemb Lisboa',\r\n}, {\r\n\tid: 'ONUBREM',\r\n\ttext: 'DELBRASONU'\r\n}, {\r\n\tid: 'REBRASFAO',\r\n\ttext: 'REBRASFAO'\r\n}, {\r\n\tid: 'PERBREM',\r\n\ttext: 'Brasemb Lima'\r\n}, {\r\n\tid: 'RUSBREM',\r\n\ttext: 'Brasemb Moscou'\r\n}, {\r\n\tid: 'CHIBREM',\r\n\ttext: 'Brasemb Pequim'\r\n}, {\r\n\tid: 'EGIBREM',\r\n\ttext: 'Brasemb Cairo'\r\n}, {\r\n\tid: 'URUBREM',\r\n\ttext: 'Brasemb Montevidéu'\r\n}, {\r\n\tid: 'SAFBREM',\r\n\ttext: 'Brasemb Pretória'\r\n}].sort((a, b) => a.text < b.text ? -1 : 1)\r\n\r\nconst grausSigilo = ['Ostensivo', 'Reservado', 'Secreto', 'Ultrassecreto'].map(grau => {\r\n\treturn {\r\n\t\tid: grau.charAt(0).toLowerCase(),\r\n\t\ttext: grau.trim()\r\n\t}\r\n})\r\n\r\nconst prioridades = [{\r\n\tid: 1,\r\n  text: 'Normal'\r\n}, {\r\n\tid: 2,\r\n\ttext: 'Urgente'\r\n}, {\r\n\tid: 3,\r\n\ttext: 'Urgentíssimo'\r\n}]\r\n\r\n/*\r\nconst propositos = [\r\n\t'Informo',\r\n\t'Informo e rogo providências',\r\n\t'Informo para registro',\r\n\t'Rogo providências',\r\n\t'Dou instruções',\r\n].map(proposito => {\r\n\treturn {\r\n\t\tid: proposito,\r\n\t\ttext: proposito\r\n\t}\r\n})\r\n*/\r\n\r\nconst propositos = {\r\n\ttel: [],\r\n\tdet: [],\r\n\tcit: []\r\n}\r\n\r\nconst prazos = [5, 10, 15, 20, 25].map(anos => {\r\n\treturn {\r\n\t\tid: anos.toString(),\r\n\t\ttext: anos + ' anos'\r\n\t}\r\n})\r\n\r\nconst basesLegais = [\r\n  'Lei 12.527/2011 Art. 23 Inciso I',\r\n  'Lei 12.527/2011 Art. 23 Inciso II',\r\n  'Lei 12.527/2011 Art. 23 Inciso III',\r\n  'Lei 12.527/2011 Art. 23 Inciso IV',\r\n  'Lei 12.527/2011 Art. 23 Inciso V',\r\n  'Lei 12.527/2011 Art. 23 Inciso VI',\r\n  'Lei 12.527/2011 Art. 23 Inciso VII',\r\n  'Lei 12.527/2011 Art. 23 Inciso VIII',\r\n  'Lei 12.527/2011 Art. 24 § 2º'\r\n].map((base, index) => {\r\n\treturn {\r\n\t\tid: index + 1,\r\n\t\ttext: base\r\n\t}\r\n})\r\n\r\nconst grupos = [{\r\n\tid: 'CSNU-GRUPO',\r\n\ttext: 'Países integrantes do CSNU',\r\n\tgrupo: true\r\n}, {\r\n\tid: 'CGEUA-GRUPO',\r\n\ttext: 'Consulados nos Estados Unidos',\r\n\tgrupo: true\r\n}, {\r\n\tid: 'AMER-GRUPO',\r\n\ttext: 'Embaixadas nos países das Américas',\r\n\tgrupo: true\r\n}, {\r\n\tid: 'AMSUL-GRUPO',\r\n\ttext: 'Embaixadas nos países da América do Sul',\r\n\tgrupo: true\r\n}, {\r\n\tid: 'EUROPA-GRUPO',\r\n\ttext: 'Embaixadas na Europa',\r\n\tgrupo: true\r\n}]\r\n\r\nconst usuarios = [{\r\n\tnome: 'Renato Andrade',\r\n\tunidade: 'SGAD',\r\n\tlogin: 'renato.andrade'\r\n}, {\r\n\tnome: 'Lucas Chalella',\r\n\tunidade: 'DINFOR',\r\n\tlogin: 'lucas.chalella'\r\n}, {\r\n\tnome: 'Fabio Cereda',\r\n\tunidade: 'DINFOR',\r\n\tlogin: 'fabio.cereda'\r\n}]\r\n\r\nconst usuarioAtual = {\r\n\tnome: 'Fabio Cereda',\r\n\tunidade: 'DINFOR',\r\n\tposto: 'USABREM',\r\n\tlogin: 'fabio.cereda'\r\n}\r\n\r\n\r\nconst modelos = {\r\n\tprivados: [\r\n    'Relato de reunião',\r\n    'Relato de discurso',\r\n    'Nova senha de usuário',\r\n    'DRF para pagamento',\r\n\t],\r\n\r\n\tpublicosUnidade: [\r\n\t  'Nova senha de usuário',\r\n\t  'Aviso de bloqueio de estação',\r\n\t  'Anúncio de novo sistema ou versão',\r\n\t  'Anúncio de novo serviço',\r\n\t  'Modelo com nome realmente longo para ver se quebra a linha na lista'\r\n\t],\r\n\r\n\tpublicos: [\r\n\t  'Solicitação de documento',\r\n\t  'Solicitação de passaporte',\r\n\t  'Planilha de RF',\r\n\t  'Envio de prestação de contas',\r\n\t  'Pedido de SRTP',\r\n\t  'Envio de recursos',\r\n\t  'Envio de DRF',\r\n\t  'Solicitação de e-consular',\r\n\t  'Abertura de ticked no SERPRO'\r\n\t]\r\n}\r\n\r\nconst originalData = {\r\n\tunidades,\r\n\tpostos, \r\n\tindexadores,\r\n\tbasesLegais, \r\n\tgrupos,\r\n\tpropositos,\r\n\tgrausSigilo,\r\n\tprazos\r\n}\r\n\r\nfunction carregarDataset (dataset, callback) {\r\n\taxios.get(`/data/${ dataset }.json`).then(response => {\r\n\t\tlet data = response.data\r\n\t\tcallback(data)\r\n\t})\r\n}\r\n\r\nfunction dataToUnidade (unidade) {\r\n\treturn {\r\n\t  label: unidade.codigoUnidade,\r\n\t\ttext: unidade.descricao.match(/\\((.+)\\)/)[1]\r\n  }\r\n}\r\n\r\nfunction dataToPosto (posto) {\r\n\treturn {\r\n\t\tid: posto.codigoUnidade,\r\n\t\ttext: posto.noPostoAbreviado\r\n\t}\r\n}\r\n\r\nfunction dataToProposito (proposito) {\r\n\treturn {\r\n\t\tid: proposito.idProposito,\r\n\t\ttext: proposito.descricao,\r\n\t}\r\n}\r\n\r\nfunction dataToIndexador (indexador) {\r\n\treturn {\r\n\t\tlabel: indexador.label, \r\n\t\ttext: indexador.text\r\n\t}\r\n}\r\n\r\nfunction limparArray (arr) {\r\n  for (let i = arr.length - 1; i >= 0; i--) {\r\n  \tarr.pop()\r\n  }\t\r\n}\r\n\r\nfunction importarDadosParaArray (data, arr, mapFunc = x => x, filterFunc = x => true) {\r\n\tlimparArray(arr)\r\n\tdata.filter(filterFunc).map(mapFunc).forEach(item => arr.push(item))\r\n}\r\n\r\ncarregarDataset('unidades', (data) => {\r\n\toriginalData.unidades = data.grupo_unidade\r\n  importarDadosParaArray(data.grupo_unidade, unidades, dataToUnidade)\r\n})\r\n\r\ncarregarDataset('postos', data => {\r\n  originalData.postos = data.grupo_unidade\t\r\n\timportarDadosParaArray(data.grupo_unidade, postos, dataToPosto)\r\n})\r\n\r\ncarregarDataset('indexadores', data => {\r\n\tlet items = data.classificacao.map(item => {\r\n\t\treturn {\r\n\t\t\t...item,\r\n\t\t\tlabel: item.sigla,\r\n\t\t\ttext: item.nameClassificacao.match(/\\-\\s(.+)$/)[1]\r\n\t\t}\r\n\t})\r\n\titems = items.sort((a, b) => {\r\n\t\tif (a.tipoClassificacao < b.tipoClassificacao) return -1\r\n\t\tif (a.tipoClassificacao > b.tipoClassificacao) return 1\r\n\t\treturn a.text < b.text ? -1 : 1\r\n\t})\t \r\n\toriginalData.indexadores = items\r\n\timportarDadosParaArray(items, indexadores)\r\n})\r\n\r\ncarregarDataset('baselegal', data => {\r\n  originalData.basesLegais = data.BaseLegal\r\n\tlimparArray(basesLegais)\r\n\tdata.BaseLegal.map(baselegal => {\r\n    return {\r\n    \tid: baselegal.cmpCoBaseLegal,\r\n    \ttext: baselegal.cmpDcBaseLegal\r\n    }\r\n\t}).forEach(baselegal => basesLegais.push(baselegal))\r\n})\r\n\r\ncarregarDataset('propositos', data => {\r\n  originalData.propositos = data.propositos\r\n\timportarDadosParaArray(data.propositos.filter(proposito => proposito.tel), propositos.tel, dataToProposito)\t\r\n\timportarDadosParaArray(data.propositos.filter(proposito => proposito.det), propositos.det, dataToProposito)\t\r\n\timportarDadosParaArray(data.propositos.filter(proposito => proposito.cit), propositos.cit, dataToProposito)\t\r\n})\r\n\r\n\r\nexport {\r\n\toriginalData,\r\n\tunidades,\r\n\tindexadores,\r\n\tpostos,\r\n\tgrausSigilo,\r\n\tgrupos,\r\n\tprioridades,\r\n\tpropositos,\r\n\tprazos,\r\n\tbasesLegais,\r\n\tusuarios,\r\n\tusuarioAtual,\r\n\tmodelos\r\n}","import dayjs from 'dayjs'\r\nimport { originalData, postos, basesLegais, grausSigilo, prioridades, usuarioAtual } from './globalData.js'\r\n\r\nconst Consts = {\r\n\tLARGURA_TEXTO: 60\r\n}\r\n\r\nconst Utils = {\r\n  getDateFormatted: (date, format) => {\r\n    return dayjs(date).format(format)\r\n  },\r\n\r\n  getCurrentDateFormatted: (format) => {\r\n  \treturn Utils.getDateFormatted(new Date(), format)\r\n  }\r\n}\r\n\r\nfunction lookupItem (arr, id, campoId='id') {\r\n\tconst item = arr.find(item => item[campoId] == id)\r\n\treturn item\r\n}\r\n\r\nfunction lookupItemText (arr, id, campoId='id', campoText='text') {\r\n\tconst item = lookupItem(arr, id, campoId)\r\n\tif (item) \r\n\t\treturn item[campoText] || item\r\n\treturn ''\r\n}\r\n\r\nfunction splitByWidth (text, width) {\r\n  \r\n  function isSeparator (char) {\r\n    return (char === ' ') || (char === '\\n')\r\n  }  \r\n  \r\n  let lines = []\r\n  let start = 0\r\n  do { \r\n    let thisLine = text.substr(start, width)\r\n    if (start + width >= text.length) {\r\n      lines.push(thisLine.trim())\r\n      break\r\n    }  \r\n    let i\r\n    for (i = thisLine.length - 1; i >= 0 && !isSeparator(thisLine.charAt(i)); i--);\r\n    if (i) {\r\n      thisLine = thisLine.substr(0, i)\r\n      start += i\r\n    }  \r\n    else {\r\n      start += width\r\n    }  \r\n    lines.push(thisLine.trim())\r\n  } while (start < text.length)\r\n  return lines\r\n}  \r\n\r\nfunction obterNomePosto (siglaPosto) {\r\n\treturn lookupItemText(postos, siglaPosto)\r\n}\r\n\r\nfunction obterCarater (idCarater) {\r\n\treturn lookupItemText(grausSigilo, idCarater).toUpperCase()\r\n}\r\n\r\nfunction obterPrioridade (idPrioridade) {\r\n  return lookupItemText(prioridades, idPrioridade).toUpperCase()\r\n}\r\n\r\nfunction tratarIndice (indice) {\r\n\treturn indice\r\n}\r\n\r\nfunction textRetransmissao (rtm) {\r\n\tif (!rtm.length) return ''\r\n\tconst nomesPostos = rtm.map(siglaPosto => obterNomePosto(siglaPosto))\r\n  let texto = ''\r\n  for (let i = 0; i < nomesPostos.length; i++) {\r\n    if (i) {\r\n    \tconst separador = i < nomesPostos.length - 1 ? ', ' : ' e '\r\n    \ttexto = texto + separador\r\n    }\r\n    texto = texto + nomesPostos[i]\r\n  }\r\n  return texto\r\n}\r\n\r\nfunction linesResumo (resumo) {\r\n\treturn resumo || ''\r\n}\r\n\r\nfunction prepararArquivoExpedicao (minuta) {\r\n\tconst campos = [{\r\n\t\tid: null,\r\n\t\tfunc: () => {\r\n\t\t\tlet abertura = ''\r\n\t\t\tswitch (minuta.tipo) {\r\n\t\t\t\tcase 'tel': \r\n\t\t\t\t  abertura = `De ${obterNomePosto(usuarioAtual.posto)} para Exteriores`\r\n\t\t\t\t  break\r\n        case 'det':\r\n          abertura = `Da SERE para ${obterNomePosto(usuarioAtual.posto)}`\r\n          break\r\n        case 'cit':\r\n          abertura = `Da SERE para Circular Telegráfica`\r\n      }    \r\n      abertura = abertura + ` em ${Utils.getCurrentDateFormatted('DD/MM/YYYY')}\\r\\n`\r\n      return abertura\r\n    }  \r\n\t}, {\r\n\t\tid: 'CODI',\r\n\t\tfunc: () => ''\r\n\t}, {\r\n\t\tid: 'CARAT',\r\n\t\tfunc: () => obterCarater(minuta.carater)\r\n\t}, {\r\n\t\tid: 'DEXP',\r\n\t\tfunc: () => {\r\n\t\t\tif (!minuta.prazoSigilo)\r\n\t\t\t\treturn null\r\n\t\t\tlet now = new Date()\r\n\t\t\tlet prazo = new Date(now.getFullYear() + Number(minuta.prazoSigilo), now.getMonth(), now.getDate())\r\n\t\t\treturn Utils.getDateFormatted(prazo, 'DD/MM/YYYY')\r\n\t\t}\r\n\t}, {\r\n\t\tid: 'BLEGIS',\r\n\t\tfunc: () => {\r\n\t\t\tif (!minuta.baseLegalSigilo)\r\n\t\t\t\treturn ''\r\n\t\t\tlet baselegal = lookupItemText(basesLegais, minuta.baseLegalSigilo)\r\n\t\t\tconsole.log(baselegal)\r\n\t\t\tbaselegal = baselegal.replace('Lei 12.527/2011 ', '')\r\n\t\t\treturn baselegal\r\n\t\t}\r\n\t}, {\r\n\t\tid: 'PRIOR',\r\n\t\tfunc: () => obterPrioridade(minuta.prioridade)\r\n\t}, {\r\n\t\tid: 'DISTR',\r\n\t\tfunc: () => minuta.distribuicao.join('/')\r\n\t}, {\r\n\t\tid: 'DESCR',\r\n\t\t// func: () => minuta.classif.replace(/\\s+/, \"\")\r\n\t\tfunc: () => minuta.indexadores.join('-')\r\n\t}, {\r\n\t\tid: 'RTM',\r\n\t\tfunc: () => {\r\n\t\t\tif (!minuta.rtm)\r\n\t\t\t\treturn ''\r\n\t\t\treturn minuta.rtm.join(',').toUpperCase()\r\n\t\t}\r\n\t}, {\r\n\t\tid: 'RTM/CLIC',\r\n\t\tfunc: () => {\r\n\t\t\treturn minuta.rtmClic\r\n\t\t}\r\n\t}, {\r\n\t\tid: 'REF/ADIT',\r\n\t\tfunc: () => {\r\n\t\t\t/**\r\n\t\t\t * New Regex MAN-3787\r\n\t\t\t * \r\n\t\t\t * Valida as iniciais ^(tel|desptel|det|circtel|cit)\r\n\t\t\t * Valida os numeros do documento \\s(\\d{1,6})\r\n\t\t\t * Valida o ano de referencia Opcional ([\\s|\\/][\\d]{4}?)*$\r\n\t\t\t * \r\n\t\t\t * ^(tel|desptel|det|circtel|cit)\\s(\\d{1,6})([\\s|\\/][\\d]{4}?)*$\r\n\t\t\t */\r\n\t\t\tlet ref = minuta.referencias,\r\n\t\t\t\tarrItem = [],\r\n\t\t\t\tdate = new Date(),\r\n\t\t\t\tthisYear = date.getFullYear(),\r\n\t\t\t\tMATCHES = /(TEL|DESPTEL|DET|CIRCTEL|CIT)\\s(\\d{1,6})([\\s|/][\\d]{4}?)*$/i\r\n\t\t\tif (!ref || !ref.length)\r\n\t\t\t\treturn null\r\n\t\t\tref = ref.map(val => {\r\n\t\t\t\tarrItem = val.match(MATCHES)\r\n\t\t\t\ttypeof arrItem[3] === 'undefined' ? arrItem[3] = ((arrItem[1] !== 'CIT') ? thisYear : '') : arrItem[3] = parseInt(arrItem[3].replace('/', ''))\r\n\t\t\t\treturn arrItem.splice(1).join(' ').trim()\r\n\t\t\t})\r\n\t\t\treturn ref.join(',')\r\n\t\t}\r\n\t}, {\r\n\r\n// NOVO CAMPO: Propósito\r\n\r\n    id: 'PROPSTO',\r\n    func: () => minuta.proposito || ''\r\n\t}, {\t\r\n\t\tid: 'CATEG',\r\n\t\tfunc: () => 'MG' \r\n\t}, {\r\n// NOVO CAMPO: Formato\r\n    id: 'FMT',\r\n    func: () => 'REML'\r\n  }, {\t\t\t\t\r\n\t\tid: null,\r\n\t\tfunc: () => `\\r\\n//\\r\\n${tratarIndice(minuta.indice)}\\r\\n//\\r\\n`\r\n\t}, {\r\n\t\tid: null,\r\n\t\tfunc: () => obterNomePosto(minuta.rtmClic)\r\n\t}, {\r\n\t\tid: null,\r\n\t\tfunc: () => minuta.rtm.length > 0 ? `Retransmissão automática para ${textRetransmissao(minuta.rtm)} \\r\\n` : ''\r\n\t}, {\r\n\t\tid: 'RESUMO',\r\n\t\tfunc: () => {\r\n\t\t\treturn `\\r\\n${linesResumo(minuta.resumo)}`\r\n\t\t}\r\n\t}, {\r\n\t\tid: null,\r\n\t\tfunc: () => {\r\n\t\t\tlet strTexto = minuta.texto.replace(/(“|”)/g, '\"')\r\n\t\t\tlet texto = splitByWidth(strTexto, Consts.LARGURA_TEXTO).join('\\r\\n')\r\n\t\t\tlet iniciais = (minuta.redator || '').toUpperCase()\r\n\t\t\treturn `\\r\\n\\r\\n${texto}\\r\\n\\r\\n${iniciais}`\r\n\t\t}\r\n\t}]\r\n\r\n\tlet linhas = campos.map(campo => {\r\n\t\tlet linha = campo.id ? `${campo.id}=` : ''\r\n\t\tlet conteudo = campo.func()\r\n\t\tif (conteudo) {\r\n\t\t\tlinha = linha + conteudo\r\n\t\t}\r\n\t\treturn linha\r\n\t})\r\n\r\n\treturn linhas.join('\\r\\n')\r\n}\r\n\r\nfunction prepararObjetoExpedicao (minuta) {\r\n\tlet destinatarios = minuta.tipo === 'det' ? minuta.rtm : minuta.destinatariosCit\r\n\tdestinatarios = destinatarios.map(dest => lookupItem(originalData.postos, dest, 'codigoUnidade'))\r\n\r\n  let objExpedicao = {\r\n    classificacao: minuta.indexadores.map(indexador => lookupItem(originalData.indexadores, indexador, 'sigla')),\r\n    coBaseLegal: minuta.baseLegalSigilo,\r\n    coPrioridade: minuta.prioridade,\r\n    destinatario: minuta.tipo === 'det' ? [ lookupItem(originalData.postos, minuta.destinatarioDet, 'codigoUnidade') ] : [],\r\n    distribuicao: minuta.distribuicao.map(siglaUnidade => lookupItem(originalData.unidades, siglaUnidade, 'codigoUnidade')),\r\n    dsBaseLegal: lookupItemText(basesLegais, minuta.baseLegalSigilo, 'id'),\r\n    dtOutras: '',\r\n    idCarater: minuta.carater,\r\n    noBaseLegal: minuta.baseLegalSigilo,\r\n    prazoSigilo: minuta.prazoSigilo,\r\n    sgCategoria: 'MG',\r\n\r\n    tpDocumento: minuta.tipo.toUpperCase(),\r\n    dsResumo: (minuta.resumo || '').replace(/\\n/g, '\\r\\n'),\r\n    dsIndice: (minuta.indice || '').replace(/\\n/g, '\\r\\n'),\r\n    dsSiglaNome: minuta.redator,\r\n    sgFormatoTexto: 'REML',\r\n    dsTexto: minuta.texto.replace(/\\n/g, '\\r\\n'),\r\n    noCarater: lookupItemText(originalData.grausSigilo, minuta.carater, 'id'),\r\n    noPrioridade: lookupItemText(prioridades, minuta.prioridade),\r\n    dsRetransmissao: minuta.tipo === 'det' ? destinatarios : '',\r\n    referencia: minuta.referencias.join(', '),\r\n    idCategoria: 1,\r\n    noLogin: minuta.dsNome,\r\n    dsDestinatario: destinatarios,\r\n    coPrazoBaseLegal: minuta.prazoSigilo,\r\n    coProposito: minuta.proposito,\r\n    noProposito: lookupItemText(originalData.propositos, minuta.proposito, 'idProposito', 'descricao'),\r\n  }\r\n  return objExpedicao\r\n}\r\n\r\n/* No ExpedSere, o objExpedição é montado da seguinte forma:\r\n\r\n\tlet objExpedicao = {\r\n    ...this.props.minuta,\r\n    tpDocumento: this.props.minuta.tpDocumento,\r\n    dsResumo: this.props.minuta.resumo.replace(/\\n/g, '\\r\\n'),\r\n    dsIndice: this.props.minuta.indice.replace(/\\n/g, '\\r\\n'),\r\n    dsSiglaNome: this.props.minuta.iniciais,\r\n    dsTexto: this.props.minuta.texto.replace(/\\n/g, '\\r\\n'),\r\n    noCarater: this.props.minuta.sigilo,\r\n    noPrioridade: this.props.minuta.prioridade,\r\n    dsRetransmissao: this.props.minuta.tpDocumento === 'DET' ? this.props.minuta.arrSiglasDestinatarios : '',\r\n    referencia: this.props.minuta.ref,\r\n    idCategoria: 1,\r\n    noLogin: this.props.minuta.dsNome,\r\n    dsDestinatario: this.props.minuta.tpDocumento === 'DET' ? this.props.minuta.arrSiglasDestinatarios : this.props.minuta.arrSiglasDestinatariosCirctel,\r\n    coPrazoBaseLegal: this.props.minuta.prazoSigilo,\r\n  };\r\n\tdelete objExpedicao.estePosto;\r\n\tdelete objExpedicao.resumo;\r\n\tdelete objExpedicao.dsNome;\r\n\tdelete objExpedicao.iniciais;\r\n\tdelete objExpedicao.indice;\r\n\tdelete objExpedicao.texto;\r\n\tdelete objExpedicao.sigilo;\r\n\tdelete objExpedicao.prioridade;\r\n\tdelete objExpedicao.rtm;\r\n\tdelete objExpedicao.ref;\r\n\tdelete objExpedicao.distrib;\r\n\tdelete objExpedicao.tipo;\r\n\tdelete objExpedicao.baseLegalSigilo;\r\n\tdelete objExpedicao.rtmClic;\r\n\tdelete objExpedicao.classif;\r\n\tdelete objExpedicao.distrib;\r\n\tdelete objExpedicao.tipo;\r\n\tdelete this.props.minuta.arrSiglasDestinatarios;\r\n\r\n  // Com base nesse código, suponho que os seguintes campos devem\r\n     constar de objExpedicao porque constam do objeto Minuta do ExpedSere:\r\n\r\n  classificacao,\r\n  coBaseLegal,\r\n  coPrioridade,\r\n  destinatario,\r\n  distribuicao,\r\n  dsBaseLegal,\r\n  dtOutras,\r\n  idCarater,\r\n  noBaseLegal,\r\n  prazoSigilo,\r\n  sgCategoria,   \r\n\r\n*/\r\n\r\nexport { \r\n\tprepararArquivoExpedicao,\r\n\tprepararObjetoExpedicao\r\n}","import { mergeArrays } from './lib/utils.js'\r\nimport {  prepararArquivoExpedicao, prepararObjetoExpedicao } from './lib/expedicaoMinuta.js'\r\n\r\n// As constantes abaixo foram chutadas; tem que verificar \r\n// o tamanho máximo determinado pelo BD\r\n\r\nconst MAX_INDICE_LENGTH = 120\r\nconst MAX_RESUMO_LENGTH = 500\r\nconst MAX_RAZOES_LENGTH = 500   \r\n\r\nconst labelsCampos = {\r\n  'destinatarioDet': 'Destinatário do desptel',\r\n  'destinatariosCit': 'Destinatários da circtel',\r\n  'rtm': 'Retransmissão',\r\n  'distribuicao': 'Distribuição',\r\n  'indexadores': 'Indexadores',\r\n  'indice': 'Índice',\r\n  'carater': 'Caráter',\r\n  'prioridade': 'Prioridade',\r\n  'referencias': 'Referências',\r\n  'proposito': 'Propósito',\r\n  'redator': 'Iniciais do redator',\r\n  'resumo': 'Resumo',\r\n  'prazoSigilo': 'Prazo de sigilo',\r\n  'baseLegalSigilo': 'Base legal',\r\n  'autoridade': 'Autoridade classificadora',\r\n  'cargo': 'Cargo',\r\n  'razoes': 'Razões para classificação',\r\n  'texto': 'Corpo do texto'\r\n}\r\n\r\nclass Minuta {\r\n\tconstructor (props={}) {\r\n    this.titulo = props.titulo || ''\r\n  \tthis.tipo = props.tipo || ''\r\n  \tthis.destinatarioDet = props.destinatarioDet\r\n  \tthis.destinatariosCit = props.destinatariosCit || []\r\n\t\tthis.rtm = props.rtm || []  \t\t\r\n    this.rtmClic = props.rtmClic || []\r\n    this.distribuicao = props.distribuicao || []  \r\n  \tthis.indexadores = props.indexadores || []\r\n  \tthis.indice = props.indice || ''\r\n  \tthis.carater = props.carater\r\n  \tthis.prioridade = props.prioridade\r\n  \tthis.referencias = props.referencias || []\r\n  \tthis.proposito = props.proposito || ''\r\n    this.redator = props.redator || ''\r\n  \tthis.resumo = props.resumo || ''\r\n\t\tthis.prazoSigilo = props.prazoSigilo || ''\r\n\t\tthis.baseLegalSigilo = props.baseLegalSigilo || ''\r\n\t\tthis.autoridade = props.autoridade || ''\r\n\t\tthis.cargo = props.cargo || ''\r\n    this.razoes = props.razoes || ''\r\n    this.texto = props.texto || ''\r\n    this._changed = false\r\n    Object.seal(this)\r\n\t}\r\n\r\n  setProp (key, value) {\r\n    if (isArray(value)) {\r\n      value = value.map(objToStr)\r\n    }\r\n    else if (isObject(value)) {\r\n      value = objToStr(value)\r\n    }\r\n    if (value === null) {\r\n      // O sistema não deveria usar setProp com argumento value nulo\r\n      console.error('setProp recebeu argumento value null com key ' + key)\r\n      // return this\r\n    }\r\n    this[key] = value\r\n    this._changed = true\r\n    return this\r\n  }\r\n\r\n  setProps (obj, value) {\r\n    if (typeof(obj) === 'string' && value !== undefined)\r\n      this.setProp(obj, value)\r\n    else {\r\n      for (let prop in obj) {\r\n        this.setProp(prop, obj[prop])\r\n      }\r\n    }  \r\n    return this\r\n  }\r\n\r\n  foiAlterada () {\r\n    return this._changed\r\n  }\r\n\r\n  marcarComoNaoAlterada () {\r\n    this._changed = false\r\n  }\r\n\r\n  validate (propName) {\r\n    const maxDistribuicoesPorSigilo = {\r\n      o: 7,  // ostensivo\r\n      r: 5,  // reservado\r\n      s: 3,  // secreto\r\n      u: 3   // ultrassecreto\r\n    }\r\n    const maxRtmPorSigilo = {\r\n      o: 5,  // ostensivo\r\n      r: 3,  // reservado\r\n      s: 0,  // secreto\r\n      u: 0,  // ultrassecreto\r\n    }\r\n    const MAX_INDEXADORES = 5,\r\n          MAX_RTM = 3,\r\n          MAX_REF = 3,\r\n          MAX_DESTINATARIOS = 3\r\n\r\n    const validations = {\r\n      distribuicao: (value) => {\r\n        const maxDistribuicoes = maxDistribuicoesPorSigilo[this.carater || 'o']\r\n        if (value.length > maxDistribuicoes)\r\n          return `Indique no máximo ${ maxDistribuicoes } unidades`\r\n        return ''\r\n      },  \r\n      indexadores: (value) => value.length > MAX_INDEXADORES ? `Indique até ${ MAX_INDEXADORES } indexadores` : '',\r\n      destinatariosCit: (value) => {\r\n        if (value.length > MAX_DESTINATARIOS)\r\n          return `Indique no máximo ${ MAX_DESTINATARIOS } postos`\r\n        return ''\r\n      },  \r\n      rtm: (value) => {\r\n        const maxRtm = maxRtmPorSigilo[this.carater || 'o']\r\n        if (!maxRtm && value.length)        \r\n          return 'Não é possível retransmitir expedientes secretos ou ultrassecretos'\r\n        if (this.tipo === 'det' && this.destinatarioDet && value.indexOf(this.destinatarioDet) >= 0)\r\n          return 'O destinatário do desptel não pode ser incluído na retransmissão'\r\n        if (value.length > MAX_RTM)\r\n          return `Indique no máximo ${ MAX_RTM } postos` \r\n        return ''\r\n      },  \r\n      rtmClic: (value) => {\r\n        if (!value || !value.length) return ''\r\n        const numRtm = value.length\r\n        if (numRtm && ['s', 'u'].includes(this.carater))\r\n          return 'Não é possível retransmitir expedientes secretos ou ultrassecretos'\r\n        if (numRtm > 1)\r\n          return 'É permitida a retransmissão para apenas um grupo'\r\n        return ''\r\n      },\r\n      referencias: (value) => value.length > MAX_REF ? `Indique no máximo ${ MAX_REF } referências` : '',\r\n      indice: (value) => validaTamanhoCampoTexto(value, MAX_INDICE_LENGTH, 'índice'),\r\n      resumo: (value) => validaTamanhoCampoTexto(value, MAX_RESUMO_LENGTH, 'resumo'),\r\n      razoes: (value) => validaTamanhoCampoTexto(value, MAX_RAZOES_LENGTH, 'razoes')\r\n    }\r\n  \r\n    const errors = {}\r\n    if (propName) {\r\n      const validationFunction = validations[propName]\r\n      if (validationFunction)\r\n        return validationFunction(this[propName])\r\n      return ''\r\n    }\r\n    // Se o argumento propName não foi especificado, valida todos os campos da minuta\r\n    for (let prop in validations) {\r\n      const validationFunction = validations[prop]\r\n      if (!validationFunction)\r\n        break\r\n      const error = validationFunction(this[prop])\r\n      if (error)\r\n        errors[prop] = error\r\n    }\r\n    return errors\r\n  }\r\n\r\n  validarParaExpedir () {\r\n    const erros = []\r\n    let camposObrigatorios = []\r\n    switch (this.tipo.charAt(0).toLowerCase()) {\r\n      case 'd':\r\n        camposObrigatorios = ['destinatarioDet']\r\n        break;\r\n      case 'c':\r\n        if (this.destinatariosCit.length < 2) {\r\n          erros.push(`Destinatários da circtel: indique no mínimo dois destinatários`)\r\n        }\r\n        break\r\n      default:  \r\n    }\r\n    camposObrigatorios = [\r\n      ...camposObrigatorios,\r\n      'distribuicao', \r\n      'indexadores', \r\n      'indice', \r\n      'carater', \r\n      'prioridade', \r\n      'redator',\r\n      'texto'      \r\n    ]\r\n    if (this.carater && this.carater.charAt(0).toLowerCase() !== 'o') {\r\n      camposObrigatorios = [...camposObrigatorios, 'prazoSigilo', 'baseLegalSigilo', 'razoes']\r\n    }\r\n\r\n    camposObrigatorios.forEach(campo => {\r\n      let valor = this[campo]\r\n      if (!valor || !valor.length) {\r\n        erros.push(`${ labelsCampos[campo] }: campo obrigatório`)\r\n      }\r\n    })\r\n\r\n    for (let campo in this) {\r\n      const erro = this.validate(campo)\r\n      if (erro) {\r\n        erros.push(`${ labelsCampos[campo] }: ${ erro }`)\r\n      }\r\n    }\r\n\r\n    return erros\r\n  }\r\n\r\n  mergeWith (outraMinuta) {\r\n    this.tipo = this.tipo || outraMinuta.tipo\r\n    this.destinatarioDet = this.destinatarioDet || outraMinuta.destinatarioDet\r\n    this.destinatariosCit = mergeArrays(this.destinatariosCit, outraMinuta.destinatariosCit)\r\n    this.rtm = mergeArrays(this.rtm, outraMinuta.rtm)\r\n    this.rtmClic = this.rtmClic || outraMinuta.rtmClic\r\n    this.distribuicao = mergeArrays(this.distribuicao, outraMinuta.distribuicao)\r\n    this.indexadores = mergeArrays(this.indexadores, outraMinuta.indexadores)\r\n    this.indice = mergeStrings(this.indice, outraMinuta.indice)\r\n    this.carater = this.carater || outraMinuta.carater\r\n    this.prioridade = this.prioridade || outraMinuta.prioridade\r\n    this.referencias = mergeArrays(this.referencias, outraMinuta.referencias)\r\n    this.proposito = this.proposito || outraMinuta.proposito\r\n    this.resumo = mergeStrings(this.resumo, outraMinuta.resumo)\r\n    this.redator = outraMinuta.redator || this.redator\r\n    this.prazoSigilo = this.prazoSigilo || outraMinuta.prazoSigilo\r\n    this.baseLegalSigilo = this.baseLegalSigilo || outraMinuta.baseLegalSigilo\r\n    this.autoridade = this.autoridade || outraMinuta.autoridade\r\n    this.cargo = this.cargo || outraMinuta.cargo\r\n    this.razoes = mergeStrings(this.razoes, outraMinuta.razoes)\r\n    this.texto = mergeStrings(this.texto, outraMinuta.texto)\r\n    this._changed = true\r\n    return this\r\n  }\r\n   \r\n}\r\n\r\nfunction isObject (variable) {\r\n  return variable === Object(variable)\r\n}\r\n\r\nfunction isArray (variable) {\r\n  return Array.isArray(variable)\r\n}\r\n\r\nfunction objToStr (obj) {\r\n  if (typeof(obj) === 'string')\r\n    return obj\r\n  return obj.id || obj.label\r\n}\r\n\r\nfunction validaTamanhoCampoTexto (value, maxLength, nomeCampo='campo') {\r\n  if (!value) \r\n    return\r\n  if (value.length > maxLength)\r\n    return `O ${ nomeCampo } deve ter até ${ maxLength } caracteres`\r\n}\r\n\r\nfunction mergeStrings (str1, str2) {\r\n  if (!str1) \r\n    return str2\r\n  if (!str2) \r\n    return str1\r\n  return [str1, str2].join(' ')\r\n}\r\n\r\nMinuta.mergeMinutas = function (essaMinuta, outraMinuta) {\r\n  const novaMinuta = new Minuta()\r\n  novaMinuta.setProps({\r\n    tipo: essaMinuta.tipo || outraMinuta.tipo,\r\n    destinatarioDet: essaMinuta.destinatarioDet || outraMinuta.destinatarioDet,\r\n    destinatariosCit: mergeArrays(essaMinuta.destinatariosCit, outraMinuta.destinatariosCit),\r\n    rtm: mergeArrays(essaMinuta.rtm, outraMinuta.rtm),\r\n    rtmClic: essaMinuta.rtmClic || outraMinuta.rtmClic,\r\n    distribuicao: mergeArrays(essaMinuta.distribuicao, outraMinuta.distribuicao),\r\n    indexadores: mergeArrays(essaMinuta.indexadores, outraMinuta.indexadores),\r\n    indice: mergeStrings(essaMinuta.indice, outraMinuta.indice),\r\n    carater: essaMinuta.carater || outraMinuta.carater,\r\n    prioridade: essaMinuta.prioridade || outraMinuta.prioridade,\r\n    referencias: mergeArrays(essaMinuta.referencias, outraMinuta.referencias),\r\n    proposito: essaMinuta.proposito || outraMinuta.proposito,\r\n    redator: essaMinuta.redator || outraMinuta.redator,\r\n    resumo: mergeStrings(essaMinuta.resumo, outraMinuta.resumo),\r\n    prazoSigilo: essaMinuta.prazoSigilo || outraMinuta.prazoSigilo,\r\n    baseLegalSigilo: essaMinuta.baseLegalSigilo || outraMinuta.baseLegalSigilo,\r\n    autoridade: essaMinuta.autoridade || outraMinuta.autoridade,\r\n    cargo: essaMinuta.cargo || outraMinuta.cargo,\r\n    razoes: mergeStrings(essaMinuta.razoes, outraMinuta.razoes),\r\n    texto: mergeStrings(essaMinuta.texto, outraMinuta.texto),\r\n  })\r\n  return novaMinuta\r\n}\r\n   \r\nMinuta.prepararArquivoExpedicao = prepararArquivoExpedicao\r\nMinuta.prepararObjetoExpedicao = prepararObjetoExpedicao\r\n\r\nexport default Minuta\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './TabsMascara.css'\r\n\r\nimport { Alignment, Button, ButtonGroup, MenuItem } from \"@blueprintjs/core\";\r\nimport { FloatingInput, FloatingSelect, FloatingNativeSelect, FloatingTextarea } from './floating'\r\nimport FlexDiv from './ui/FlexDiv.js'\r\nimport Spacer from './ui/Spacer.js'\r\nimport Minuta from './Minuta.js'\r\nimport { \r\n\tunidades, \r\n\tindexadores, \r\n\tpostos,\r\n\tgrausSigilo, \r\n  grupos,\r\n\tprazos, \r\n\tbasesLegais, \r\n\tprioridades, \r\n\tpropositos } from './lib/globalData.js'\r\n\r\n\r\nfunction stringArrayToItemArray (strArr, items) {\r\n  if (!items) {\r\n  \treturn strArr.map(id => {\r\n  \t\treturn { \r\n  \t\t  id,\r\n  \t\t  label: id,\r\n  \t\t  text: id\r\n  \t\t}\r\n  \t})\r\n  }\t\r\n  return strArr.map(id => items.find(item => (item.id || item.label) === id)).filter(item => Boolean(item))\r\n}\r\n\r\nfunction converterMinuta (minuta) {\r\n\tif (!minuta) \r\n\t\tthrow Error ('Constructor de converterMinuta deve receber um objeto Minuta como parâmetro')\r\n  const minutaConvertida = {\r\n\t\ttipo: minuta.tipo,  \t\t\r\n\t\tdestinatarioDet: postos.find(posto => posto.id === minuta.destinatarioDet),\r\n\t\tdestinatariosCit: stringArrayToItemArray(minuta.destinatariosCit, postos),\r\n\t\trtm: stringArrayToItemArray(minuta.rtm, postos),\r\n\t\tdistribuicao: stringArrayToItemArray(minuta.distribuicao, unidades),   \r\n\t\tindexadores: stringArrayToItemArray(minuta.indexadores, indexadores),\r\n\t\tindice: minuta.indice,\r\n\t\tcarater: minuta.carater,\r\n\t\tprioridade: minuta.prioridade,\r\n\t\treferencias: stringArrayToItemArray(minuta.referencias),\r\n\t\tproposito: minuta.proposito,\r\n\t\tredator: minuta.redator,\r\n\t\tresumo: minuta.resumo,\r\n\t\tprazoSigilo: minuta.prazoSigilo,\r\n\t\tbaseLegalSigilo: minuta.baseLegalSigilo,\r\n\t\tautoridade: minuta.autoridade,\r\n\t\tcargo: minuta.cargo,\r\n    razoes: minuta.razoes\t\r\n  } \r\n  return minutaConvertida   \r\n}\r\n\r\n\r\nclass Cabecalho extends React.Component {\r\n\r\n  constructor (props) {\r\n  \tsuper()\r\n\r\n  \tconst minutaConvertida = converterMinuta(props.minuta)\r\n  \tthis.state = {\r\n  \t\terrors: {},\r\n  \t\tminuta: props.minuta,\r\n  \t\t...minutaConvertida,\r\n  \t}\r\n\r\n  \tthis.createNewReferenciaFromQuery = this.createNewReferenciaFromQuery.bind(this)\r\n  \tthis.minutaEClassificada = this.minutaEClassificada.bind(this)\r\n  \tthis.handleClickTipo = this.handleClickTipo.bind(this)\r\n  \tthis.handleButtonClick = this.handleButtonClick.bind(this)\r\n\t\tthis.handleIndiceChange = this.handleIndiceChange.bind(this)\r\n  \tthis.handleResumoChange = this.handleResumoChange.bind(this)\r\n  \tthis.handleRazoesChange = this.handleRazoesChange.bind(this)\r\n  \tthis.handleChange = this.handleChange.bind(this)\r\n  \tthis.handleBlurRedator = this.handleBlurRedator.bind(this)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  \tif (prevProps.minuta === this.props.minuta) return\r\n  \tconst minutaConvertida = converterMinuta(this.props.minuta)\t\r\n  \tthis.setState({\r\n  \t\tminuta: this.props.minuta,\r\n  \t\t...minutaConvertida,\r\n  \t})\r\n  } \r\n\r\n  createNewReferenciaFromQuery (query) {\r\n  \tquery = query.toUpperCase()\r\n\t\tconst regex = /^(TEL|DET|DESPTEL|CIT|CIRCTEL)\\s+((\\d+)(\\/(\\d+))*)$/\r\n\t\tconst matches = query.match(regex)\r\n\t\tif (!matches)\r\n\t\t\treturn null\r\n\t\tlet anoCorrente = (new Date()).getFullYear()\t\t\r\n\t\tlet ano = matches[5]\r\n\t\tif (ano > 99 && ano < 1900)\r\n\t\t\treturn null\r\n\t\tif (ano === undefined)\t\r\n\t\t\tano = anoCorrente\r\n\t\telse {\r\n\t\t  ano = parseInt(ano)\t\t\t\r\n\t\t  if (ano < 100) {\r\n\t\t  \tif (ano <= anoCorrente - 2000)\r\n\t\t  \t\tano += 2000\r\n\t\t  \telse\r\n\t\t  \t\tano += 1900\r\n\t\t  }\t\r\n\t\t}\t\r\n\t\tlet tipo = matches[1]\r\n\t\tif (tipo === 'DESPTEL') tipo = 'DET'\r\n\t\tif (tipo === 'CIRCTEL') tipo = 'CIT'\r\n\t\tlet numero = matches[3]\r\n  \tlet referencia = `${ tipo } ${ numero }`\r\n\t\tif (tipo !== 'CIT')\r\n\t\t\treferencia = referencia + '/' + ano\r\n  \treturn {\r\n  \t\tid: referencia,\r\n  \t\tlabel: referencia\r\n  \t}\r\n  }\r\n\r\n  renderItemPosto (item) {\r\n  \treturn (\r\n      <MenuItem\r\n        key=\"\"\r\n        label={ item.label }\r\n        text={item.label}\r\n        shouldDismissPopover={false}\r\n      />\r\n    )\r\n  }\r\n\r\n  minutaEClassificada () {\r\n    const carater = this.state.carater\r\n  \treturn carater && carater !== 'o'\r\n  }\r\n\r\n  handleChange (varName) {\r\n  \treturn (e) => {\r\n  \t\tlet value = e\r\n  \t\tif (e && e.target && e.target.value !== undefined) {\r\n  \t\t\tvalue = e.target.value\r\n  \t\t}\r\n  \t\tlet stateChange = {}\r\n  \t\tstateChange[varName] = value\r\n  \t\tthis.setState(stateChange)\r\n  \t\tthis.props.minuta.setProp(varName, value)\r\n  \t\t// Temos que usar setTimeout para o this.setState fazer efeito\r\n  \t\tsetTimeout(() => this.validateValue(varName, value), 10)\r\n  \t}\r\n  }\r\n\r\n  handleClickTipo (tipo) {\r\n  \treturn (e) => {\r\n  \t  this.setState({\r\n  \t\t  tipo\r\n  \t  })\r\n  \t  this.props.minuta.setProp('tipo', tipo)\r\n  \t  if (!this.state.proposito) \r\n  \t  \treturn\r\n  \t  // Só entra aqui se o usuário tiver selecionado um propósito\r\n  \t  // Vamos checar se o propósito continua válido a despeito\r\n  \t  // da mudança de tipo do documento\r\n  \t  //debugger\r\n  \t  const propositosDesteTipoDoc = propositos[tipo]\r\n  \t  let propositoSelecionado = propositosDesteTipoDoc.find(proposito => proposito.id === this.state.proposito)\r\n  \t  if (!propositoSelecionado || !propositoSelecionado[tipo]) {\r\n  \t  \tthis.setState({\r\n  \t  \t\tproposito: null\r\n  \t  \t})\r\n  \t  \tthis.props.minuta.setProp('proposito', '')\r\n  \t  }\r\n  \t}  \r\n  }\r\n\r\n  validateValue (propName) {\r\n \t  const errors = this.props.minuta.validate()\r\n \t  this.setState({\r\n \t  \terrors\r\n \t  })  \t\r\n  }\r\n\r\n\thandleButtonClick (e) {\r\n\t\tlet errorMsg = this.state.errorMsg ? '' : 'Deu problema'\r\n\t  this.setState({\r\n\t  \terrorMsg\r\n\t  })\t\r\n\t}\r\n\r\n  checkTextLength(e, { maxLength, varName, varLabel }) {\r\n  \tlet value = e.target.value\r\n  \tlet error = ''\r\n  \tif (value && value.length > maxLength) \r\n  \t\terror = `O ${ varLabel || varName } deve ter até ${ maxLength } caracteres`\r\n  \tif (error !== this.state.errors[varName]) {\r\n  \t\tconst errors = {\r\n  \t\t\t...this.state.errors\r\n  \t\t}\r\n  \t\terrors[varName] = error\r\n  \t\tthis.setState({\r\n  \t\t\terrors\r\n  \t\t})\r\n  \t}\r\n  }\r\n  \r\n  handleIndiceChange (e) {\r\n  \tthis.handleTextFieldChange(e, 'indice')\r\n  }\r\n\r\n  handleResumoChange (e) {\r\n  \tthis.handleTextFieldChange(e, 'resumo')\r\n  }\r\n\r\n  handleRazoesChange (e) {\r\n  \tthis.handleTextFieldChange(e, 'razoes')\r\n  }\r\n\r\n  handleTextFieldChange (e, propName) {\r\n    const error = this.state.errors[propName]\r\n  \t// this.props.minuta[propName] = e.target.value\r\n  \tthis.props.minuta.setProp(propName, e.target.value)\r\n  \tconst newError = this.props.minuta.validate(propName)\r\n    if (error !== newError) {\r\n    \tconst errors = {\r\n    \t\t...this.state.errors\r\n    \t}\r\n    \terrors[propName] = newError\r\n    \tthis.setState({\r\n    \t\terrors\r\n    \t})\r\n    }\r\n  }\r\n\r\n  handleBlurRedator (e) {\r\n  \tif (!this.state.redator) return\r\n    const redator = this.state.redator.toUpperCase()\r\n    this.state.minuta.setProp('redator', redator)\r\n  \tthis.setState({\r\n  \t\tredator,\r\n  \t\tminuta: this.state.minuta \r\n  \t})\r\n  }\r\n\r\n  render () {\r\n\t\treturn (\r\n\t\t\t<div className=\"cabecalho-container custom-scroll\">\r\n\t\t\t\t<div className=\"property-bar\" className={ (this.props.selectedTab === 'cabecalho' ? 'show' : 'hide') }>\r\n\r\n\t        <ButtonGroup fill={true}>\r\n\t          <Button active={this.state.tipo === 'tel'} text=\"Telegrama\" icon=\"document\" outlined={false} alignText={ Alignment.CENTER } onClick={this.handleClickTipo('tel')} />\t        \r\n\t          <Button active={this.state.tipo === 'det'} text=\"Desptel\" icon=\"share\" outlined={false} alignText={ Alignment.CENTER } onClick={this.handleClickTipo('det')} />\r\n\t          <Button active={this.state.tipo === 'cit'} text=\"Circtel\" icon=\"feed\" outlined={false} alignText={ Alignment.CENTER } onClick={this.handleClickTipo('cit')} />\t            \r\n\t        </ButtonGroup>\r\n\r\n\t        <Spacer height={8} />\r\n\r\n\t   \t\t  <FloatingSelect \r\n\t   \t\t    visible={ this.state.tipo === 'det'}\r\n\t\t\t\t    label=\"Destinatário do desptel\"\r\n\t\t    \t\titemRenderer={this.renderItemPosto}\r\n\t\t    \t\titems={postos}\t\r\n\t\t    \t\tmultiple={false}\r\n\t\t    \t\tvalue={ this.state.destinatarioDet }\r\n\t\t    \t\tonChange={ this.handleChange('destinatarioDet') }\r\n\t\t  \t\t></FloatingSelect>  \r\n\r\n\t\t\t\t  <FloatingSelect \r\n\t\t\t\t    visible={ this.state.tipo === 'cit' }\r\n\t\t\t\t    label=\"Destinatários da circtel\"\r\n\t\t\t\t    items={[...postos, ...grupos]}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t    \t\terror={this.state.errors.destinatariosCit}\t\t\t\t    \t\t\t\t    \r\n\t\t\t\t    value={this.state.destinatariosCit}\r\n\t\t\t\t    onChange={ this.handleChange('destinatariosCit') }\r\n\t\t\t\t  ></FloatingSelect>   \t\t  \t\t\r\n\r\n\t\t\t\t  <FloatingSelect \r\n\t\t\t\t    label=\"Distribuição\"\r\n\t\t\t\t    items={unidades}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t\t\t    highlightFirstTag={true}\r\n\t\t\t\t    value={this.state.distribuicao}\r\n\t\t\t\t    error={this.state.errors.distribuicao}\r\n\t\t\t\t    resetOnSelect={true}\r\n\t\t\t\t    onChange={ this.handleChange('distribuicao') }\r\n\t\t\t\t  ></FloatingSelect>  \t\t  \t\t\r\n\r\n\t\t  \t\t<FloatingSelect \r\n\t\t\t\t    visible={ this.state.tipo === 'det' || this.state.tipo === 'tel' }\r\n\t\t\t\t    label=\"Retransmissão\"\r\n\t\t\t\t    items={postos}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t    \t\terror={this.state.errors.rtm}\t\t\t\t    \r\n\t\t\t\t    value={this.state.rtm}\r\n\t\t\t\t    onChange={ this.handleChange('rtm') }\r\n\t\t\t\t  ></FloatingSelect>   \r\n\r\n\t\t  \t\t<FloatingSelect \r\n\t\t\t\t    visible={ this.state.tipo === 'det' || this.state.tipo === 'tel' }\r\n\t\t\t\t    label=\"Retransmissão para grupo\"\r\n\t\t\t\t    items={grupos}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t    \t\terror={this.state.errors.rtmClic}\r\n\t\t\t\t    value={this.state.rtmClic}\r\n\t\t\t\t    onChange={ this.handleChange('rtmClic') }\r\n\t\t\t\t  ></FloatingSelect>   \t\t\t\t  \r\n\r\n\t\t\t\t  <FloatingSelect \r\n\t\t\t\t    label=\"Indexadores\"\r\n\t\t\t\t    items={indexadores}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t\t\t    separator=\"-\"\r\n\t\t\t\t    value={this.state.indexadores}\r\n\t\t\t\t    error={this.state.errors.indexadores}\r\n\t\t\t\t    onChange={ this.handleChange('indexadores') }\r\n\t\t\t\t  ></FloatingSelect>  \t\t\t\t      \r\n\r\n\t\t\t    <FlexDiv>\r\n\r\n\t\t        <FloatingNativeSelect\r\n\t\t          label=\"Caráter\"\r\n\t\t          addBlankOption={true}\r\n\t\t          items={grausSigilo}\r\n\t\t          value={this.state.carater}\r\n\t\t          onChange={ this.handleChange('carater') }\r\n\t\t        ></FloatingNativeSelect>  \r\n\r\n\t\t\t\t\t\t<Spacer width={8} />\r\n\r\n\t\t        <FloatingNativeSelect\r\n\t\t          label=\"Prioridade\"\r\n\t\t          addBlankOption={true}\r\n\t\t          items={prioridades}\r\n\t\t          value={this.state.prioridade}\r\n\t\t          onChange={ this.handleChange('prioridade') }\r\n\t\t        ></FloatingNativeSelect>   \r\n\r\n\t        </FlexDiv>\r\n\r\n\t\t\t\t  <FloatingSelect \r\n\t\t\t\t    label=\"Referências\"\r\n\t\t\t\t    items={[]}\t\r\n\t\t\t\t    multiple={true}\r\n\t\t\t\t    value={this.state.referencias}\t\t\t\t    \r\n\t\t\t\t    createNewItemFromQuery={ this.createNewReferenciaFromQuery }\r\n\t\t\t\t    error={this.state.errors.referencias}\r\n\t\t\t\t    onChange={ this.handleChange('referencias') }\r\n\t\t\t\t  ></FloatingSelect>  \t \r\n\r\n\t\t\t\t  <FloatingTextarea \r\n\t\t\t\t    label=\"Índice\"\r\n\t\t\t\t    rows=\"3\" \r\n\t\t\t\t    onChange={ this.handleIndiceChange }\r\n\t\t\t\t    onBlur={ this.handleChange('indice') }\r\n\t\t\t\t    error={this.state.errors.indice}\r\n\t\t\t\t    value={this.state.indice}></FloatingTextarea>\r\n\r\n\t        <FlexDiv>\r\n\r\n\t\t        <FloatingNativeSelect\r\n\t\t          label=\"Propósito\"\r\n\t\t          addBlankOption={true}\r\n\t\t          style={{ flex: 3 }}\r\n\t\t          items={propositos[this.state.tipo] || []}\r\n\t\t          value={this.state.proposito}\r\n\t\t          onChange={ this.handleChange('proposito') }\r\n\t\t        ></FloatingNativeSelect>  \r\n\r\n\t          <Spacer width={8} />\r\n\r\n\t\t        <FloatingInput\r\n\t\t\t\t      label=\"Iniciais redator\"\r\n\t\t\t\t      style={{ flex: 2 }}\r\n\t\t\t\t      value={this.state.redator}\r\n\t\t\t\t      onChange={this.handleChange('redator')}\r\n\t\t\t\t      onBlur={ this.handleBlurRedator }\r\n\t\t\t\t    />\r\n\r\n\t\t\t    </FlexDiv>\t\t\t\t    \r\n\r\n\t  \t\t</div>  \r\n\r\n\t  \t\t<div className=\"property-bar\" className={ this.props.selectedTab === 'resumo' ? 'show' : 'hide' }>\r\n\t  \t\t\t<FloatingTextarea \r\n\t\t\t\t    label=\"Resumo\"\r\n\t\t\t\t    rows=\"10\" \r\n\t\t\t\t    placeholder=\"Digite aqui o resumo...\"\r\n\t\t\t\t    onChange={ this.handleResumoChange } \r\n\t\t\t\t    onBlur={ this.handleChange('resumo') }\r\n\t\t\t\t    error={this.state.errors.resumo}\r\n\t\t\t\t    value={this.state.resumo}></FloatingTextarea>\r\n\t\t\t\t</div>    \r\n\r\n\t\t\t\t<div className=\"property-bar\" className={ this.props.selectedTab === 'tci' ? 'show' : 'hide' }>\r\n\r\n\t\t\t    <FlexDiv direction=\"row\">\r\n\r\n\t\t        <FloatingNativeSelect\r\n\t\t          label=\"Caráter\"\r\n\t\t          addBlankOption={true}\r\n\t\t          items={grausSigilo}\r\n\t\t          value={this.state.carater}\r\n\t\t          onChange={this.handleChange('carater')}\r\n\t\t        ></FloatingNativeSelect>  \r\n\r\n\t\t\t\t\t\t<Spacer width={8} />\r\n\r\n\t\t\t\t    <FloatingNativeSelect\r\n\t\t\t\t      label=\"Prazo\"\r\n\t\t\t\t      disabled={!this.minutaEClassificada()}\r\n\t\t          addBlankOption={true}\t\t\t\t      \t\t\t\t      \r\n\t\t\t\t      items={prazos}\r\n\t\t\t\t      value={this.state.prazoSigilo}\r\n\t\t\t\t      onChange={this.handleChange('prazoSigilo')}\r\n\t\t\t\t    ></FloatingNativeSelect>  \r\n\r\n\t        </FlexDiv>\r\n\r\n\t\t\t    <FloatingNativeSelect\r\n\t\t\t      label=\"Base legal\"\r\n\t\t\t\t    disabled={!this.minutaEClassificada()}\r\n\t          addBlankOption={true}\t\t\t      \r\n\t\t\t      items={basesLegais}\r\n\t\t\t      value={this.state.baseLegalSigilo}\r\n\t\t\t      onChange={this.handleChange('baseLegalSigilo')}\r\n\t\t\t    ></FloatingNativeSelect>  \r\n\r\n\t  \t\t\t<FloatingTextarea \r\n\t\t\t\t    label=\"Razões para classificação\"\r\n\t\t\t\t    disabled={!this.minutaEClassificada()}\t    \r\n\t\t\t\t    rows=\"5\" \r\n\t\t\t\t    onChange={ this.handleRazoesChange } \r\n\t\t\t\t    onBlur={ this.handleChange('razoes') }\r\n\t\t\t\t    error={this.state.errors.razoes}\r\n\t\t\t\t    value={this.state.razoes}></FloatingTextarea>\r\n\r\n\t\t\t    <FloatingInput\r\n\t\t\t      label=\"Autoridade classificadora\"\r\n\t\t\t\t    disabled={!this.minutaEClassificada()}      \r\n\t\t\t      value={this.minutaEClassificada() ? this.state.autoridade : ''}\r\n\t\t\t      onChange={this.handleChange('autoridade')}\r\n\t\t\t    />\r\n\r\n\t\t\t    <FloatingInput\r\n\t\t\t      label=\"Cargo da autoridade classificadora\"\r\n\t\t\t\t    disabled={!this.minutaEClassificada()}\r\n\t\t\t      value={this.minutaEClassificada() ? this.state.cargo : ''}\r\n\t\t\t      onChange={this.handleChange('cargo')}\r\n\t\t\t    />\r\n\r\n\t\t\t\t</div>    \t\t\r\n\r\n\t\t\t\t<div className=\"property-bar\" className={ this.props.selectedTab === 'anexos' ? 'show' : 'hide' }>\r\n\t\t\t\tNada aqui por enquanto\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t  )\r\n  }\r\n}\r\n\r\nCabecalho.propTypes = {\r\n\tminuta: PropTypes.instanceOf(Minuta),\r\n\tselectedTab: PropTypes.string,\r\n}\r\n\r\nexport default Cabecalho","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Tab, Tabs } from '@blueprintjs/core'\r\nimport TabsMascara from './TabsMascara.js'\r\nimport './Mascara.css'\r\n\r\nimport Minuta from './Minuta.js'\r\n\r\nclass MetadataPanel extends React.PureComponent {\r\n  constructor (props) {\r\n    super()\r\n    this.state = {\r\n      selectedTab: 'cabecalho'\r\n    }\r\n    this.handleTabChange = this.handleTabChange.bind(this)\r\n  }  \r\n\r\n  handleTabChange (newTab) {\r\n    this.setState({\r\n      selectedTab: newTab\r\n    })  \r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"mascara-panel\">\r\n               \r\n        <Tabs\r\n          className=\"mascara-tab\"\r\n          animate={true}\r\n          horizontal={true}\r\n          fill={true}\r\n          onChange={this.handleTabChange}\r\n        >\r\n          <Tab id=\"cabecalho\" title=\"Cabeçalho\"/>\r\n          <Tab id=\"resumo\" title=\"Resumo\"/>\r\n          <Tab id=\"tci\" title=\"TCI\"/>\r\n          <Tab id=\"anexos\" title=\"Anexos\"/>\r\n        </Tabs>\r\n        \r\n        <TabsMascara selectedTab={this.state.selectedTab} minuta={this.props.minuta} />\r\n\r\n      </div>\r\n    )\r\n  }  \r\n}\r\n\r\nMetadataPanel.propTypes = {\r\n  minuta: PropTypes.instanceOf(Minuta).isRequired\r\n}\r\n\r\nexport default MetadataPanel\r\n","import React from 'react'\t\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './Slider.css'\r\nimport './CustomScroll.css'\r\n\r\nfunction Slider (props) {\r\n\tconst position = props.position || 'left'\r\n\tconst classes = ['slider']\r\n\tclasses.push(props.show ? 'slide-in' : 'slide-out')\r\n\tclasses.push(position)\r\n\treturn (\r\n\t\t<div className={classes.join(' ')}>\r\n\t\t{ props.children }\r\n    </div>\t\t\t\r\n\t)\t\r\n}\r\n\r\nSlider.propTypes = {\r\n\tposition: PropTypes.string,\r\n\tshow: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default Slider","import React from 'react'\r\n\r\nimport './SliderContainer.css'\r\n\r\nfunction SliderContainer (props) {\r\n\treturn (\r\n\t\t<div className=\"slider-container\">\r\n\t\t{ props.children }\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SliderContainer","import React from \"react\"\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Icon, Menu, MenuDivider, MenuItem } from \"@blueprintjs/core\";\r\nimport './SidebarMenu.css'\r\n\r\nclass SidebarMenu extends React.PureComponent {\r\n  render() {\r\n    const chevronRight = <Icon icon=\"chevron-right\" />\r\n    const menu = (\r\n      <Menu>\r\n        <MenuItem icon=\"folder-open\" text=\"Carregar modelo\" onClick={this.props.onClick('modelos')}/>\r\n        <MenuItem icon=\"add-to-folder\" text=\"Salvar como modelo...\" onClick={this.props.onClick('salvarModelo')} />\r\n        <MenuItem icon=\"duplicate\" text=\"Salvar uma cópia...\" onClick={this.props.onClick('salvarCopia')} />\r\n        <MenuDivider />\r\n        <MenuItem icon=\"print\" text=\"Imprimir\" />\r\n        <MenuDivider />\r\n        <MenuItem icon=\"pin\" text=\"Salvar esta versão...\" onClick={this.props.onClick('salvarVersao')} />\r\n        <MenuItem icon=\"comparison\" text=\"Ver versões\" onClick={this.props.onClick('versoes')} />\r\n        <MenuItem icon=\"history\" text=\"Histórico\" labelElement={chevronRight} onClick={this.props.onClick('historico')} />\r\n        <MenuDivider />                \r\n        <MenuItem icon=\"small-tick\" text=\"Rubricas\" labelElement={chevronRight} onClick={this.props.onClick('rubricas')} />\r\n        <MenuItem icon=\"document-share\" text=\"Despachar\" labelElement={chevronRight} onClick={this.props.onClick('despachos')}/>\r\n        <MenuItem icon=\"send-message\" text=\"Expedir\" labelElement={chevronRight} onClick={this.props.onClick('expedir')} />\r\n      </Menu>\r\n    )\r\n    return menu\r\n  }\r\n}\r\n\r\nSidebarMenu.propTypes = {\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default SidebarMenu","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Button, Icon } from '@blueprintjs/core'\r\n\r\nimport '../ui/CustomScroll.css'\r\nimport './SubmenuPanel.css'\r\n\r\nfunction SubmenuPanel (props) {\r\n\treturn (\r\n    <div className=\"submenu-panel\">\r\n  \t\t<div className=\"submenu-panel-title\">\r\n  \t\t  <Button minimal={true} onClick={props.onClick}>\r\n  \t\t\t<Icon icon=\"chevron-left\" />\r\n  \t\t\t</Button>\r\n  \t\t\t{ props.title }\r\n  \t\t</div>\r\n  \t\t<div className=\"submenu-panel-content custom-scroll\">\r\n  \t\t\t{props.children}\r\n  \t\t</div>\r\n    </div>\r\n\t)\r\n}\r\n\r\nSubmenuPanel.propTypes = {\r\n  onClick: PropTypes.func.isRequired\r\n}\r\n\r\nexport default SubmenuPanel","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Spinner } from '@blueprintjs/core'\r\n\r\nfunction DivWithSpinner (props) {\r\n\treturn (\r\n\t\t<div style={{\r\n\t\t\tposition: 'relative',\r\n\t\t\t...props.style,\r\n\t\t}}>\r\n\t\t  <div style={{ \r\n\t\t  \tposition: 'absolute',\r\n\t\t  \ttop: 0,\r\n\t\t  \tleft: 0,\r\n\t\t  \tright: 0,\r\n\t\t  \twidth: '100%', \r\n\t\t  \tmarginTop: props.spinnerTop || 32, \r\n\t\t  \ttextAlign: 'center', \r\n\t\t  \tdisplay: props.spinner ? 'block' : 'none' \r\n\t\t  }}>\r\n\t      <Spinner size={Spinner.SIZE_STANDARD} />\r\n\t    </div> \r\n\t    <div style={{\r\n\t    \topacity: props.spinner ? 0.5 : 1.0\r\n\t    }}>\r\n\t      { props.children }\r\n\t    </div>\r\n\t  </div>  \r\n  )  \r\n}\r\n\r\nDivWithSpinner.propTypes = {\r\n\tspinner: PropTypes.bool.isRequired,\r\n\tspinnerTop: PropTypes.oneOfType([\r\n\t  PropTypes.number,\r\n\t  PropTypes.string\r\n\t]),\r\n\tstyle: PropTypes.object\r\n}\r\n\r\nexport default DivWithSpinner","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './FormField.css'\r\n\r\nfunction FormField (props) {\r\n\treturn (\r\n    <div>\r\n      <div className=\"form-field-label\">\r\n        { props.label } \r\n      </div>\r\n      { props.children }  \r\n      <div className=\"form-field-message\">\r\n        { props.message }\r\n      </div>\r\n    </div>    \r\n\t)\r\n}\r\n\r\nFormField.propTypes = {\r\n  label: PropTypes.string,\r\n  message: PropTypes.string\r\n}\r\n\r\nexport default FormField","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { MenuItem } from '@blueprintjs/core'\r\nimport { Suggest } from '@blueprintjs/select'\r\nimport FormField from './FormField.js'\r\n\r\nclass SelectUsuario extends React.Component {\r\n\r\n  constructor (props) {\r\n    super()\r\n   \tthis.state = {\r\n   \t\tusuario: props.selected\r\n   \t}\r\n   \tthis.filterItems = this.filterItems.bind(this)\r\n   \tthis.renderItem = this.renderItem.bind(this)\r\n   \tthis.handleItemSelect = this.handleItemSelect.bind(this)  \t\r\n  }\r\n\r\n  renderSelectedItem (item) {\r\n  \tif (!item) return ''\r\n    const { nome, unidade, login } = item\t\t\r\n  \tconst txt = `${ nome } (${ unidade }) - ${ login }`\r\n  \treturn txt\r\n  }  \r\n\r\n  renderItem (item, { modifiers, handleClick }) {\r\n    if (!modifiers.matchesPredicate) {\r\n      return null;\r\n    }\r\n  \tconst { nome, unidade, login } = item\r\n    return (\r\n      <MenuItem\r\n        active={modifiers.active}\r\n        key={ login }\r\n        label={ login }\r\n        text={ `${ nome } (${ unidade })` }\r\n        onClick={ handleClick }\r\n        shouldDismissPopover={false}\r\n      />\r\n    )\r\n  }\r\n  \r\n  filterItems (searchStr) {\r\n    searchStr = searchStr.toLowerCase()\r\n  \treturn this.props.usuarios.filter(item => {\r\n  \t\treturn item.nome.toLowerCase().indexOf(searchStr) >= 0 ||\r\n  \t\t       item.login.toLowerCase().indexOf(searchStr) >= 0 ||\r\n  \t\t       item.unidade.toLowerCase().indexOf(searchStr) >= 0\r\n  \t})\r\n  }\r\n  \r\n  handleItemSelect (item) { \r\n  \tthis.setState({\r\n  \t\tusuario: item \r\n  \t})\r\n  \tif (this.props.onChange)\r\n  \t\tthis.props.onChange(item)\r\n  }\t\r\n\r\n  render () {\r\n    return (\r\n\t\t\t<FormField\r\n\t      message={this.props.message}\r\n\t      label={this.props.label || 'Usuário:'}\r\n\t    >\r\n\t\t    <Suggest\r\n\t\t      fill={true}\r\n\t\t      inputValueRenderer={ (item) => item }\r\n\t\t      items={this.props.usuarios}\t\t\t\r\n\t        itemListPredicate={this.filterItems}\t\t\r\n\t\t      itemRenderer={ this.renderItem }\r\n\t\t      onItemSelect={ this.handleItemSelect }\r\n\t\t      openOnKeyDown={true}\r\n\t\t      popoverProps={{ \r\n\t\t      \tminimal: true,\r\n\t\t      \tposition: 'bottom-right' \r\n\t\t      }}\r\n\t\t      resetOnSelect={true}\r\n\t\t      selectedItem={ this.renderSelectedItem(this.props.onChange ? this.props.usuario : this.state.usuario) }\r\n\t\t    ></Suggest>  \r\n\t\t   </FormField>    \t\r\n    )\r\n  }\r\n}\r\n\r\nSelectUsuario.propTypes = {\r\n  label: PropTypes.string,\r\n  message: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  selected: PropTypes.oneOfType([\r\n    PropTypes.object,\r\n    PropTypes.string\r\n  ]),  \r\n  usuarios: PropTypes.oneOfType([\r\n    PropTypes.array,\r\n    PropTypes.func\r\n  ]).isRequired,\r\n}\r\n\r\nexport default SelectUsuario\r\n\r\n\r\n\r\n\r\n\r\n","import { usuarios, modelos } from './globalData.js'\r\n\r\nconst minutaCarregada = {\r\n  tipo: 'det',\r\n  destinatarioDet: 'USABREM',\r\n  rtm: ['CANBREM'],\r\n  carater: 'r',\r\n  distribuicao: ['DINFOR', 'DEUA', 'DAM II'],\r\n  indexadores: ['AINF', 'PEXT', 'BRAS'],\r\n  referencias: ['TEL 1987/2020'],        \r\n  indice: 'Tecnologia da Informações. Comunicações. Reflexões sobre o SATCOM',\r\n  redator: 'FACC',\r\n  autoridade: 'Julio Bitelli',\r\n\ttexto: `<p>Hoje, com efeito, a tendência de alguns Chefes de Missão é, na medida em que existem a seu dispor meios rápidos e confiáveis de comunicações, a de transmitir ao órgão central a maior quantidade possível de informações, quando mais não seja para demonstrar a eficiência de seu trabalho. Nesse afã de informar, entretanto, frequentemente lhes falta o tempo para tarefas mais relevantes, quais sejam, a avaliação da informação, sua inserção no quadro da realidade do país em que servem, a análise de suas possíveis ou prováveis repercussões sobre a política externa e interna desse país sobre seu relacionamento com o Brasil: em suma, o processamento primário dos dados coletados. Como resultado, o que é enviado à Secretaria de Estado são, muitas vezes, \"pílulas\" de informações descosidas que transferem, para o destinatário, a tarefa de montar o quadro geral da situação, tarefa essa qie seria de muito mais fácil realização, em uma primeira instância, pelo próprio agente diplomático <em>in loco</em>.</p>\r\n<p>O uso cada vez mais frequente da via telegráfica tem contribuído para acelerar essa tendência, uma vez que se considera, em muitos casos, que o mais importante é a rapidez com que a Missão infoma sobre um acontecimento ou transmite uma informação. Na verdade, entretanto, a informação diplomática tem sua utilidade avalidada em função de três aspectos principais: a qualidade de sua fonte, a fidedignidade da própria informação e a sua análise no contexto global da realidade em que se insere. A rapidez com que ela é recebida na Secretaria de Estado assume, assim, na maioria das vezes, importância menor. Isso não quer dizer, evidentemente, que o diplomata não deva preocupar-se em informar seu governo, com a possível brevidade, da ocorrênci, no país em que serve, de fatos de maior relevância. Significa, na verdade, que sua função básica, enquanto observador e informante, não é a de fazer concorrência à imprensa e sim a de fornecer, ao órgão central, dados que transcendam à mera descrição dos acontecimentos.</p>\r\n<p>Em consequência, seria muito mais útil e proveitoso, para a correta formulação e execução da política externa, se o posto, ao invés de enviar informações tópicas, as reunisse e as transmitisse de forma selecionada e condensada e acompanhadas de umam reflexão analítica sobre suas reais implicações. Uma vez recebidas na Secretaria de Estado, tais informações, utilizando-se agora o termo em sua correta concepção, seriam novamente analisadas, dessa vez em conjunto com informações originárias de terceiros postos e de outras fontes.</p>\r\n<p>Aliás, a bem da verdade, já foram feitas algumas tentativas no sentido de que as missões passassem a informar dessa maneira. Quando da mudança da Secretaria de Estado para Brasília, por exemplo, o grupo de trabalho encarregado da organização da transferência previu que, durante um certo tempo, as atividades de comunicações telegráficas e postais perderiam muito de sua agilidade, em decorrência de problemas ligados a pessoal e também à instalação, nos novos locais, das facilidades mínimas necessárias à boa execução de seus serviços. Em vista disso, e com o objetivo de evitar que tais inconvenientes redundassem em maiores prejuízos para as atividades básicas do Ministério, foram transmitidas instruções aos postos para que substituíssem, na medida do possível, o envio de informações soltas por relatórios abrangentes e aprofundados sobre os diversos aspectos dos países em que se localizavam. Tais instruções salientavam o fato de que, durante esse período de transição, as comunicações telegráficas deveriam ser reduzidas ao mínimo necessário.</p>\r\n<p>Essa diretriz, embora motivada estritamente por razões operacionais, apresentou notáveis resultados do ponto de vista substantivo. Com efeito, impedidos de fazerem telegramas tópicos, os diplomatas lotados no exterior puderam dedicar-se à elaboração de informações globais e de grande substância e que, ainda hoje, decorridos quase 15 anos, em muitos casos conservam sua importância e seu interesse.</p>\r\n<p>Infelizmente, essa atitude não durou muito, e tão logo os postos foram sentindo que os trabalhos na Secretaria de Estado estavam voltando à normalidade, retomaram eles, paulatinamente, seus procedimentos anteriores em matéria de transmissões de informações tópicas por via telegráfica.</p>\r\n<p>(...) </p>\r\n<p>Tudo isso é resultado, pelo menos em parte, de certa deformação profissional que leva alguns Chefes de Missão a considerarem o grau de importância de seu posto diretamente proporcional ao número de telegramas por ele expedido. Dentro dessa ótica, quaisquer iniciativas que visem, direta ou indiretamente, a redução desse número terão poucas chances de serem bem aceitas.</p>\r\n<p>TAVARES, Alfredo Carlos de Oliveira. <em>O subsistema de comunicações telegráficas do Itamaraty.</em> Tese apresentada no IX CAE. Brasília, agosto de 1984, pp. 123-127.</p>\r\n<p></p>\r\n<p></p>\r\n<p></p>\r\n<p></p>\r\n<p></p>\r\n<p></p>`\r\n}\r\n\r\nconst logins = usuarios.map(usuario => usuario.login)\r\nconst despachos = [{\r\n  origem: logins[0],\r\n  destino: logins[1],\r\n  data: '20/09/2020 20:02',\r\n  texto: 'Segue a minuta do expediente solicitado'\r\n}, {\r\n  origem: logins[1],\r\n  destino: logins[2],\r\n  data: '21/09/2020 10:00',\r\n  texto: 'Segue a minuta revisada do expediente solicitado, que está muito bom'\r\n}, {\r\n  origem: logins[2],\r\n  destino: logins[0],\r\n  data: '22/09/2020 20:00',\r\n  texto: 'Encaminho a minuta para expedir, mas sugiro antes consultar o Bob'\r\n}, {\r\n  origem: logins[0],\r\n  destino: logins[2],\r\n  data: '23/09/2020 16:07',\r\n  texto: 'O Bob me passou algumas recomendações, todas muito boas como sempre'\r\n}]\r\n\r\nconst rubricas = [{\r\n  unidade: 'DEUC',\r\n  status: 'a',\r\n  texto: 'Excelente solução para o problema da rebimboca da parafuseta.',\r\n  autor: 'ibere.barbosa',\r\n  data: '21/10/2020 10:34'\r\n}, {\r\n  unidade: 'DTIC',\r\n  status: 'r',\r\n  texto: 'O TCU não vai concordar em gastar dinheiro para para comprar desrebimbocador de parafuseta',\r\n  autor: 'mauricio.assis',\r\n  data: '22/10/2020 20:34'\r\n}, {\r\n  unidade: 'SGAD',\r\n  status: 'rs',\r\n  texto: 'OK mas sugiro consultar o Bob, que sempre tem boas ideias',\r\n  autor: 'renato.andrade',\r\n  data: '23/09/2020 09:29'\r\n}, {\r\n  unidade: 'COF',\r\n  status: 's',\r\n  data: '20/10/2020 12:45'\r\n}]\r\n\r\nconst versoes = [\r\n  '2020-12-30 10:45',\r\n  '2020-12-29 20:30',\r\n  '2020-12-29 15:30',\r\n  '2020-12-25 10:00'\r\n].sort().map((data, index) => {\r\n  return {\r\n    title: `Versão ${index+1}`,\r\n    data: data.split(' ')[0],\r\n  }\r\n}).reverse()\r\n\r\n\r\nfunction mockSave (func) {\r\n  return new Promise(function (resolve, reject) {\r\n    let data = func()\r\n    setTimeout(() => {\r\n      if (data) {\r\n        resolve(data)\r\n      }\r\n      else {\r\n        reject(new Error('Ocorreu um erro'))\r\n      }\r\n    }, 1500)\r\n  })\r\n}\r\n\r\nfunction carregarMinuta () {\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(() => {\r\n      resolve(minutaCarregada)\r\n    }, 2000)\r\n  })\r\n}\r\n\r\nfunction salvarMinuta (minuta) {\r\n  return new Promise(function (resolve, reject) {\r\n    console.log('Autosaving...')\r\n    console.log(minuta)\r\n    resolve(minuta)\r\n  })\r\n}\r\n\r\n\r\nfunction carregarDespachos () {\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(() => {\r\n      resolve(despachos)\r\n    }, 1000)\r\n  })\r\n}\r\n\r\nfunction adicionarDespacho (novoDespacho) {\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(() => {\r\n      despachos.push(novoDespacho)  \r\n      resolve(despachos)\r\n    }, 1000)\r\n  })\r\n}\r\n\r\nfunction carregarModelos () {\r\n  const promiseFunction = function (resolve, reject) {\r\n    setTimeout(() => {\r\n      const grupos = [{\r\n        nome: 'Meus modelos',\r\n        minutas: modelos.privados\r\n      }, {\r\n        nome: 'Modelos da unidade',\r\n        minutas: modelos.publicosUnidade,\r\n      }, {\r\n        nome: 'Modelos públicos',\r\n        minutas: modelos.publicos\r\n      }] \r\n      resolve(grupos)\r\n    }, 2000)\r\n  } \r\n  return new Promise(promiseFunction) \r\n}\r\n\r\nfunction salvarModelo (titulo, tipo) {\r\n  return mockSave(() => {\r\n    const tipos = {\r\n      'privado': 'privados',\r\n      'unidade': 'publicosUnidade',\r\n      'publico': 'publicos'\r\n    }   \r\n    let arrTipo = modelos[tipos[tipo]]\r\n    if (!arrTipo) \r\n      return false\r\n    arrTipo.push(titulo)\r\n    return titulo\r\n  })\r\n}\r\n\r\nfunction carregarRubricas () {\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(() => resolve(rubricas), 5000)\r\n  })\r\n}\r\n\r\nfunction carregarVersoes () {\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(() => resolve(versoes.map(versao => {\r\n      return {\r\n        ...versao,\r\n        label: versao.data\r\n      }\r\n    })), 1500)\r\n  })  \r\n}\r\n\r\nfunction salvarVersao (titulo) {\r\n  return mockSave(() => {\r\n    versoes.unshift({\r\n      title: titulo,\r\n      data: '2021-01-02'\r\n    })\r\n    return true\r\n  })\r\n}\r\n\r\nfunction salvarCopia (titulo) {\r\n  return mockSave(() => true)\r\n}\r\n\r\nexport {\r\n  adicionarDespacho,\r\n  carregarMinuta,\r\n  carregarDespachos,\r\n  carregarModelos,\r\n  carregarRubricas,\r\n  carregarVersoes,\r\n  salvarCopia,\r\n  salvarModelo,\r\n  salvarMinuta,\r\n  salvarVersao\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Button, Classes, Dialog, Intent, TextArea } from '@blueprintjs/core'\r\nimport SubmenuPanel from './SubmenuPanel.js'\r\nimport DivWithSpinner from '../ui/DivWithSpinner.js'\r\nimport FormField from '../ui/FormField.js'\r\nimport Spacer from '../ui/Spacer.js'\r\nimport SelectUsuario from '../ui/SelectUsuario.js'\r\nimport { AppToaster } from '../ui/toaster.js'\r\n\r\nimport { usuarios } from '../lib/globalData.js'\r\nimport { adicionarDespacho, carregarDespachos } from '../lib/minutaData.js'\r\n\r\nimport './Despachos.css'\r\n\r\nfunction Despacho (props) {\r\n  return (\r\n    <div className=\"despacho\">\r\n      <div className=\"despacho-usuario\">\r\n        <span className=\"de-para\">De</span> <b>{ props.origem }</b><br />\r\n        <span className=\"de-para\">Para</span> <b> { props.destino }</b><br />\r\n        <span className=\"de-para\">Em</span> { props.data }  \r\n      </div>\r\n      <pre>\r\n      { props.texto }\r\n      </pre>\r\n    </div>  \r\n  )\r\n}\r\n\r\nclass Despachos extends React.Component {\r\n  constructor (props) {\r\n   \tsuper()\r\n   \tthis.state = {\r\n      despachos: [],\r\n   \t\tusuarioDestino: null,\r\n      textoDespacho: '',\r\n      showDialog: false,\r\n      showSpinner: false,\r\n   \t}\r\n   \tthis.handleUsuarioChange = this.handleUsuarioChange.bind(this)\r\n    this.handleDialogButtonClick = this.handleDialogButtonClick.bind(this)\r\n    this.handleTextareaChange = this.handleTextareaChange.bind(this)\r\n  }\r\n\r\n  componentDidUpdate (prevProps) {\r\n    if (this.props.show && !prevProps.show) {\r\n      this.setState({\r\n        showSpinner: true\r\n      })\r\n      carregarDespachos()\r\n      .then(data => this.setState({\r\n        despachos: data,\r\n        showSpinner: false\r\n      }))\r\n      .catch(error => {\r\n        this.setState({\r\n          showSpinner: false\r\n        })\r\n        AppToaster.show({\r\n          message: 'Ocorreu um erro tentando carregar os despachos',\r\n          intent: Intent.DANGER\r\n        })\r\n      })\r\n    }\r\n  }\r\n  \r\n  handleUsuarioChange (usuario) { \r\n  \tthis.setState({\r\n  \t\tusuarioDestino: usuario\r\n  \t})\r\n  }\t\r\n\r\n  handleTextareaChange (e) {\r\n    const texto = e.target.value\r\n    this.setState({\r\n      textoDespacho: texto\r\n    })\r\n  }\r\n\r\n  handleButtonClick () {\r\n    if (!this.state.usuarioDestino) return\r\n    this.setState({\r\n      showDialog: true\r\n    })\r\n  }\r\n\r\n  handleDialogClose () {\r\n    this.setState({\r\n      showDialog: false\r\n    })\r\n  }\r\n\r\n  handleDialogButtonClick (clickedOk) {\r\n    return (e) => {\r\n      this.setState({\r\n        showDialog: false\r\n      })\r\n      if (!clickedOk) \r\n        return\r\n      const novoDespacho = {\r\n        origem: 'fabio.cereda',\r\n        destino: this.state.usuarioDestino.login,\r\n        texto: this.state.textoDespacho,\r\n        data: '14/11/2020 18:27'\r\n      }\r\n      this.setState({\r\n        usuarioDestino: null,\r\n        textoDespacho: '',          \r\n      })\r\n      adicionarDespacho(novoDespacho)\r\n      .then(data => {\r\n        AppToaster.show({\r\n          message: 'Despacho enviado para ' + novoDespacho.destino + '. A janela deveria se fechar agora.', \r\n          intent: Intent.SUCCESS\r\n        })\r\n        this.props.onBack()\r\n      })\r\n      .catch(error => {\r\n        AppToaster.show({\r\n          message: 'Ocorreu um erro tentando enviar o despacho',\r\n          intent: Intent.DANGER  \r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\trender () {\r\n\r\n\t\tconst despHtml = this.state.despachos.length ? (\r\n      <>\r\n\t\t\t<h5>Despachos anteriores</h5>\r\n\t\t\t{ this.state.despachos.reverse().map(despacho => <Despacho {...despacho} />) }\r\n      </>\r\n\t\t) : ''\t\r\n\r\n    const usuarioDestino = this.state.usuarioDestino ? this.state.usuarioDestino.login : ''\r\n\t\treturn (\r\n\t\t\t<SubmenuPanel title=\"Despachar\" onClick={this.props.onBack}>\r\n        <SelectUsuario\r\n          message=\"Indique um usuário\"\r\n          label=\"Despachar para:\"\r\n          usuarios={usuarios}\r\n          usuario={this.state.usuarioDestino}\r\n          selected={this.state.usuarioDestino}\r\n          onChange={this.handleUsuarioChange}\r\n        ></SelectUsuario>\r\n      \r\n\t\t\t  <Spacer height={8} />\r\n\r\n\t      <FormField\r\n\t        label=\"Teor do despacho:\"\r\n\t      >\r\n\t\t    <TextArea rows=\"3\" fill={true} growVertically={true} value={this.state.textoDespacho} onChange={this.handleTextareaChange} />\r\n \t\t\t  </FormField>   \t\t \t\r\n\r\n\t\t\t  <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n\t\t\t    <Button rightIcon=\"arrow-top-right\" intent=\"primary\" onClick={this.handleButtonClick.bind(this)}>Despachar</Button>\r\n\t\t\t  </div>\r\n        <Spacer height={8} />\r\n\t      <DivWithSpinner spinner={ this.state.showSpinner }>\r\n\t\t    { despHtml }\r\n        </DivWithSpinner>\r\n\r\n        <Dialog isOpen={this.state.showDialog} onClose={this.handleDialogClose.bind(this)}>\r\n          <div className={Classes.DIALOG_BODY}>\r\n            <p>Deseja despachar este expediente? O acesso será transferido ao usuário <strong>{ usuarioDestino }</strong></p>\r\n          </div>  \r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>          \r\n              <Button onClick={this.handleDialogButtonClick(false)}>Não, cancelar</Button>\r\n              <Button onClick={this.handleDialogButtonClick(true)} intent={Intent.PRIMARY}>Sim, despachar</Button>\r\n            </div>\r\n          </div>  \r\n        </Dialog>  \r\n\r\n\t\t  </SubmenuPanel>\r\n\t\t)  \r\n\t}\r\n}\r\n\r\nDespachos.propTypes = {\r\n  show: PropTypes.bool.isRequired,\r\n  onBack: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Despachos","import * as React from \"react\"\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Button } from '@blueprintjs/core'\r\nimport Spacer from '../ui/Spacer.js'\r\nimport SubmenuPanel from './SubmenuPanel.js'\r\nimport Minuta from '../Minuta.js'\r\nimport './Expedir.css'\r\n\r\n\r\n\r\nclass Expedir extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper ()\r\n\t\tthis.state = {\r\n\t\t\terrors: []\r\n\t\t}\r\n  }\r\n\r\n  componentDidUpdate (prevProps) {\r\n    const INTERVALO_VERIFICAR = 2500\r\n    const timeoutVerificar = function () {\r\n  \t\tthis.verificarMinuta()\r\n  \t\tif (this.props.show)\r\n  \t\t\tsetTimeout(timeoutVerificar, INTERVALO_VERIFICAR) \r\n    }.bind(this) \r\n\r\n  \tif (this.props.show && !prevProps.show) {\r\n  \t\tthis.verificarMinuta()\t\r\n  \t\tsetTimeout(timeoutVerificar, INTERVALO_VERIFICAR)\r\n  \t}\r\n  }\r\n\r\n  verificarMinuta () {\r\n\t\tconst errors = this.props.minuta.validarParaExpedir()\r\n\t\tthis.setState({\r\n\t\t\terrors: function () {\r\n\t\t\t\tconst errorsArray = []\r\n\t\t\t\tfor (let prop in errors) {\r\n\t\t\t\t\terrorsArray.push(errors[prop])\r\n\t\t\t\t}\r\n\t\t\t\treturn errorsArray\r\n\t\t\t}()\r\n\t\t})\r\n\t\treturn !(errors && (errors.length > 0))\r\n  }\r\n\r\n  handleButtonClick (e) {\r\n  \t// Temos que verificar a minuta quando o usuário clica no botão\r\n  \t// expedir, pois ele pode ter introduzido algum erro na minuta\r\n  \t// depois que abriu o slider Expedir\r\n    if (this.verificarMinuta()) {\r\n    \tconst arquivoExpedicao = Minuta.prepararArquivoExpedicao(this.props.minuta)\r\n    \tconst objetoExpedicao = Minuta.prepararObjetoExpedicao(this.props.minuta)\r\n    \tconsole.log(arquivoExpedicao)\r\n    \tconsole.log(objetoExpedicao)\r\n\r\n  \t  alert(arquivoExpedicao)\r\n    }\r\n  }  \r\n\r\n\trender () {\r\n\t\tlet corpoTexto \r\n\t\tlet hasErrors = this.state.errors && this.state.errors.length\r\n\t\tif (hasErrors) {\r\n\t\t\tcorpoTexto = (\r\n\t\t\t\t<div className=\"expedicao-corpo-texto\">\r\n\t\t\t\t  Esta minuta contém alguns erros que impedem sua expedição:\r\n\t\t\t\t<ul>\r\n\t\t\t\t  { this.state.errors.map(error => <li>{error}</li>) }\r\n\t\t\t  </ul>\r\n          Corrija estes erros e tente expedir novamente.\r\n        </div>  \r\n\t\t\t)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcorpoTexto = (\r\n\t\t\t  <div className=\"expedicao-corpo-texto\">\r\n\t\t\t    Este expediente será transmitido e seu nome ficará registrado. Confirma a expedição?\r\n\t\t\t  </div>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<SubmenuPanel title=\"Expedir\" onClick={this.props.onBack}>\r\n\r\n\t\t\t  { corpoTexto }\r\n\r\n\t\t\t\t<Spacer height={16} />\r\n\t\t\t\t\r\n\t\t\t\t<div style={{ marginTop: 8, textAlign: 'right' }}>\r\n\t\t\t  \t<Button icon=\"chevron-left\" onClick={this.props.onBack}>Cancelar</Button>\r\n\t\t\t  \t&nbsp;&nbsp;\r\n\t\t\t\t  <Button rightIcon=\"direction-right\" intent=\"success\" disabled={hasErrors} onClick={this.handleButtonClick.bind(this)}>Expedir</Button>\r\n\t\t\t\t</div>\r\n\t\t\t  <Spacer height={8} />\r\n\t\t\t</SubmenuPanel>\r\n\t  )\r\n\t}\r\n}\r\n\r\nExpedir.propTypes = {\r\n\tminuta: PropTypes.instanceOf(Minuta),\r\n  show: PropTypes.bool.isRequired,\r\n  onBack: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Expedir","import React from \"react\"\r\nimport PropTypes from 'prop-types'\r\n\r\nimport SubmenuPanel from './SubmenuPanel.js'\r\n\r\nimport { Icon } from '@blueprintjs/core'\r\n\r\nimport './Historico.css'\r\n\r\nfunction Historico (props) {\r\n  let listaAcoes = []\r\n  for (let i = 0; i < 100; i++) {\r\n  \tlistaAcoes.push({\r\n  \t\tacao: 'Modificado',\r\n  \t\ticon: 'edit',\r\n  \t\tusuario: 'renato.andrade',\r\n  \t\tdata: '20/10/2020 20:36'\r\n  \t})\r\n  }\r\n  listaAcoes.push({\r\n  \tacao: 'Criado',\r\n  \ticon: 'document',\r\n  \tusuario: 'fabio.cereda',\r\n  \tdata: '18/10/2020 10:58'\r\n  })\r\n \r\n  const listaAcoesElement = listaAcoes.map((acao, index) => {\r\n  \treturn (\r\n  \t\t<div className=\"item-historico\" key={index}>\r\n  \t\t  <span className=\"icone-historico\"><Icon icon={acao.icon} intent=\"primary\" /></span>\r\n  \t\t  {acao.acao} por <b>{acao.usuario}</b><br />em {acao.data}\r\n  \t\t</div>\r\n  \t)\t\r\n  })\r\n\r\n\treturn (\r\n\t\t<SubmenuPanel title=\"Histórico\" onClick={props.onBack}>\r\n\t\t  { listaAcoesElement }\r\n\t\t</SubmenuPanel>\r\n  )\r\n}\r\n\r\nHistorico.propTypes = {\r\n  onBack: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Historico","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { MenuItem, Intent } from '@blueprintjs/core'\r\nimport { MultiSelect } from '@blueprintjs/select'\r\nimport FormField from './FormField.js'\r\n\r\nclass SelectUnidades extends React.Component {\r\n\r\n  constructor (props) {\r\n    super()\r\n   \tthis.state = {\r\n   \t\tunidades: Array.isArray(props.selected) ? props.selected : []\r\n   \t}\r\n   \tthis.filterItems = this.filterItems.bind(this)\r\n   \tthis.getTagProps = this.getTagProps.bind(this)\r\n   \tthis.renderItem = this.renderItem.bind(this)\r\n   \tthis.renderTag = this.renderTag.bind(this)\r\n   \tthis.handleItemSelect = this.handleItemSelect.bind(this)  \t\r\n   \tthis.handleTagRemove = this.handleTagRemove.bind(this)\r\n  }\r\n\r\n  componentDidUpdate (prevProps) {\r\n  \tif (this.props.selected === this.state.unidades)\r\n  \t\treturn\r\n  \tthis.setState({\r\n  \t\tunidades: this.props.selected\r\n  \t})\r\n  }\r\n\r\n  renderSelectedItem (item) {\r\n  \tif (!item) return ''\r\n    const { label, text } = item\t\t\r\n  \tconst txt = `${ label } - ${ text }`\r\n  \treturn txt\r\n  }  \r\n\r\n  renderItem (item, { modifiers, handleClick }) {\r\n    if (!modifiers.matchesPredicate) {\r\n      return null;\r\n    }\r\n  \tconst { label, text } = item\r\n    return (\r\n      <MenuItem\r\n        active={modifiers.active}\r\n        key={ label }\r\n        label={ label }\r\n        text={ text }\r\n        onClick={ handleClick }\r\n        shouldDismissPopover={false}\r\n      />\r\n    )\r\n  }\r\n\r\n  renderTag (item) {\r\n    if (typeof(item) == 'string')\r\n    \treturn <div>{ item }</div>\r\n    return <div title={item.text}>{ item.label || item.text }</div>\r\n  }  \r\n  \r\n  filterItems (searchStr) {\r\n    searchStr = searchStr.toLowerCase()\r\n  \treturn this.props.unidades.filter(item => {\r\n      if (this.state.unidades.indexOf(item) >= 0)\r\n        return false\r\n  \t\treturn item.label.toLowerCase().indexOf(searchStr) >= 0 ||\r\n  \t\t       item.text.toLowerCase().indexOf(searchStr) >= 0\r\n  \t})\r\n  }\r\n\r\n  getTagProps (value, index) {\r\n  \treturn {\r\n  \t\tinteractive: true,\r\n  \t\tintent: Intent.NONE,\r\n  \t}\r\n  }  \r\n  \r\n  handleItemSelect (item) { \r\n  \tconst unidades = this.state.unidades\r\n  \tunidades.push(item)\r\n  \tthis.setState({\r\n  \t\tunidades \r\n  \t})\r\n  \tif (this.props.onChange) {\r\n  \t\tthis.props.onChange(unidades)\r\n  \t}\r\n  }\t\r\n\r\n  handleTagRemove (selectedItems, selectedIndex) {\r\n  \tlet itemToRemove = this.state.unidades[selectedIndex]\r\n  \tlet unidades = this.state.unidades.filter(unidade => unidade !== itemToRemove)\r\n  \tthis.setState({\r\n  \t\tunidades\r\n  \t})\r\n    if (this.props.onChange) {\r\n      this.props.onChange(unidades)\r\n    }  \t\r\n  }  \r\n\r\n  render () {\r\n    return (\r\n\t\t\t<FormField\r\n\t      message={this.props.message}\r\n\t      label={this.props.label || 'Usuário:'}\r\n\t    >\r\n\t\t    <MultiSelect\r\n\t\t      fill={true}\r\n\t\t\t    initialContent={null}\t\t      \r\n\t\t      items={this.props.unidades}\t\t\t\r\n\t        itemListPredicate={this.filterItems}\t\t\r\n\t\t      itemRenderer={ this.renderItem }\r\n\t\t      onItemSelect={ this.handleItemSelect }\r\n\t\t      openOnKeyDown={true}\r\n\t\t      popoverProps={{ \r\n\t\t      \tminimal: true,\r\n\t\t      \tposition: 'bottom-right' \r\n\t\t      }}\r\n\t\t      resetOnSelect={true}\r\n\t\t      selectedItems={ this.state.unidades }\r\n\t\t      tagRenderer={ this.renderTag }\t\t  \r\n\t\t\t\t  tagInputProps={{\r\n\t\t\t\t  \tonRemove: this.handleTagRemove,\r\n\t\t\t\t  \ttagProps: this.getTagProps,\r\n\t  \t\t  }}\r\n\t\t    ></MultiSelect>  \r\n\t\t   </FormField>    \t\r\n    )\r\n  }\r\n}\r\n\r\nSelectUnidades.propTypes = {\r\n  label: PropTypes.string,\r\n  message: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  selected: PropTypes.array,\r\n  unidades: PropTypes.oneOfType([\r\n    PropTypes.array,\r\n    PropTypes.func\r\n  ]).isRequired,\r\n}\r\n\r\nexport default SelectUnidades\r\n\r\n\r\n\r\n\r\n\r\n","import React from \"react\"\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Button } from '@blueprintjs/core'\r\nimport SubmenuPanel from './SubmenuPanel.js'\r\nimport DivWithSpinner from '../ui/DivWithSpinner.js'\r\nimport Spacer from '../ui/Spacer.js'\r\nimport SelectUnidades from '../ui/SelectUnidades.js'\r\nimport './Rubricas.css'\r\n\r\nimport { unidades } from '../lib/globalData.js'\r\nimport { carregarRubricas } from '../lib/minutaData.js'\r\n\r\nfunction Rubrica (props) {\r\n\r\n  const labelStatus = (decisao) => {\r\n\t\tconst labels = {\r\n\t\t\t's': 'Solicitada',\r\n\t\t\t'a': 'Rubricado',\r\n\t\t\t'r': 'Rejeitado',\r\n\t\t\t'rs': 'Com ressalvas'\r\n\t\t}\r\n\t\treturn labels[decisao]\r\n\t}\r\n\t\r\n\tconst classeStatus = (decisao) => {\r\n\t\tconst classes = {\r\n\t\t\t's': 'solicitada',\r\n\t\t\t'a': 'aprovado',\r\n\t\t\t'r': 'rejeitado',\r\n\t\t\t'rs': 'ressalvas'\r\n\t\t}\r\n\t\treturn 'rubrica-status ' + classes[decisao]\r\n\t}\r\n\t\r\n  return (\r\n\t\t<div className=\"rubrica\">\r\n\t\t\t<span className=\"rubrica-unidade\">{ props.rubrica.unidade }</span><span className={ classeStatus(props.rubrica.status) }>{ labelStatus(props.rubrica.status) }</span>\t\r\n\t\t\t<div className=\"rubrica-comentarios\">\r\n\t\t\t  <pre>\r\n\t\t\t    { props.rubrica.texto }\r\n\t\t\t  </pre>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"rubrica-autor\">\r\n\t\t \t\t<strong>{ props.rubrica.autor }</strong>\r\n\t\t \t\t<span> </span>\r\n\t\t \t\t<span style={{whiteSpace: 'nowrap'}}>\r\n\t \t\t    { props.rubrica.data }\r\n\t \t\t  </span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n  )\r\n}\r\n\r\nclass Rubricas extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper ()\r\n\t\tthis.state = {\r\n\t\t\trubricas: [],\r\n\t\t\tunidadesSelecionadas: [],\r\n\t\t\tshowSpinner: false,\r\n\t\t}\r\n  }\r\n\r\n  componentDidUpdate (prevProps) {\r\n  \tif (prevProps.minuta !== this.props.minuta) {\r\n  \t\tthis.setState({\r\n  \t\t\tshowSpinner: true\r\n  \t\t})\r\n\t    // Aqui nós simulamos que o sistema está carregando a lista\r\n\t    // de rubricas depois que uma minuta foi carregada.\r\n\t    // Não significa que o sistema vai funcionar assim -- talvez\r\n\t    // a lista de rubricas já possa vir junto com o resto da minuta\r\n\t    // quando ela for carregada? Isso vai depender da performance \r\n\t    // do backend\r\n\t    carregarRubricas().then(rubricas => {\r\n\t     \tthis.setState({\r\n\t    \t\trubricas,\r\n\t    \t\tshowSpinner: false\r\n\t    \t})\r\n\t    })\r\n/*\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\trubricas: rubricas,\r\n\t\t\t\t\tshowSpinner: false\r\n\t\t\t\t})\r\n\t\t\t}, 5000)\t\t\r\n*/\t\t\t\r\n  \t}\r\n  \tif (prevProps.show === this.props.show)\r\n  \t\treturn\r\n  \tif (!this.props.show) \r\n  \t\treturn\r\n  \tthis.setState({\r\n\t\t  // Nós tiramos a primeira distribuição na hora de mostrar a sugestão\r\n\t\t  // porque nunca se pede rubrica à unidade da primeira distribuição,\r\n\t\t  // que é a unidade que escreve e expede o desptel/circtel\r\n  \t\tunidadesSelecionadas: (this.props.minuta.distribuicao || []).slice(1).map(sigla => {\r\n  \t\t\treturn unidades.find(unidade => unidade.label === sigla)  \t\t\t\r\n  \t\t})\r\n  \t})\r\n  }\r\n\r\n  handleUnidadesChange (e) {\r\n  \tthis.setState({\r\n  \t\tunidadesSelecionadas: e\r\n  \t})\r\n  }  \r\n\r\n  handleButtonClick (e) {\r\n  \tthis.setState({\r\n  \t\trubricas: [\r\n  \t\t  ...this.state.unidadesSelecionadas.map(item => {\r\n  \t\t  \t  return {\r\n  \t\t  \t  \tunidade: item.label,\r\n  \t\t  \t  \tstatus: 's',\r\n  \t\t  \t  \tdata: '14/11/2020 17:19'\r\n  \t\t  \t  }\r\n  \t\t  }),\r\n  \t\t  ...this.state.rubricas,\r\n  \t\t],\r\n  \t\tunidadesSelecionadas: []\r\n  \t})\r\n  }  \r\n\r\n\trender () {\r\n    let rubricasHtml = this.state.rubricas.map((rubrica, index) => <Rubrica rubrica={rubrica} key={index} />)\r\n    if (this.state.rubricas.length) {\r\n\t\t\trubricasHtml.unshift(<h5 key={-1}>Rubricas solicitadas</h5>)\r\n    }\r\n\t\treturn (\r\n\t\t\t<SubmenuPanel title=\"Rubricas\" onClick={this.props.onBack}>\r\n\t\t\t  <SelectUnidades \r\n\t\t\t    label=\"Solicitar rubrica das unidades:\"\r\n\t\t\t    unidades={unidades}\r\n\t\t\t    selected={this.state.unidadesSelecionadas}\r\n\t\t\t    onChange={this.handleUnidadesChange.bind(this)}\r\n\t\t\t  />\r\n\t\t\t\t<div style={{ marginTop: 8, textAlign: 'right' }}>\r\n\t\t\t\t  <Button rightIcon=\"arrow-right\" intent=\"primary\" onClick={this.handleButtonClick.bind(this)}>Solicitar rubricas</Button>\r\n\t\t\t\t</div>\r\n\t\t\t  <Spacer height={8} />\r\n\t      <DivWithSpinner spinner={ this.state.showSpinner }>\r\n \t\t      { rubricasHtml }\r\n        </DivWithSpinner>\t\t\t  \r\n\t\t\t</SubmenuPanel>\r\n\t  )\r\n\t}\r\n}\r\n\r\nRubricas.propTypes = {\r\n\tminuta: PropTypes.object.isRequired,\r\n  show: PropTypes.bool.isRequired,\r\n  onBack: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Rubricas","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button, Dialog, Classes, Intent, InputGroup, Label } from '@blueprintjs/core';\r\n\r\nclass DialogInputNome extends React.Component {\r\n\tconstructor (props) {\r\n\t  super()\r\n\t  this.state = {\r\n\t  \tvalue: ''\r\n\t  }\r\n\t  this.handleInputChange = this.handleInputChange.bind(this)\r\n\t  this.handleClickOk = this.handleClickOk.bind(this)\r\n\t  this.handleClose = this.handleClose.bind(this)\r\n\t}\r\n\r\n\tcomponentDidUpdate (prevProps) {\r\n\t\tif (this.props.show && !prevProps.show) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tvalue: ''\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleInputChange (e) {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\thandleClickOk (e) {\r\n\t\tthis.props.onChange && this.props.onChange(this.state.value)\r\n\t\tthis.handleClose(e)\r\n\t}\r\n\r\n\thandleClose (e) {\r\n\t\tthis.props.onClose && this.props.onClose() \r\n\t}\t\r\n\r\n  render () {\r\n\t\tconst ButtonStyle = { minWidth: 100 }\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t  style={{ width: this.props.width || 480 }} \r\n\t      onClose={this.handleClose}\r\n\t      title={this.props.title || 'Salvar como'}\r\n\t      isOpen={this.props.show}\r\n\t    >\r\n\t      <div className={Classes.DIALOG_BODY}>\r\n\t        <Label>\r\n\t          { this.props.label || 'Indique um nome para este documento:' }\r\n\t        </Label>  \r\n\t\t  \t\t<InputGroup\r\n\t\t\t      asyncControl={true}\r\n\t\t\t      placeholder={this.props.placeholder}\r\n\t\t\t      onChange={this.handleInputChange}\r\n\t\t\t      value={this.state.value}\r\n\t\t\t    />\t\r\n\t\t\t  </div>\r\n\t\t    <div className={Classes.DIALOG_FOOTER}>\r\n\t        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\t        \r\n\t          <Button fill={false} style={ButtonStyle} onClick={ this.props.onClose }>Cancelar</Button>\r\n\t          <Button \r\n\t            fill={false} \r\n\t            style={ButtonStyle} \r\n\t            type=\"submit\" \r\n\t            intent={Intent.PRIMARY} \r\n\t            disabled={!this.state.value}\r\n\t            onClick={ this.handleClickOk }>{ this.props.okButtonLabel || 'OK' }</Button>\r\n\t        </div>  \r\n\t      </div> \r\n\t    </Dialog>\r\n    )   \r\n\t}\r\n}\r\n\r\nDialogInputNome.propTypes = {\r\n\tlabel: PropTypes.string,\r\n\tokButtonLabel: PropTypes.string,\r\n\tplaceholder: PropTypes.string,\r\n\tshow: PropTypes.bool.isRequired,\r\n\ttitle: PropTypes.string,\r\n\twidth: PropTypes.oneOfType([\r\n\t\tPropTypes.number,\r\n\t\tPropTypes.string\r\n\t]),\r\n\tonChange: PropTypes.func.isRequired,\r\n\tonClose: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default DialogInputNome","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Menu, MenuDivider, MenuItem } from '@blueprintjs/core'\r\nimport './ListaMinutas.css'\r\n\r\nclass ListaMinutas extends React.Component {\r\n\r\n  constructor (props) {\r\n  \tsuper()\r\n  \tthis.state = {\r\n  \t\tselected: null\r\n  \t}\r\n  \tthis.handleMenuItemClick = this.handleMenuItemClick.bind(this)\r\n  }\r\n\r\n  handleMenuItemClick (item) {\r\n  \treturn (e) => {\r\n  \t\tthis.setState({\r\n  \t\t\tselected: item\r\n  \t\t})\r\n  \t\tthis.props.onClick(item)\r\n  \t}\r\n  }\r\n\r\n  render () {\r\n\t  const listaHtml = this.props.grupos.map(grupo => {\r\n\t\t  const modelosHtml = grupo.minutas.map(minuta => {\r\n\t\t  \tconst label = <small>{ minuta.label }</small>\r\n\t\t    return (\r\n\t \t\t\t\t<MenuItem \r\n\t \t\t\t\t  text={ minuta.title || minuta.texto || minuta } \r\n\t \t\t\t\t  labelElement={ label }\r\n\t \t\t\t\t  onClick={ this.handleMenuItemClick(minuta) }\r\n\t \t\t\t\t  multiline={ true }\r\n\t \t\t\t\t  active={ this.state.selected === minuta }\r\n\t \t\t\t\t/>\r\n\t\t    )\r\n\t\t  })\r\n\t\t  if (modelosHtml.length) {\r\n\t\t  \tif (grupo.nome) {\r\n\t\t  \t  modelosHtml.unshift(<MenuDivider title={ grupo.nome }/>)\r\n\t\t  \t}\r\n\t\t  \treturn modelosHtml\r\n\t\t  }\r\n\t\t\telse {\r\n\t\t\t  return ''\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn (\r\n\t    <Menu> \r\n\t      { listaHtml }\r\n\t    </Menu>\r\n\t  )\r\n  }\r\n}  \r\n\r\nListaMinutas.propTypes = {\r\n\tgrupos: PropTypes.array,\r\n\tonClick: PropTypes.func\r\n}\r\n\r\nexport default ListaMinutas\r\n\r\n           ","const { parse } = require('node-html-parser')\r\n\r\nfunction inserirProposito (html, proposito) {\r\n  if (!proposito) return html\r\n  return html.replace(/<p(.*?)>/, (fullMatch, segmentMatch) => {\r\n    return  `<p${ segmentMatch }><span class=\"proposito\">${ proposito }</span>`\r\n  })\r\n}\r\n\r\nfunction validar (html) {\r\n  const root = parse(html)\r\n  \r\n  function checkNode (node) {\r\n    if (node.rawTagName === 'script') \r\n      throw Error('<script> tag found')\r\n    if (node.rawAttrs && node.rawAttrs.match(/on(\\S+)(\\s*)=/g)) \r\n      throw Error(`JS events found inside tag <${ node.rawTagName }>`)\r\n    if (node.childNodes)\r\n      node.childNodes.forEach(child => checkNode(child))\r\n  }      \r\n  \r\n  try {\r\n    checkNode(root)\r\n    return true\r\n  }  \r\n  catch (error) {\r\n    console.error(error)\r\n    return false\r\n  }  \r\n}  \r\n\r\nexport default {\r\n\tinserirProposito,\r\n\tvalidar,\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Minuta from '../Minuta.js'\r\nimport { postos, grausSigilo, prioridades, usuarioAtual } from '../lib/globalData.js'\r\nimport htmlTel from '../htmltel.js'\r\nimport './Painel-Minuta.css'\r\n\r\nfunction obterNomePosto (sigla) {\r\n\tconst posto = postos.find(posto => sigla === (posto.sigla || posto.id))\r\n\tif (!posto) \r\n\t\treturn ''\r\n  const nomePosto = posto.nome || posto.text\r\n  const componentesNomePosto = nomePosto.split(' ')\r\n  // Uma vez que temos o nome do posto, vamos colocar \r\n  // o nome da cidade em negrito\r\n  if (componentesNomePosto.length === 1) {\r\n  \t// No caso em que o posto é identificado por uma sigla \r\n    // (p.ex. DELBRASONU), todo o nome aparece em negrito\r\n  \treturn '<b>' + nomePosto + '</b>'\r\n  }\t\r\n  componentesNomePosto.splice(1, 0, '<b>')\r\n  return componentesNomePosto.join(' ') + '</b>'\r\n}\r\n\r\nfunction montaListaNomesPostos (arraySiglas, primeiroElemento) {\r\n\tif (!arraySiglas || !arraySiglas.length)\r\n\t\treturn ''\r\n  let nomesPostos = arraySiglas.map(sigla => obterNomePosto(sigla))\r\n  // COMO FICAMOS COM AS RETRANSMISSÕES PARA GRUPOS??\r\n  let htmlListaPostos = nomesPostos.join(',<br />')\r\n  if (primeiroElemento)\t{\r\n  \thtmlListaPostos = primeiroElemento + '<br />' + htmlListaPostos\r\n  }\r\n  return htmlListaPostos\r\n}\r\n\r\nfunction montarCabecalho (tipo, origemTel, destinatarioDet) {\r\n\tswitch (tipo.charAt(0).toLowerCase()) {\r\n\t\tcase 't': \r\n\t\t  return (\r\n\t\t  \t<>\r\n\t\t  \t  <h2 dangerouslySetInnerHTML= {{ __html: obterNomePosto(origemTel) }}></h2>\r\n\t\t  \t  <h3>Minuta de telegrama</h3>\r\n\t\t  \t</>  \r\n\t  \t)\r\n\t  case 'd':\r\n  \t  return (\r\n  \t  \t<> \r\n  \t  \t  <h2>Da SERE para <span dangerouslySetInnerHTML= {{ __html: obterNomePosto(destinatarioDet) }}></span></h2>\r\n  \t  \t  <h3>Minuta de despacho telegráfico</h3>\r\n  \t  \t</>\r\n\t    )\r\n\t  case 'c':\r\n\t    return (\r\n\t      <>\r\n\t\t      <h2>Secretaria de Estado das Relações Exteriores</h2>\r\n\t\t      <h3>Minuta de circular telegráfica</h3>\r\n\t      </>\r\n\t    )\r\n\t  default:   \r\n\t    return <h2>Minuta de expediente telegráfico</h2>\t\r\n\t}\r\n}\r\n\r\nfunction encontrarLabelCampo (idProcurado, arrayValores) {\r\n  let campoObj = arrayValores.find(({ id }) => id === idProcurado)\r\n  if (campoObj)\r\n  \treturn campoObj.text\r\n  return ''\r\n}  \r\n\r\n\r\nfunction PainelMinuta (props) {\r\n\tif (!props.minuta) {\r\n\t\treturn (\r\n      <>\r\n      <br />\r\n      <h3>{ props.placeholder || 'Selecione uma minuta na lista à esquerda' }</h3>\r\n      </>\r\n\t\t)\r\n  }\r\n  const origemTel = usuarioAtual.posto\r\n\tconst {\r\n\t\ttipo,\r\n\t\tdestinatarioDet,\r\n\t\tdistribuicao,\r\n\t\trtm,\r\n\t\tdestinatariosCit,\r\n\t\tindexadores,\r\n\t\tprioridade,\r\n\t\tcarater,\r\n\t\treferencias,\r\n\t\tindice,\r\n\t\tproposito,\t\t\r\n\t\tredator,\t\t\r\n\t\tresumo,\r\n\t\ttexto\r\n\t} = (new Minuta(props.minuta))  \r\n  let textoComProposito\r\n  if (!htmlTel.validar(texto)) {\r\n  \ttextoComProposito = 'Corpo de texto inválido.'\r\n  }\r\n  else {\r\n    textoComProposito = htmlTel.inserirProposito(texto, proposito) + '<p class=\"redator\">' + redator + '</p>'\r\n  }  \r\n\r\n  return (\r\n    <div style={ props.style }>\r\n    <div className=\"cabecalho\">\r\n\t\t\t<div className=\"posto-e-tipo\">\r\n\t\t\t  { montarCabecalho(tipo, origemTel, destinatarioDet) }\r\n\t\t\t</div>\t \r\n\t\t\t<div className=\"campos-expediente\">\t\t\t\t \r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<fieldset className=\"c1-1\"><legend>Distribuição</legend>{ distribuicao.join(' / ') }</fieldset>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<fieldset className=\"c2-3\"><legend>Indexadores</legend>{ indexadores.join('-') }</fieldset>\t\t\t\t\t\t\r\n\t\t\t\t\t<fieldset className=\"c1-3\"><legend>Prioridade</legend>{ encontrarLabelCampo(prioridade, prioridades) }</fieldset>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<fieldset className=\"c1-3\"><legend>Caráter</legend>{ encontrarLabelCampo(carater, grausSigilo) }</fieldset>\t\t\t\t\t\t\r\n\t\t\t\t\t<fieldset className=\"c1-3\"><legend>Prazo de sigilo</legend></fieldset>\t\t\t\t\t\t\r\n\t\t\t\t\t<fieldset className=\"c1-3\"><legend>Base legal</legend></fieldset>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<fieldset className=\"c1-1\"><legend>Referências</legend>{ referencias.join(', ').toUpperCase() }</fieldset>\r\n\t\t\t  </div>\t\t\t\t \r\n\t\t\t\t<div className=\"flex-container\">\r\n\t\t\t\t\t<fieldset className=\"c1-1\"><legend>Índice</legend>{ indice }</fieldset>\r\n\t\t\t\t</div>\t\t\t\t \t\t\t\t \r\n  \t\t</div>\t\t\t\t \r\n\r\n\t\t</div>\r\n\t\t\t \r\n\t\t<table>\r\n\t\t  <tbody>\r\n\t\t  <tr><td>\r\n\t\t    <div className=\"corpo-texto\">\r\n\t\t\t\t\t<p className=\"rtm\" dangerouslySetInnerHTML= {{ __html: montaListaNomesPostos(rtm, 'Retransmissão automática para') }}>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"destinatarios\" dangerouslySetInnerHTML= {{ __html: montaListaNomesPostos(destinatariosCit, 'Destinatários da circular telegráfica:') }}>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"resumo\">\r\n\t\t\t\t\t\t{ resumo }\r\n\t\t\t\t\t</p>\t\r\n\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: textoComProposito }}></div>\r\n\t      </div>\t\r\n  \t\t</td></tr>\r\n  \t\t</tbody>\r\n\t\t  <tfoot>\r\n\t\t  <tr><td className=\"content-space-below\">&nbsp;</td></tr>\r\n\t\t  </tfoot>\r\n\t\t</table>\r\n\r\n\t  <div className=\"tci\">\r\n\t\t  <h3>TCI</h3>\r\n\t\t  <br />\r\n\t\t\t<div className=\"flex-container\" style={{ fontSize: 11 }}>\r\n\t\t\t\t<fieldset className=\"c1-4\"><legend>Grau de sigilo</legend>Ultrassecreto</fieldset>\t\t\t\t\t\t\r\n\t\t\t\t<fieldset className=\"c1-4\"><legend>Prazo</legend>25 anos</fieldset>\t\t\t\t\t\t\r\n\t\t\t\t<fieldset className=\"c1-2\"><legend>Fundamento legal</legend>Lei 12.527/11 Art. 23 - II</fieldset>\r\n\t\t\t</div>  \t\r\n\t  \t<div className=\"flex-container\">\r\n\t  \t\t<fieldset className=\"c1-1\"><legend>Razões para classificação</legend>O expediente relata gestão junto à Chancelaria e ao Ministério do Esporte de Neutrália em favor da candidatura do Sr. José da Silva para a Direção Geral da FIFA</fieldset>\r\n\t  \t</div>\t\r\n\t  </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nPainelMinuta.propTypes = {\r\n  minuta: PropTypes.object,  \r\n  placeholder: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\nexport default PainelMinuta","import React from 'react'\r\nimport { Button, Dialog, Classes, InputGroup, Intent, Spinner } from '@blueprintjs/core'\r\nimport FlexDiv from '../ui/FlexDiv.js'\r\nimport Spacer from '../ui/Spacer.js'\r\nimport { AppToaster } from '../ui/toaster.js'\r\nimport ListaMinutas from './ListaMinutas.js'\r\nimport PainelMinuta from './Painel-Minuta.js'\r\n\r\nclass DialogMinutas extends React.Component {\r\n\tconstructor (props) {\r\n\t  super()\r\n\t  this.state = {\r\n\t  \tisOpen: props.show,\r\n\t    grupos: [],\r\n\t    minutas: [],\r\n\t    filtro: '',\r\n\t    itemSelecionado: null,\r\n\t    showListaSpinner: false,\r\n\t    showSpinner: false,\r\n\t    modelo: null\r\n\t  }\r\n\r\n\t  this.handleClose = this.handleClose.bind(this)\r\n\t  this.handleOk = this.handleOk.bind(this)\r\n\t  this.handleFilterChange = this.handleFilterChange.bind(this)\r\n\t  this.handleSelectMinuta = this.handleSelectMinuta.bind(this)\r\n\t}\r\n\r\n  componentDidUpdate (prevProps) {\r\n  \tif (this.props.show === prevProps.show) \r\n  \t\treturn\r\n  \tif (!this.props.show)\r\n  \t\treturn\r\n\r\n  \t//Se chegar aqui, é porque this.props.show == true e prevProps.show == false\r\n  \tif (typeof this.props.grupos === 'function') {\r\n  \t\t// Se this.props.grupos for uma função, \r\n  \t\t// deverá retornar uma promise para passar\r\n  \t\t// o array de grupos\r\n  \t\tthis.setState({\r\n  \t\t\tshowListaSpinner: true\r\n  \t\t})\r\n  \t\tthis.props.grupos()\r\n  \t\t.then(data => {\r\n  \t\t\tthis.setState({\t\r\n  \t\t\t\tgrupos: data,\r\n  \t\t\t\tshowListaSpinner: false\r\n  \t\t\t})\r\n  \t\t})\r\n  \t\t.catch(error => this.setState({\r\n  \t\t\tshowListaSpinner: false\r\n  \t\t}))\r\n  \t}\r\n  \telse {\r\n  \t\t// Se this.props.grupos for um Array,\r\n  \t\t// ele é incorporado ao state\r\n  \t\tif (Array.isArray(this.props.grupos)) {\r\n  \t\t\tthis.setState({\r\n  \t\t\t\tgrupos: this.props.grupos\r\n  \t\t\t})\r\n  \t\t}\t\r\n  \t}\r\n\r\n  \tif (typeof this.props.minutas === 'function') {\r\n  \t\t// Se this.props.minutas for uma função, \r\n  \t\t// deverá retornar uma promise que passará  \r\n  \t\t// o array de minutas\r\n  \t\tthis.setState({\r\n  \t\t\tshowListaSpinner: true\r\n  \t\t})\r\n  \t\tthis.props.minutas()\r\n  \t\t.then(data => {\r\n  \t\t\tthis.setState({\r\n  \t\t\t\tminutas: data,\r\n  \t\t\t\tshowListaSpinner: false\r\n  \t\t\t})\r\n  \t\t})\r\n  \t\t.catch(error => this.setState({\r\n  \t\t\tshowListaSpinner: false\r\n  \t\t}))\t\r\n  \t}  \t\r\n  \telse {\r\n  \t\t// Se this.props.minutas for um Array,\r\n  \t\t// ele é incorporado ao state \r\n  \t\tif (Array.isArray(this.props.minutas)) {\r\n  \t\t\tthis.setState({\r\n  \t\t\t\tminutas: this.props.minutas\r\n  \t\t\t})\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n\thandleClose (e) {\r\n\t\tthis.props.onClose(e)\r\n\t}\r\n\r\n\thandleOk (handler) {\r\n\t\treturn (e) => \t{\r\n\t\t\tif (handler && (handler(this.state.modelo) === false)) \r\n\t\t\t\treturn\r\n\t\t  this.props.onClose(e)\r\n\t\t}  \r\n\t}\r\n\r\n\thandleSelectMinuta (itemSelecionado) {\r\n\t\tif (itemSelecionado === this.state.itemSelecionado)\r\n\t\t\treturn\r\n\t\tif (this.props.minuta && typeof this.props.minuta === 'function') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowSpinner: true,\r\n\t\t\t})\t\t\t\r\n\t\t\tthis.props.minuta()\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tmodelo: data,\r\n\t\t\t\t\titemSelecionado,\r\n\t\t\t\t\tshowSpinner: false\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tAppToaster.show({\r\n\t\t\t\t\tmessage: error || 'Erro ao tentar carregar este documento',\r\n\t\t\t\t\tintent: Intent.DANGER\r\n\t\t\t\t})\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tshowSpinner: false\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n  handleFilterChange (e)  {\r\n  \tthis.setState({\r\n  \t\tfiltro: e.target.value\r\n  \t})\r\n  }\r\n\r\n  filtrarMinutas (grupos, minutas) {\r\n  \tconst filtro = this.state.filtro.toLowerCase()\r\n  \tconst filterFunction = (minuta) => {\r\n \t\t\tif (typeof minuta !== 'string')\r\n \t\t\t\tminuta = (minuta.title || minuta.text || '') + minuta.label\r\n  \t\treturn minuta.toLowerCase().indexOf(filtro) >= 0\r\n  \t}\t\r\n\r\n  \tif (!grupos || !grupos.length) {\r\n  \t\treturn [{\r\n  \t\t\tnome: '',\r\n  \t\t\tminutas: (minutas || []).filter(filterFunction)\r\n  \t\t}]\t\r\n  \t}\t\r\n  \treturn grupos.map(grupo => {\r\n  \t\treturn {\r\n  \t\t\tnome: grupo.nome,\r\n  \t\t\tminutas: grupo.minutas.filter(filterFunction)\r\n  \t\t}\r\n  \t})\r\n  }\r\n\r\n  render () {\r\n  \tconst ButtonStyle = { minWidth: 100 }\r\n  \tconst spinnerStyle = { \r\n\t\t\tposition: 'sticky', \r\n\t\t\ttop: 200, \r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\theight: 0,\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tzIndex: 100        \r\n\t\t}\r\n\r\n  \tconst actionButtons = this.props.actions.map((action, index) => {\r\n  \t\treturn <Button \r\n  \t\t  fill={false} key={index}\r\n  \t\t  intent={action.intent} \r\n  \t\t  style={action.style || ButtonStyle} \r\n  \t\t  onClick={this.handleOk(action.handler)}>{ action.text || action.label }</Button>\r\n  \t})\r\n\r\n    return (\r\n\t\t\t<Dialog\r\n\t\t\t  style={{ width: 900 }}\r\n\t      onClose={this.handleClose}\r\n\t      title={this.props.title || 'Minutas'}\r\n\t      isOpen={this.props.show}\r\n\t\t\t\tcanOutsideClickClose={false}\t      \r\n \t    >\r\n\t      <div className={Classes.DIALOG_BODY}>\r\n          \r\n          <FlexDiv style={{ height: 480 }}>\r\n\r\n \t\t\t\t\t\t<FlexDiv direction=\"vertical\" style={{ width: 400 }}>\r\n\t\t\t        <InputGroup\r\n\t\t\t\t\t      asyncControl={true}\r\n\t\t\t\t\t      leftIcon=\"search\"\r\n\t\t\t\t\t      placeholder=\"Filtrar...\"\r\n\t\t\t\t\t      onChange={this.handleFilterChange}\r\n\t\t\t\t\t      value={this.state.filtro}\r\n\t\t\t\t\t    />\t\r\n\t\t\t        <Spacer height={8} />\t\t\t    \r\n\r\n\t\t\t        <div style={{ flex: 1, overflowY: 'auto', border: '1px solid #aaa', backgroundColor: '#ffffff' }}>\r\n\t\t\t\t        <div style={{\r\n\t\t\t\t        \t...spinnerStyle,\r\n\t\t\t\t        \tdisplay: this.state.showListaSpinner ? 'block' : 'none'\r\n\t\t\t\t        }}>\r\n\t        \t\t\t\t<Spinner size={Spinner.SIZE_STANDARD} />\r\n\t      \t\t\t\t</div>  \t\t\t        \r\n\t\t\t          <ListaMinutas \r\n\t\t\t            grupos={this.filtrarMinutas(this.state.grupos, this.state.minutas)} \r\n\t\t\t            onClick={this.handleSelectMinuta}\r\n\t\t\t          />\r\n\t\t\t        </div>  \r\n\t\t\t      </FlexDiv>\r\n\t\t\t      \r\n\t\t\t      <div style={{ position: 'relative', width: 640, padding: 16, paddingTop: 0, marginLeft: 16, overflowY: 'auto', overflowX: 'hidden', backgroundColor: 'white', border: '1px solid #aaa' }}>\r\n\t\t\t        <div style={{\r\n\t\t\t        \t...spinnerStyle,\r\n\t\t\t        \tdisplay: this.state.showSpinner ? 'block' : 'none'\r\n\t\t\t        }}>\r\n        \t\t\t\t<Spinner size={Spinner.SIZE_STANDARD} />\r\n      \t\t\t\t</div>  \r\n\t\t\t        <PainelMinuta \r\n\t\t\t          minuta={ this.state.modelo } \r\n\t\t\t          placeholder={ this.props.placeholder }\r\n\t\t\t          style={{ opacity: this.state.showSpinner ? 0.4 : 1 }}/>\r\n\t\t\t      </div>    \r\n\r\n\t\t\t    </FlexDiv>\r\n\r\n\t      </div>  \r\n        <div className={Classes.DIALOG_FOOTER}>\r\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\t        \r\n\t          <Button fill={false} style={ButtonStyle} onClick={ this.props.onClose }>Cancelar</Button>          \r\n\t          {actionButtons}\r\n\t        </div>  \r\n\t      </div>\r\n\t    \r\n\t    </Dialog>  \r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default DialogMinutas\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button, Dialog, Classes, Intent, InputGroup, Label, Radio, RadioGroup } from '@blueprintjs/core';\r\nimport Spacer from '../ui/Spacer.js'\r\n\r\nclass DialogSalvarModelo extends React.Component {\r\n\tconstructor (props) {\r\n\t  super()\r\n\t  this.state = {\r\n\t  \tvalue: '',\r\n\t  \ttipoModelo: null,\r\n\t  }\r\n\t  this.handleInputChange = this.handleInputChange.bind(this)\r\n\t\tthis.handleTipoModeloChange = this.handleTipoModeloChange.bind(this)\t  \r\n\t  this.handleClickOk = this.handleClickOk.bind(this)\r\n\t  this.handleClose = this.handleClose.bind(this)\t  \r\n\t}\r\n\r\n  componentDidUpdate (prevProps) {\r\n    if (this.props.show && !prevProps.show) {\r\n    \tthis.setState({\r\n    \t\tvalue: ''\r\n    \t})\r\n    }\r\n  }\t\r\n\r\n\thandleInputChange (e) {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\thandleTipoModeloChange (e) {\r\n\t\tthis.setState({\r\n\t\t\ttipoModelo: e.target.value\r\n\t\t})\r\n\t}\r\n\r\n\thandleClickOk (e) {\r\n\t\tthis.props.onChange && this.props.onChange({\r\n\t\t\ttitulo: this.state.value,\r\n\t\t\ttipo: this.state.tipoModelo\r\n\t\t})\r\n\t\tthis.handleClose(e)\r\n\t}\r\n\r\n\thandleClose (e) {\r\n\t\tthis.props.onClose && this.props.onClose() \r\n\t}\t\t\r\n\r\n  render () {\r\n\t\tconst ButtonStyle = { minWidth: 100 }\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t  style={{ width: 480 }}\r\n\t      onClose={this.handleClose}\r\n\t      title={this.props.title || 'Salvar esta minuta como modelo'}\r\n\t      isOpen={this.props.show}\r\n\t\t\t\tcanOutsideClickClose={false}\r\n\t    >\r\n\t      <div className={Classes.DIALOG_BODY}>\r\n\t        <Label>\r\n\t          Indique um nome para o modelo:\r\n\t        </Label>  \r\n\t\t  \t\t<InputGroup\r\n\t\t\t      asyncControl={true}\r\n\t\t\t      placeholder={this.props.placeholder}\r\n\t\t\t      onChange={this.handleInputChange}\r\n\t\t\t      value={this.state.value}\r\n\t\t\t    />\t\r\n\t\t\t    <Spacer height={16} />\r\n\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t    label=\"Indique quem poderá usar este modelo:\"\r\n\t\t\t\t\t    onChange={this.handleTipoModeloChange}\r\n\t\t\t\t\t    selectedValue={this.state.tipoModelo}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t    <Radio label=\"Somente eu\" value=\"privado\" />\r\n\t\t\t\t\t    <Radio label=\"Minha unidade\" value=\"unidade\" />\r\n\t\t\t\t\t    <Radio label=\"Todos os usuários\" value=\"publico\" />\r\n\t\t\t\t\t</RadioGroup>\r\n\t\t\t  </div>\r\n\t\t    <div className={Classes.DIALOG_FOOTER}>\r\n\t        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\t        \r\n\t          <Button fill={false} style={ButtonStyle} onClick={ this.props.onClose }>Cancelar</Button>\r\n\t          <Button fill={false} \r\n\t            style={ButtonStyle} \r\n\t            type=\"submit\" \r\n\t            intent={Intent.PRIMARY} \r\n\t            disabled={!this.state.value || !this.state.tipoModelo}\r\n\t            onClick={ this.handleClickOk }>Salvar como modelo</Button>\r\n\t        </div>  \r\n\t      </div> \r\n\t    </Dialog>\r\n    )   \r\n\t}\r\n}\r\n\r\nDialogSalvarModelo.propTypes = {\r\n\tlabel: PropTypes.string,\r\n\tplaceholder: PropTypes.string,\r\n\tshow: PropTypes.bool.isRequired,\r\n\ttitle: PropTypes.string,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tonClose: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default DialogSalvarModelo","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Intent } from '@blueprintjs/core'\r\n\r\nimport Slider from './ui/Slider.js'\r\nimport SliderContainer from './ui/SliderContainer.js'\t\r\n\r\nimport SidebarMenu from './sidebar/SidebarMenu.js'\r\nimport Despachos from './sidebar/Despachos.js'\r\nimport Expedir from './sidebar/Expedir.js'\r\nimport Historico from './sidebar/Historico.js'\r\nimport Rubricas from './sidebar/Rubricas.js'\r\nimport DialogInputNome from './sidebar/DialogInputNome.js'\r\nimport DialogMinutas from './sidebar/DialogMinutas.js'\r\nimport DialogSalvarModelo from './sidebar/DialogSalvarModelo.js'\r\nimport Minuta from './Minuta.js'\r\nimport { carregarModelos, carregarVersoes } from './lib/minutaData.js'\r\n\r\nclass Sidebar extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper()\r\n\t\tthis.state = {\r\n\t\t\topenPane: 'menu',\r\n\t\t\topenDialog: '',\r\n\t\t}\r\n\t\tthis.handleMenuClick = this.handleMenuClick.bind(this)\t\r\n\t\tthis.handleSalvarCopia = this.handleSalvarCopia.bind(this)\r\n\t\tthis.handleSalvarModelo = this.handleSalvarModelo.bind(this)\r\n\t\tthis.handleSalvarVersao = this.handleSalvarVersao.bind(this)\r\n\t\tthis.backToMenu = this.backToMenu.bind(this)\t\r\n\t\tthis.openDialog = this.openDialog.bind(this)\r\n\t\tthis.closeDialog = this.closeDialog.bind(this)\r\n\t\tthis.openPane = this.openPane.bind(this)\r\n  } \r\n\r\n  handleMenuClick (paneToOpen) {\r\n  \tif (['modelos', 'versoes', 'salvarCopia', 'salvarModelo', 'salvarVersao'].includes(paneToOpen))\r\n  \t\treturn (e) => this.openDialog(paneToOpen)\r\n  \telse\r\n  \t  return (e) => this.openPane(paneToOpen)\r\n  }\r\n\r\n  openDialog (dialogToOpen) {\r\n  \tthis.setState({\r\n  \t\topenDialog: dialogToOpen\r\n  \t})\r\n  \tthis.forceUpdate()\r\n  }\r\n\r\n  closeDialog () {\r\n  \tthis.setState({\r\n  \t\topenDialog: ''\r\n  \t})\r\n  }\r\n\r\n  openPane (paneToOpen) {\r\n    this.setState({\r\n    \topenPane: paneToOpen\r\n    })   \r\n    this.forceUpdate()\t  \t\r\n  }\r\n\r\n  backToMenu () {\r\n  \tthis.openPane('menu')\r\n  }\r\n\r\n  loadModelos () {\r\n    return carregarModelos()\r\n  }\r\n\r\n  loadMinuta (minutaObj) {\r\n  \treturn new Promise (function (resolve, reject) {\r\n  \t\tconst modelo = {\r\n  \t\t\ttipo: 'cit',\r\n\t   \t\tdistribuicao: ['DEUC', 'DMAC'],\r\n\t   \t\tindexadores: ['PEXT', 'BRAS', 'EUA'],\r\n\t   \t\tdestinatarioDet: 'USABREM',\r\n    \t\trtm: ['USABREM', 'CANBREM'],\r\n    \t\tproposito: 'Informo e rogo providências',\r\n    \t\tprioridade: 'u',\r\n    \t\tcarater: 's',\r\n        redator: 'FACC',\r\n    \t\treferencias: ['TEL 1234', 'CIT 134233', 'det 12/2020'],\r\n    \t\tindice: 'Modelo. Índice',\r\n    \t\ttexto: `<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc sit amet egestas tortor. Nam a odio facilisis, pellentesque orci sed, vestibulum nibh. Sed sapien mauris, mattis quis mollis eget, molestie et sem. Nullam condimentum congue commodo. Maecenas ac quam at magna tempor congue id ac quam. Ut velit nunc, sagittis sit amet odio vitae, maximus lacinia orci. Sed bibendum neque a nisl sagittis tempus. Aenean finibus finibus sagittis. Mauris posuere elit et auctor tempor. Aenean scelerisque fringilla ante at maximus.</p>\r\n\t\t\t\t\t<p>2. Quisque quis laoreet purus. Mauris cursus neque non elit posuere, id pretium felis tempor. Cras varius eleifend ipsum id malesuada. Proin dictum, purus quis aliquet placerat, felis lorem lacinia turpis, ut convallis augue nisi eget odio. Sed dui nisi, vehicula eget posuere sed, dignissim non lacus. Nulla ac nibh purus. Aenean sit amet ornare orci, eu rutrum sem. Ut elementum imperdiet nisl, eu ullamcorper sem laoreet in. Donec ut ornare lacus. Ut sed lectus lectus. Suspendisse vestibulum, justo non condimentum fringilla, turpis eros commodo ex, in iaculis velit dui dignissim augue. Suspendisse non magna urna. Vivamus consectetur metus in justo mollis mattis.</p>\r\n\t\t\t\t\t<p>3. Quisque quis laoreet purus. Mauris cursus neque non elit posuere, id pretium felis tempor. Cras varius eleifend ipsum id malesuada. Proin dictum, purus quis aliquet placerat, felis lorem lacinia turpis, ut convallis augue nisi eget odio. Sed dui nisi, vehicula eget posuere sed, dignissim non lacus. Nulla ac nibh purus. Aenean sit amet ornare orci, eu rutrum sem. Ut elementum imperdiet nisl, eu ullamcorper sem laoreet in. Donec ut ornare lacus. Ut sed lectus lectus. Suspendisse vestibulum, justo non condimentum fringilla, turpis eros commodo ex, in iaculis velit dui dignissim augue. Suspendisse non magna urna. Vivamus consectetur metus in justo mollis mattis.</p>\r\n\t\t\t\t\t<p>EXTERIORES</p>`\t\r\n\t    }\r\n\t    setTimeout(() => resolve(modelo), 2000)\r\n  \t})\r\n  }\r\n\r\n  loadVersoes () {\r\n    return carregarVersoes()\r\n  }\r\n\r\n  handleSalvarCopia (e) {\r\n    this.props.onSalvarCopia(e)\r\n  }\r\n\r\n  handleSalvarModelo (e) {\r\n  \tthis.props.onSalvarModelo(e)\r\n  }\r\n\r\n  handleSalvarVersao (e) {\r\n  \tthis.props.onSalvarVersao(e)\r\n  }  \r\n   \r\n  render () {\r\n  \tconst showRubricas  = this.state.openPane === 'rubricas'\r\n    const showDespachos = this.state.openPane === 'despachos'\r\n    const showExpedir   = this.state.openPane === 'expedir'\r\n    const showHistorico = this.state.openPane === 'historico'\r\n  \tconst modelosActions = [{\r\n  \t\ttext: 'Usar este modelo',\r\n  \t\tintent: Intent.PRIMARY,\r\n  \t\thandler: (e) => { \r\n  \t\t\tthis.props.onUsarModelo(e)\r\n  \t\t\treturn true \r\n  \t\t}\r\n  \t}]\r\n  \tconst versoesActions = [{\r\n  \t\ttext: 'Usar esta versão',\r\n  \t\tintent: Intent.PRIMARY,\r\n  \t\thandler: (e) => { \r\n  \t\t\tthis.props.onUsarVersao(e)\r\n  \t\t\treturn true \r\n  \t\t}\r\n  \t}]  \t\r\n  \treturn (\r\n\t  \t<SliderContainer>\r\n\t\t  \t<Slider show={ this.state.openPane === 'menu' } position=\"left\">\r\n\t\t  \t\t<SidebarMenu onClick={this.handleMenuClick}/>\r\n\t\t  \t</Slider>\r\n\t\t  \t<Slider show={ showRubricas } position=\"right\">\r\n\t\t  \t\t<Rubricas onBack={this.backToMenu} show={ showRubricas } minuta={ this.props.minuta } />\r\n\t\t\t\t</Slider>\r\n\t\t  \t<Slider show={ showHistorico } position=\"right\">\r\n\t\t  \t\t<Historico onBack={this.backToMenu} show={ showHistorico } />\r\n\t\t\t\t</Slider>\t\t\t\r\n\t\t  \t<Slider show={ showDespachos } position=\"right\">\r\n\t\t  \t\t<Despachos onBack={this.backToMenu} show={ showDespachos } />\r\n\t\t\t\t</Slider>\t\t\r\n        <Slider show={ this.state.openPane === 'expedir' } position=\"right\">\r\n          <Expedir onBack={this.backToMenu} show={ showExpedir } minuta={ this.props.minuta } />\r\n        </Slider>  \r\n\t\t\t\t<DialogMinutas \r\n\t\t\t\t  show={ this.state.openDialog === 'modelos' } \r\n\t\t\t\t  onClose={ this.closeDialog } \r\n\t\t\t\t  grupos={ this.loadModelos  }\r\n\t\t\t\t  minuta={ this.loadMinuta }\r\n\t\t\t\t  actions={ modelosActions }/>\r\n\t\t\t\t<DialogMinutas\r\n\t\t\t\t  show={ this.state.openDialog === 'versoes' }\r\n\t\t\t\t  title=\"Versões desta minuta\"\r\n\t\t\t\t  placeholder=\"Selecione uma versão na lista à esquerda\"\r\n\t\t\t\t  onClose={ this.closeDialog }\r\n\t\t\t\t  minutas={ this.loadVersoes }\r\n\t\t\t\t  minuta={ this.loadMinuta }\r\n\t\t\t\t  actions={ versoesActions }/>\r\n\t\t\t\t<DialogInputNome\r\n\t\t\t\t  show={ this.state.openDialog === 'salvarVersao' }  \r\n\t\t\t\t  title=\"Salvar esta versão\"\r\n\t\t\t\t  onClose={ this.closeDialog }\r\n\t\t\t\t  onChange={ this.handleSalvarVersao }\r\n\t\t\t\t/>  \r\n\t\t\t\t<DialogInputNome\r\n\t\t\t\t  show={ this.state.openDialog === 'salvarCopia' }  \r\n\t\t\t\t  title=\"Salvar uma cópia desta minuta\"\r\n\t\t\t\t  label=\"Indique o título da cópia que será criada:\"\r\n\t\t\t\t  onClose={ this.closeDialog }\r\n\t\t\t\t  onChange={ this.handleSalvarCopia }\r\n\t\t\t\t/> \r\n\t\t\t\t<DialogSalvarModelo\r\n\t\t\t\t  show={ this.state.openDialog === 'salvarModelo' }\r\n\t\t\t\t  onClose={ this.closeDialog }\r\n\t\t\t\t  onChange={ this.handleSalvarModelo }\t\t\t\t\r\n\t\t\t\t/>  \r\n\t\t\t</SliderContainer>\r\n\t\t)\t\r\n  }\r\n}\r\n\r\nSidebar.propTypes = {\r\n  minuta: PropTypes.instanceOf(Minuta).isRequired,\r\n  onSalvarCopia: PropTypes.func,\r\n  onSalvarModelo: PropTypes.func,\r\n  onSalvarVersao: PropTypes.func,\r\n  onUsarModelo: PropTypes.func,\r\n  onUsarVersao: PropTypes.func,\r\n}\r\n\r\nexport default Sidebar\r\n  \r\n  ","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Alignment, Button, Classes, EditableText, Navbar, NavbarGroup, NavbarHeading } from '@blueprintjs/core'\r\nimport Spacer from './ui/Spacer.js'\r\nimport './Topbar.css'\r\n\r\nfunction Topbar (props) {\r\n\tconst sidebarIcon = props.sidebarIsOpen ? 'menu-closed' : 'menu'\r\n\tconst rightbarIcon = props.rightbarIsOpen ? 'menu-open' : 'menu'\r\n\treturn (\r\n\t  <Navbar className=\"bp3-dark\">\r\n\t      <NavbarGroup>\r\n\t          <Spacer width=\"-12px\" />\r\n\t          <Button className={Classes.MINIMAL} icon={sidebarIcon} onClick={props.toggleSidebar} />\r\n\t          <Spacer width=\"16px\" />\r\n\t          <NavbarHeading>\r\n\t            <div style={{ maxWidth: 400 }}>\r\n\t\t            <EditableText\r\n\t\t              maxLength={120}\r\n\t\t              placeholder=\"Clique para dar um nome a esta minuta...\"\r\n\t\t              onChange={ (e) => props.onChangeName && props.onChangeName(e) }\r\n\t\t            />\r\n\t            </div>\r\n            </NavbarHeading>\r\n\t      </NavbarGroup>\r\n\t      <NavbarGroup align={Alignment.RIGHT} style={{ marginRight: -8 }}>\r\n\t        <Button className={Classes.MINIMAL} icon={rightbarIcon} onClick={props.toggleRightbar} />\r\n\t      </NavbarGroup>\r\n\t  </Navbar>\r\n\t)\r\n}\r\n\r\nTopbar.propTypes = {\r\n\trightbarIsOpen: PropTypes.bool,\r\n\tsidebarIsOpen: PropTypes.bool,\r\n\tonChangeName: PropTypes.func,\r\n\ttoggleRightbar: PropTypes.func,\r\n\ttoggleSidebar: PropTypes.func\r\n}\r\n\r\nexport default Topbar\r\n\r\n    ","import React from 'react';\nimport \"normalize.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport './App.css';\nimport './titlebar-overrides.css'   // Útil apenas para aplicativos Electron com custom-electron-titlebar\n\n\nimport { Intent, Spinner } from '@blueprintjs/core'\n\nimport AppFrame from './ui/AppFrame.js'\nimport CollapsibleBar from './ui/CollapsibleBar.js'\nimport { AppToaster } from './ui/toaster.js'\n\nimport EditorTexto from './EditorTexto.js'\nimport Mascara from './Mascara.js'\nimport Sidebar from './Sidebar.js'\nimport Topbar from './Topbar.js'\n\nimport Minuta from './Minuta.js'\nimport { usuarioAtual } from './lib/globalData.js'\nimport { carregarMinuta, salvarCopia, salvarMinuta, salvarModelo, salvarVersao } from './lib/minutaData.js'\nimport { getMinutaId } from './lib/utils.js'\n\nconst AUTOSAVE_INTERVAL = 10000\n\nclass App extends React.Component {\n\n  constructor (props) {\n    super()\n    \n    const camposDefaultMinuta = {\n      tipo: 'det',\n      // distribuicao: [ usuarioAtual.unidade ],\n    }\n    const minuta = new Minuta(camposDefaultMinuta)\n    \n    this.state = {\n      showSpinner: false,\n      sidebarIsOpen: true,\n      rightbarIsOpen: true,\n      minuta,\n      texto: minuta.texto\n    }  \n\n    this.autosave = this.autosave.bind(this)\n    this.handleTextoChange = this.handleTextoChange.bind(this)\n    this.handleToggleSidebar = this.handleToggleSidebar.bind(this) \n    this.handleToggleRightbar = this.handleToggleRightbar.bind(this)\n    this.handleChangeName = this.handleChangeName.bind(this)  \n    this.handleMergeMinuta = this.handleMergeMinuta.bind(this)\n    this.handleChangeMinuta = this.handleChangeMinuta.bind(this)\n    this.handleSalvarCopia = this.handleSalvarCopia.bind(this)\n    this.handleSalvarModelo = this.handleSalvarModelo.bind(this)\n    this.handleSalvarVersao = this.handleSalvarVersao.bind(this)\n  }  \n\n  componentDidMount () {\n    const minutaId = getMinutaId()\n    if (!minutaId) {\n      this.setupAutosave()\n      return\n    }  \n\n    this.setState({\n      showSpinner: true\n    })\n    carregarMinuta(minutaId)\n    .then(data => {\n      let newMinuta = new Minuta()\n      newMinuta.setProps({\n        ...this.state.minuta\n      })\n      newMinuta.setProps(data)\n      this.setState({\n        minuta: newMinuta,\n        texto: newMinuta.texto,\n        showSpinner: false\n      })\n      this.setupAutosave()\n    })\n    .catch(error => {\n      alert('Erro tentando carregar a minuta')\n      window.close()\n    })\n  }\n\n  setupAutosave () {\n    setInterval(() => {\n      if (this.state.minuta.foiAlterada()) {\n        this.autosave()\n      }    \n    }, AUTOSAVE_INTERVAL)      \n  }\n\n  autosave() {\n    // Simula um autosaving\n    salvarMinuta(this.state.minuta).then(data => this.state.minuta.marcarComoNaoAlterada())\n  }\n\n  handleToggleSidebar (e) {\n    this.setState({\n      sidebarIsOpen: !this.state.sidebarIsOpen\n    })\n  }\n\n  handleToggleRightbar (e) {\n    this.setState({\n      rightbarIsOpen: !this.state.rightbarIsOpen\n    })\n  }\n\n  handleTextoChange (e) {\n    this.state.minuta.setProp('texto', e)\n  }\n\n  handleChangeName (nome) {\n    document.title = nome\n    this.state.minuta.setProp('titulo', nome)\n  }\n\n  handleMergeMinuta (outraMinuta) {\n    if (!outraMinuta) return \n    let newMinuta = Minuta.mergeMinutas(this.state.minuta, outraMinuta)\n    this.setState({\n      minuta: newMinuta,\n      texto: newMinuta.texto,\n    })\n  }\n\n  handleChangeMinuta (novaMinuta) {\n    const newMinuta = new Minuta()\n    newMinuta.setProps(novaMinuta)\n    this.setState({\n      minuta: newMinuta,\n      texto: newMinuta.texto\n    })\n  }\n\n  // ** Função genérica de salvamento de minuta, utilizada\n  //    por this.handleSalvarCopia, this.handleSalvarModelo e\n  //    this.handleSalvarversao\n  // Não usamos em autosave () porque esta função sempre \n  // mostra um toast para indicar que deu tudo certo, e o\n  // autosave tem que salvar em silêncio\n\n  salvarDocumento (funcaoSalvar, { titulo, tipo, mensagemSucesso, mensagemErro }) {\n    if (!funcaoSalvar) {\n      console.error('Erro em salvarDocumento: funcaoSalvar não pode ser null')\n      return null\n    }\n    funcaoSalvar(titulo, tipo)\n    .then(() => {\n      AppToaster.show({\n        message: mensagemSucesso || 'O documento foi salvo com êxito',\n        intent: Intent.SUCCESS\n      })\n    })\n    .catch(() => {\n      AppToaster.show({\n        message: mensagemErro || 'Ocorreu um erro',\n        intent: Intent.DANGER\n      })\n    })\n  }\n\n  handleSalvarCopia (titulo) {\n    this.salvarDocumento(salvarCopia, {\n      titulo,\n      mensagemSucesso: `Salvou uma cópia desta minuta com o título \"${ titulo }\"`,\n      mensagemErro: 'Ocorreu um erro tentando salvar uma cópia desta minuta'\n    })\n  }\n\n  handleSalvarModelo ({ titulo, tipo }) {\n    this.salvarDocumento(salvarModelo, {\n      titulo, \n      tipo,\n      mensagemSucesso: `Salvou este modelo com o nome \"${ titulo }\"`,\n      mensagemErro: 'Ocorreu um erro tentando salvar o modelo'\n    })\n  }\n\n  handleSalvarVersao (titulo) {\n    this.salvarDocumento(salvarVersao, {\n      titulo,\n      mensagemSucesso: `Esta versão da minuta foi salva como \"${ titulo }\"`,\n      mensagemErro: 'Ocorreu um erro tentando salvar esta versão'\n    })\n  }\n\n  render () {\n    let topbar = (\n      <Topbar \n        sidebarIsOpen={this.state.sidebarIsOpen}\n        rightbarIsOpen={this.state.rightbarIsOpen}\n        toggleSidebar={this.handleToggleSidebar}\n        toggleRightbar={this.handleToggleRightbar} \n        onChangeName={this.handleChangeName}\n      />\n    )\n\n    let sidebar = (\n      <CollapsibleBar width={'var(--sidebar-width)'} open={this.state.sidebarIsOpen}>\n        <div className=\"sidebar-inner\">\n          <Sidebar \n            minuta={this.state.minuta} \n            onUsarModelo={this.handleMergeMinuta} \n            onUsarVersao={this.handleChangeMinuta}\n            onSalvarCopia={this.handleSalvarCopia}\n            onSalvarModelo={this.handleSalvarModelo}\n            onSalvarVersao={this.handleSalvarVersao}/>\n        </div>\n      </CollapsibleBar>\n    )\n\n    let content = (\n      <div style={{ display:'flex', width: '100%', flex: 1, height: '100%', alignItems: 'stretch' }}>\n        <div style={{flex: 1}}>\n          <EditorTexto texto={this.state.texto} onChange={this.handleTextoChange}/>\n        </div>\n        <CollapsibleBar width={'var(--rightbar-width)'} open={this.state.rightbarIsOpen}>\n          <Mascara minuta={this.state.minuta}/> \n        </CollapsibleBar>\n      </div>\n    )\n\n    return (\n      <>\n      <AppFrame \n        topbar={topbar}\n        sidebar={sidebar}\n        content={content}\n      />\n      <div style={{ \n        position: 'fixed', \n        top: 'calc(50% - 50px)', \n        left: 0, right: 0,\n        textAlign: 'center',\n        display: this.state.showSpinner ? 'block' : 'none',\n        zIndex: 100        \n      }} >\n        <Spinner size={Spinner.SIZE_STANDARD} />\n      </div>  \n      </>\n    )\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","function mergeArrays (arr1, arr2) {\r\n  if (!Array.isArray(arr1)) return arr2\r\n  if (!Array.isArray(arr2)) return arr1\r\n  const newArr = [...arr1]\r\n  arr2.forEach(item => {\r\n    if (newArr.indexOf(item) < 0) {\r\n      newArr.push(item)\r\n    }  \r\n  })  \r\n  return newArr\r\n}  \r\n\r\nfunction getMinutaId () {\r\n  const location = global ? global.location : window.location\r\n  let locationSearch = location.search.substr(1, location.search.length - 1)\r\n  if (locationSearch)\r\n    return locationSearch\r\n  return 0\r\n}\r\n\r\nexport {\r\n  getMinutaId,\r\n\tmergeArrays\r\n}"],"sourceRoot":""}